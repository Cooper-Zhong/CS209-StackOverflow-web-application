[{"owner":{"user_type":"does_not_exist","display_name":"user10082400"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56312809/use-two-ways-for-outputting-to-system-out-but-why-only-the-way-in-front-outputs","last_activity_date":1558868464,"creation_date":1558867591,"answer_count":0,"title":"Use two ways for outputting to System.out, but why only the way in front outputs?","body":"<p>Within a method, I experimented with  two ways of outputing to <code>System.out</code>: one via <code>OutputStreamWriter</code> and the other via <code>PrintWriter</code>. I found that only the one which is in the front will output, but the one behind will not. Why is that? </p>\n\n<p>Is it because when the first's writer is closed implicitly, it will also close <code>System.out</code>?</p>\n\n<p>How can I make the two ways (one after the other) both output?</p>\n\n<pre><code>try (BufferedWriter bw = new BufferedWriter (new PrintWriter(System.out, true))) //  specify System.out for the output stream and \"true\" for automatic flushing.\n    {\n    bw.write(\"system.out-&gt;printwriter-&gt;bufferedwriter\");\n    bw.write(\"\\n\");\n    // to make sure the content be printed.\n    // need to flush the output from the buffer to destination\n    // You can call flush or close \n    bw.flush();\n    }\ncatch (IOException e)\n    {\n        e.printStackTrace();\n    }\n\n\n\ntry ( BufferedWriter bw2 = new BufferedWriter(new OutputStreamWriter(System.out)))\n    {\n    bw2.write(\"system.out-&gt;outputstreamwriter-&gt;bufferedwriter\");\n    bw2.write(\"\\n\");\n    // need to flush the output from the buffer to destination      \n    bw2.flush();\n    }\ncatch (IOException e)\n    {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>will output only <code>system.out-&gt;printwriter-&gt;bufferedwriter</code></p>\n\n<pre><code>try ( BufferedWriter bw2 = new BufferedWriter(new OutputStreamWriter(System.out)))\n    {\n    bw2.write(\"system.out-&gt;outputstreamwriter-&gt;bufferedwriter\");\n    bw2.write(\"\\n\");\n    // need to flush the output from the buffer to destination      \n    bw2.flush();\n    }\ncatch (IOException e)\n    {\n        e.printStackTrace();\n    }\n\ntry (BufferedWriter bw = new BufferedWriter (new PrintWriter(System.out, true))) //  specify System.out for the output stream and \"true\" for automatic flushing.\n    {\n    bw.write(\"system.out-&gt;printwriter-&gt;bufferedwriter\");\n    bw.write(\"\\n\");\n    // to make sure the content be printed.\n    // need to flush the output from the buffer to destination\n    // You can call flush or close \n    bw.flush();\n    }\ncatch (IOException e)\n    {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>will output only <code>system.out-&gt;outputstreamwriter-&gt;bufferedwriter</code></p>\n","question_id":56312809,"tags":["java","io"],"score":0,"is_answered":false,"view_count":35,"last_edit_date":1558868464},{"owner":{"profile_image":"https://i.stack.imgur.com/hy4NB.jpg?s=256&g=1","account_id":15996754,"user_type":"registered","user_id":11544498,"link":"https://stackoverflow.com/users/11544498/not-founded","reputation":51,"display_name":"not_founded"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56274236/operations-on-file-with-multithreading","last_activity_date":1558611377,"creation_date":1558610957,"answer_count":0,"title":"Operations on file with multithreading","body":"<p>I'm trying to work with multiThreading and I want to write a code that must do some operations on a specific file called data.txt.</p>\n\n<p>There must be three writers and three readers,writer 1 has to write a random char from A to Z,writer 2 has to write a random number from 1 to 100,writer 3 has to write a random char from this set of characters {*%$#@!&amp;}.</p>\n\n<p>Then readers must read a character from the file data.txt and then reader 1 write this character in file 1.txt,reader 2 write this character in file 2.txt and reader 3 write this character in file 3.txt.</p>\n\n<p>If there was no character in data file to read the readers must wait until the writers add something to the data file.</p>\n\n<p>I have wrote two classes called WriterInFile and ReaderFromFile that extends Thread class but it seems that the ReaderFromFile doesn't work correctly(It doesn't read any characters from data file and doesn't add anything to files 1.txt,2.txt,3.txt)</p>\n\n<p>This is the code for ReaderFromFile class:</p>\n\n<pre><code>import java.io.*;\n\npublic class ReaderFromFile extends Thread {\n    private static FileReader reader;\n    private int numberOfReader;\n\n\n    ReaderFromFile(int numberOfReader, FileReader reader) {\n        this.numberOfReader = numberOfReader;\n        ReaderFromFile.reader = reader;\n    }\n\n    public void run() {\n        for (int i = 0; i &lt; 5; i++) {\n            String s = null;\n            try {\n                s = readFrom();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        FileWriter writer;\n        switch (numberOfReader) {\n            case 1:\n                try {\n                    writer = new FileWriter(\"1.txt\",true);\n                    if (s != null) {\n                        writer.write(s);\n                    }\n                    writer.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                break;\n            case 2:\n                try {\n                    writer = new FileWriter(\"2.txt\",true);\n                    if (s != null) {\n                        writer.write(s);\n                    }\n                    writer.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                break;\n            case 3:\n                try {\n                    writer = new FileWriter(\"3.txt\",true);\n                    if (s != null) {\n                        writer.write(s);\n                    }\n                    writer.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                break;\n        }\n    }\n}\n\n/**\n * @return the character that has been reed\n */\nprivate synchronized String readFrom() throws IOException {\n    String s = null;\n    while (!reader.ready()) {\n        try {\n            wait();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n    try {\n        s = String.valueOf(reader.read());\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    notifyAll();\n    return s;\n}\n\n\n}\n</code></pre>\n\n<p>this is the WriterInFile class:</p>\n\n<pre><code>import java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.Random;\n\npublic class WriterInFile extends Thread {\nprivate static FileWriter writer;\nprivate int numberOfReader;\n\nWriterInFile(int numberOfReader, FileWriter writer) {\n    this.numberOfReader = numberOfReader;\n    WriterInFile.writer = writer;\n}\n\npublic void run() {\n    for (int i=0;i&lt;5;i++){\n        try {\n            sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        switch (numberOfReader) {\n            case 1:\n                writeChar();\n                break;\n            case 2:\n                writeNumber();\n                break;\n            case 3:\n                writeShape();\n                break;\n        }\n    }\n}\n\n\nprivate synchronized void writeChar() {\n    String s = getRandomChar();\n    try {\n        writer.write(s);\n        System.out.println(s);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    notifyAll();\n}\n\nprivate synchronized void writeNumber() {\n    String s = getRandomNumber();\n    try {\n        writer.write(s);\n        System.out.println(s);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    notifyAll();\n}\n\nprivate synchronized void writeShape() {\n    String s = getRandomShape();\n    try {\n        writer.write(s);\n        System.out.println(s);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    notifyAll();\n}\n\nprivate String getRandomChar() {\n    double randomDouble = Math.random();\n    randomDouble = randomDouble * 26;\n    int randomInt = (int) randomDouble;\n    return String.valueOf((char)(randomInt+'A'));\n}\n\nprivate String getRandomNumber() {\n    double randomDouble = Math.random();\n    randomDouble = randomDouble * 100 + 1;\n    int randomInt = (int) randomDouble;\n    return String.valueOf(randomInt);\n}\n\n\nprivate String getRandomShape() {\n    String chars = \"*%$#@!&amp;\";\n    Random rnd = new Random();\n    char randomChar = chars.charAt(rnd.nextInt(chars.length()));\n    return String.valueOf(randomChar);\n}\n}\n</code></pre>\n\n<p>and this is the main file:</p>\n\n<pre><code>public static void main(String[] args) {\n\n        try {\n            FileWriter writer = new FileWriter(\"data.txt\");\n            FileReader reader = new FileReader(\"data.txt\");\n            //creating writers\n            WriterInFile writer1 = new WriterInFile(1, writer);\n            WriterInFile writer2 = new WriterInFile(2, writer);\n            WriterInFile writer3 = new WriterInFile(3, writer);\n            // creating readers\n            ReaderFromFile reader1 = new ReaderFromFile(1, reader);\n            ReaderFromFile reader2 = new ReaderFromFile(2, reader);\n            ReaderFromFile reader3 = new ReaderFromFile(3, reader);\n\n            writer1.start();\n            writer2.start();\n            writer3.start();\n\n            reader1.start();\n            reader2.start();\n            reader3.start();\n            Thread.sleep(10000);\n            writer.close();\n            reader.close();\n    } catch (IOException | InterruptedException e) {\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n","question_id":56274236,"tags":["java","multithreading","file","io"],"score":0,"is_answered":false,"view_count":44,"last_edit_date":1558611377},{"owner":{"profile_image":"https://i.stack.imgur.com/PYsmu.jpg?s=256&g=1","account_id":8856397,"user_type":"registered","user_id":6614056,"link":"https://stackoverflow.com/users/6614056/abhilash","reputation":823,"display_name":"Abhilash","accept_rate":67},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56236189/fastest-way-to-write-multiple-files-in-java","last_activity_date":1558442248,"creation_date":1558434182,"answer_count":1,"title":"Fastest way to write multiple files in java","body":"<p>I have requirement where I need to write multiple input streams to a temp file in java. I have the below code snippet for the logic. Is there a better way to do this in an efficient manner?</p>\n\n<pre><code>final String tempZipFileName = \"log\" + \"_\" + System.currentTimeMillis();\n        File tempFile = File.createTempFile(tempZipFileName, \"zip\");\n        final FileOutputStream oswriter = new FileOutputStream(tempFile);\n        for (final InputStream inputStream : readerSuppliers) {\n            byte[] buffer = new byte[102400];\n            int bytesRead = 0;\n\n            while ((bytesRead = inputStream.read(buffer)) &gt; 0) {\n                oswriter.write(buffer, 0, bytesRead);\n            }\n            buffer = null;\n            oswriter.write(System.getProperty(\"line.separator\").getBytes());\n            inputStream.close();\n        }\n</code></pre>\n\n<p>I have multiple files of size ranging from 45 to 400 mb, for a typical 45mb and 360 mb files this method is taking around 3 mins on average. Can this be further improved?</p>\n","question_id":56236189,"tags":["java","file","io"],"score":0,"is_answered":false,"view_count":360},{"owner":{"profile_image":"https://www.gravatar.com/avatar/a90d27cf1ef919d846a249cb04b3fe2e?s=256&d=identicon&r=PG","account_id":54797,"user_type":"registered","user_id":1965110,"link":"https://stackoverflow.com/users/1965110/zorkus","reputation":484,"display_name":"Zorkus","accept_rate":100},"content_license":"CC BY-SA 2.5","link":"https://stackoverflow.com/questions/3355746/java-io-fastest-way-to-remove-file","last_activity_date":1558433161,"creation_date":1280338983,"answer_count":5,"title":"Java, IO - fastest way to remove file","body":"<p>My problem is that I have an app which is writing a lot of relatively (100-500kb) small CSV files (tens and hundreds of thousands ). Content of those files then get loaded in database via sql loader call (its oracle db) and this is what I have to live with. </p>\n\n<p>So, I need to remove those small files time to time to prevent them from eating up all space. I would like to attach that to the activity which writes those files and loads them into db as a last finalize step.</p>\n\n<p>My Question is -- how in java can one remove a bunch of small files with less overhead on performance?</p>\n\n<p>Thanks in advance!\nMichael</p>\n","question_id":3355746,"tags":["java","file","io","nio"],"score":17,"accepted_answer_id":3355827,"is_answered":true,"view_count":18310},{"owner":{"user_type":"does_not_exist","display_name":"user10082400"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56223139/is-it-helpful-to-wrap-system-in-of-type-bufferedinputstream-into-a-buffered","last_activity_date":1558363567,"creation_date":1558362884,"answer_count":0,"title":"Is it helpful to wrap `System.in` of type `BufferedInputStream` into a `BufferedReader`?","body":"<p>I found that the default type of <code>System.in</code> is <code>BufferedInputStream</code>, by </p>\n\n<pre><code>System.out.println(System.in.getClass());\n</code></pre>\n\n<p>and I saw a lot of uses of <code>System.in</code> by wrapping it into a <code>BufferedReader</code>:</p>\n\n<pre><code>BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n</code></pre>\n\n<p>Are <code>BufferedInputStream</code> and <code>BufferedReader</code> redundant with each other?</p>\n\n<p>Is it helpful to wrap <code>System.in</code> into a <code>BufferedReader</code>?</p>\n","question_id":56223139,"tags":["java","io"],"score":0,"is_answered":false,"view_count":25},{"owner":{"user_type":"does_not_exist","display_name":"user10082400"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56207091/what-differences-are-between-objectinput-outputstream-and-datainput-outputstream","last_activity_date":1558271346,"creation_date":1558263348,"answer_count":2,"title":"What differences are between ObjectInput/OutputStream and DataInput/OutputStream when applying to instances of primitive types?","body":"<p>It seems to me that both <code>ObjectInputStream</code>/<code>ObjectOutputStream</code>, and <code>DataInputStream</code>/<code>DataOutputStream</code> can apply to instances of primitive types.\nWhat differences between <code>ObjectInputStream</code>/<code>ObjectOutputStream</code>, and <code>DataInputStream</code>/<code>DataOutputStream</code> when they both apply to instances of primitive types?</p>\n\n<p>Can they both (de)serialize instances of primitive types in the same way?</p>\n","question_id":56207091,"tags":["java","serialization","io"],"score":1,"accepted_answer_id":56208135,"is_answered":true,"view_count":34},{"owner":{"user_type":"does_not_exist","display_name":"user10040300"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56206766/in-linux-does-any-instance-of-java-io-console-represent-the-controlling-termina","last_activity_date":1558262449,"creation_date":1558260502,"answer_count":0,"title":"In Linux, does any instance of java.io.Console represent the controlling terminal of the current JVM process?","body":"<p>In Linux, a process may or may not have <a href=\"https://en.wikipedia.org/wiki/POSIX_terminal_interface#Controlling_terminals_and_process_groups\" rel=\"nofollow noreferrer\">a controlling terminal</a>. In Linux, does <strong>any instance</strong> of <code>java.io.Console</code> class <strong>always</strong> represent the controlling terminal of the current JVM process?</p>\n\n<p>I guess yes, because the following from  <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/Console.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/io/Console.html</a> describes something similar to the controlling terminal of a JVM process:</p>\n\n<blockquote>\n  <p>Methods to access the character-based console device, if any,\n  associated with the current Java virtual machine. Whether a virtual\n  machine has a console is dependent upon the underlying platform and\n  also upon the manner in which the virtual machine is invoked. If the\n  virtual machine is started from an interactive command line without\n  redirecting the standard input and output streams then its console\n  will exist and will typically be connected to the keyboard and display\n  from which the virtual machine was launched. If the virtual machine is\n  started automatically, for example by a background job scheduler, then\n  it will typically not have a console.</p>\n</blockquote>\n","question_id":56206766,"tags":["java","linux","io","console"],"score":1,"is_answered":false,"view_count":40,"last_edit_date":1558262449},{"owner":{"user_type":"does_not_exist","display_name":"user10082400"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56198945/does-scanner-have-its-own-buffer-for-reading","last_activity_date":1558182848,"creation_date":1558182548,"answer_count":1,"title":"Does Scanner have its own buffer for reading?","body":"<p><code>BufferedReader</code> and <code>BufferedInputStream</code> have their own buffers for reading. Is having buffer the reason why they can read a line at a time?</p>\n\n<p><code>Scanner</code> can read a line at a time too. But it doesn't necessarily work with <code>BufferedReader</code> and <code>BufferedInputStream</code>. Does it have its own buffer for reading a line at a time?</p>\n\n<p>Thanks.</p>\n","question_id":56198945,"tags":["java","io","buffer"],"score":-1,"accepted_answer_id":56198986,"is_answered":true,"view_count":41},{"owner":{"profile_image":"https://lh4.googleusercontent.com/-p0Bv4LRRhLs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfWTqyFfABsnP5bNlEVLfldltSInQ/mo/photo.jpg?sz=256","account_id":15945728,"user_type":"registered","user_id":11506365,"link":"https://stackoverflow.com/users/11506365/dunglerjo","reputation":1,"display_name":"DunglerJo"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56170304/print-is-blocking-bufferedreader-input","last_activity_date":1558138378,"creation_date":1558015082,"answer_count":1,"title":"print is blocking BufferedReader input?","body":"<p>I am trying to parallel execute my code, but got now a problem.\nThe code without parallel execution is waiting for input (1) and then he is printing out something (2).\nNow I execute my code parallel with the help of a timer (task2) and for the input (1)I got another loop.</p>\n\n<p>Now if I try to write something down but I am not fast enough, the input isn't reading the whole input which was interrupted by the task2 with the print out.</p>\n\n<pre><code>static BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\nstatic PrintStream out = new PrintStream(System.out);\n\nstatic void test1(BufferedReader in, PrintStream out) throws IOException {\n    String input = in.readLine();\n    if (input.equals(\"test\"))\n        System.out.println(\"true input\");\n    else System.out.println(\"false input\");\n}\n\npublic static void main(String[] args) throws IOException {\n    Timer timer = new Timer();\n    timer.schedule(new TimerTask() {\n        @Override\n        public void run() {\n            while (true) {\n                System.out.println(\"print\"); \n                Thread.sleep(1000);}}}, 1000);\n    while (true)\n        test1(in, out);\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nc3fL.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/nc3fL.jpg</a></p>\n","question_id":56170304,"tags":["java","io","bufferedreader"],"score":0,"is_answered":false,"view_count":81,"last_edit_date":1558137268},{"owner":{"profile_image":"https://www.gravatar.com/avatar/392637756859396abc0f62f06afc459c?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":15960846,"user_type":"registered","user_id":11517979,"link":"https://stackoverflow.com/users/11517979/vini290","reputation":13,"display_name":"vini290"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56192968/remove-a-last-blank-line","last_activity_date":1558130237,"creation_date":1558123902,"answer_count":6,"title":"Remove a last blank line","body":"<p>I have a problem with some java code.\nI'm returning a text from a method, which is on a .txt file. Then, I'm storing this text to a variable \"text\" and writing this on another .txt file. But the problem is: this new .txt file gets a new blank line at the bottom. That's because inside my method read, the variable \"text\" is receiving a \"\\n\". How can I solve this problem? \nPS: I'm doing this with educational purposes.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.io.FileReader;\nimport java.io.FileWriter;\n\npublic class Arquivo {\n    public static void main(String[] args) {\n        String text = read(\"in.txt\");\n        write(text, \"out.txt\");\n        System.out.println(\"Text created!\");\n    }\n\n    public static String read(String arquivo) {\n        String text = \"\";\n        try (BufferedReader br = new BufferedReader(new FileReader(arquivo))) {\n\n            String line = br.readLine();\n            while (line != null) {\n                text += line + \"\\n\";\n                line = br.readLine();\n            }\n\n        } catch (IOException e) {\n            System.err.println(e.getMessage());\n        }\n        return text;\n    }\n\n    public static void write(String text, String arquivo) {\n        try (BufferedWriter bw = new BufferedWriter(new FileWriter(arquivo))) {\n            bw.write(text);\n        } catch (IOException e) {\n            System.err.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n\n<p>My two created files \"in.txt\" and \"out.txt\".</p>\n\n<p>this is\na text file.</p>\n\n<p>this is\na text file.\n(blank line)</p>\n","question_id":56192968,"tags":["java","file","io"],"score":0,"accepted_answer_id":56193102,"is_answered":true,"view_count":1376},{"owner":{"profile_image":"https://i.stack.imgur.com/pvWWM.jpg?s=256&g=1","account_id":8252494,"user_type":"registered","user_id":9372934,"link":"https://stackoverflow.com/users/9372934/lindstorm","reputation":879,"display_name":"Lindstorm"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48877659/beginner-infinite-loop-with-scanner-object","last_activity_date":1519102691,"creation_date":1519099399,"answer_count":4,"title":"Beginner - Infinite Loop with Scanner Object","body":"<p>In the following code, I get an infinite loop if an enter anything that causes an <code>InputMismatchException</code> in the <code>try</code> part below</p>\n\n<pre><code>   public static void main(String[] args) {\n       Scanner in = new Scanner(System.in);\n       double x;\n       boolean b = true;\n       while (b) {\n           try {\n               x = in.nextDouble(); //Enter 4a\n               b = false;\n           } catch (InputMismatchException e) {\n               System.out.println(\"Wrong\");\n               // in.nextLine();\n           }\n       }\n       in.close();\n   }\n</code></pre>\n\n<p>If I uncomment the <code>in.nextLine();</code>, the code works fine. I am wondering why there is an infinite loop. I do not see why there would be an infinite loop because after the <code>catch</code> part is executed, I should be able to enter data when the <code>try</code> part is executed again. Why does this not happen?</p>\n","question_id":48877659,"tags":["java","loops","io","java.util.scanner"],"score":4,"accepted_answer_id":48877744,"is_answered":true,"view_count":271},{"owner":{"profile_image":"https://www.gravatar.com/avatar/66d7544a9c002f381b6532a6dbb7367d?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":9350518,"user_type":"registered","user_id":6940373,"link":"https://stackoverflow.com/users/6940373/hadi","reputation":544,"display_name":"Hadi","accept_rate":40},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48853563/how-can-i-cancel-file-creation-process-in-java-in-my-example","last_activity_date":1518970189,"creation_date":1518969138,"answer_count":1,"title":"how can i cancel file creation process in java in my example?","body":"<p>I’m creating an empty file with specified size as below.</p>\n\n<pre><code>final long size = 10000000000L;\nfinal File file = new File(\"d://file.mp4\");\n\nThread t = new Thread(new Runnable() {\n    @Override\n    public void run() {\n        try {\n            RandomAccessFile raf = new RandomAccessFile(file, \"rw\");\n            raf.setLength(size);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n});\nt.start();\n</code></pre>\n\n<p>For big sizes like 5GB or less and more, this process takes more time on android devices. Now my question is how can I cancel the creating file process Whenever i wanted?\nthanks.</p>\n","question_id":48853563,"tags":["java","io","randomaccessfile"],"score":0,"accepted_answer_id":48853729,"is_answered":true,"view_count":111},{"owner":{"profile_image":"https://www.gravatar.com/avatar/2d7e42a86b26a949330599ceaf4e4d1f?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":12958384,"user_type":"registered","user_id":9368365,"link":"https://stackoverflow.com/users/9368365/sameersan","reputation":1,"display_name":"Sameersan"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48848515/why-does-my-code-write-arraylist-element-into-my-output-file-twice-rather-than","last_activity_date":1518935788,"creation_date":1518928734,"answer_count":2,"title":"Why does my code write ArrayList element into my output file twice, rather than updating the ArrayList?","body":"<p>I just want to say thank you for taking the time to look into my question. I am currently working on an inventory interface. The issue I am having is that when I read an update file, to update my database file, this is what I get: database: abc,123,10.0,5.0,false,10 (partName,partNumber,listPrice,salePrice,onSale,quantity)</p>\n\n<p>after I read in the update file: \nabc,123,10.0,5.0,false,10 is first in my db followed by abc,123,20.0,10.0,true,2</p>\n\n<p>how do I fix this so that it updates the string in the db file, instead of appending it to the file?</p>\n\n<p>here is some of my code:</p>\n\n<pre><code>//findBp method\npublic static BikePart findBp(ArrayList&lt;BikePart&gt; bpal, BikePart bp) {\n    BikePart found = null;\n    for(BikePart b : bpal) {\n        if(b.getPartName().equals(bp.getPartName()) &amp;&amp; b.getPartNumber() == bp.getPartNumber()) {\n            found = b;\n            break;\n        }\n    }\n    return found;\n}\n\n//sort by partName\npublic static void sortName(ArrayList&lt;BikePart&gt; bpal) {\n    Collections.sort(bpal, BikePart.bpNameComp);\n}\n//sort by partNumber\npublic static void sortNumber(ArrayList&lt;BikePart&gt; bpal) {\n    Collections.sort(bpal, BikePart.bpPartNumComp);\n}\n\n//readFile method\npublic static void readFile(String fileName, ArrayList&lt;BikePart&gt; bpal) {\n    if(fileName == null || fileName.equals(\"\")) {\n        return;\n    }\n    File file = new File(fileName);\n    try {\n        Scanner read = new Scanner(file);\n        while(read.hasNextLine()) {\n            String line = read.nextLine();\n            String pv[] = line.split(\",\");\n            BikePart bp = BikePart.toObject(pv);\n            BikePart found = findBp(bpal, bp);\n            if(found == null) {\n                bpal.add(bp);\n            } else {\n                found.setQuantity(found.getQuantity() + bp.getQuantity());\n                found.setPartName(bp.getPartName());\n                found.setPartNumber(bp.getPartNumber());\n                found.setListPrice(bp.getListPrice());\n                found.setSalesPrice(bp.getSalesPrice());\n                found.setPartOnSale(bp.isPartOnSale());\n            }\n        }\n        read.close();\n    }\n    catch (FileNotFoundException e) {\n        System.out.println(fileName + \" is not found!\");\n        System.out.println(\"Enter another file name.\");\n        String fileName2 = in.nextLine();\n        readFile(fileName2, bpal);\n    }\n}\n//writeFile method\npublic static void writeFile(String fileName, ArrayList&lt;BikePart&gt; bpal) {\n    try {\n        BufferedWriter outStream = new BufferedWriter(new FileWriter(fileName, true));\n        for(BikePart bp : bpal) {\n            outStream.write(bp.toString());\n            outStream.newLine();\n        }\n        outStream.close();\n    }\n    catch (IOException e) {\n        System.out.println(\"file not found!\");\n    }\n}\n\npublic static void main(String[] args) {\n    //calendar field\n    Calendar cal = Calendar.getInstance();\n\n    //ArrayList for DB\n    ArrayList&lt;BikePart&gt; bpal = new ArrayList&lt;BikePart&gt;();\n    readFile(\"DB.txt\", bpal);\n\n    //user input variable\n    String usrIn = \"\";\n\n    //loop for user choice\n    while(usrIn != \"Quit\") {\n        //prompts user to select choice\n        System.out.println(\"Please select your option from \"\n                + \"the following menu: \");\n        System.out.println(\"Read: Read an inventory delivery file\");\n        System.out.println(\"Enter: Enter a part\");\n        System.out.println(\"Sell: Sell a part\");\n        System.out.println(\"Display: Display a part\");\n        System.out.println(\"SortName: Sort parts by part name\");\n        System.out.println(\"SortNumber: Sort parts by part number\");\n        System.out.println(\"Quit: \");\n        System.out.println(\"Enter your choice: \");\n\n        //initiates usrIn\n        usrIn = in.nextLine();\n\n        //switch for input choice\n        switch(usrIn) {\n\n        case \"Read\":\n            //read method \n            System.out.println(\"Enter file name: \");\n            String fileName = in.nextLine();\n            readFile(fileName, bpal);\n            break;\n        case \"Enter\":\n            //enter method\n            break;\n        case \"Sell\":\n            //sell method\n            break;\n        case \"Display\":\n            //display method\n            break;\n        case \"SortName\":\n            //sortName method\n            break;\n        case \"SortNumber\":\n            //sortNum method\n            break;\n        case \"Quit\":\n            //quit method\n            writeFile(\"DB.txt\", bpal);\n            System.out.println(\"good bye! \");\n            break;\n        }\n        if(usrIn.equals(\"Quit\")) {\n            break;\n        }\n    }\n\n}\n</code></pre>\n\n<p>I haven't filled in the rest of the code yet, because I want to fix this issue first before I move on. I just want to say thanks again for taking a look.</p>\n","question_id":48848515,"tags":["java","arraylist","io"],"score":-1,"accepted_answer_id":48849117,"is_answered":true,"view_count":73,"last_edit_date":1518930982},{"owner":{"profile_image":"https://graph.facebook.com/100005137569756/picture?type=large","account_id":5130554,"user_type":"registered","user_id":4110915,"link":"https://stackoverflow.com/users/4110915/jenna-maiz","reputation":792,"display_name":"Jenna Maiz","accept_rate":34},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/32830018/loading-a-file-into-memoryjava","last_activity_date":1518698681,"creation_date":1443467004,"answer_count":6,"title":"Loading a file into memory(Java)?","body":"<p>I have a 60 MB text file through which my program searches for a specific ID and extract some related text. And I have to repeat the process for 200+ IDs. Initially, I used a loop to cycle through the lines of the file and look for the ID and then extract the related text but it takes way too long(~2 min). So instead, now I am looking at way to load the entire file into memory, then search for my IDs and associated text from there; I imagine that should be faster than accessing the hard drive 200+ times. So I wrote the following code to load the file into memory:</p>\n\n<pre><code>public String createLocalFile(String path)\n{   \n    String text = \"\";\n    try\n    {\n        FileReader fileReader = new FileReader( path );\n        BufferedReader reader = new BufferedReader( fileReader );\n        String currentLine = \"\";\n        while( (currentLine = reader.readLine() ) != null )\n        {\n            text += currentLine;\n            System.out.println( currentLine );\n        }\n\n    }\n    catch(IOException ex)\n    {\n        System.out.println(ex.getMessage());\n    }\n    return text;\n}\n</code></pre>\n\n<p>Unfortunately, saving the file's text into a String variable takes an extremely long time. How can I load the file faster ? Or is there a better way to accomplish the same task ? Thanks for any help.</p>\n\n<p>Edit: Here is the link to the file <code>https://github.com/MVZSEQ/denovoTranscriptomeMarkerDevelopment/blob/master/Homo_sapiens.GRCh38.pep.all.fa</code></p>\n\n<p>Typical line looks like:</p>\n\n<pre><code>&gt;ENSP00000471873 pep:putative chromosome:GRCh38:19:49496434:49499689:1 gene:ENSG00000142534 transcript:ENST00000594493 gene_biotype:protein_coding transcript_biotype:protein_coding\\\nMKMQRTIVIRRDYLHYIRKYNRFEKRHKNMSVHLSPCFRDVQIGDIVTVGECRPLSKTVR\\\nFNVLKVTKAAGTKKQFQKF\\\n</code></pre>\n\n<p>Where <code>ENSP00000471873</code> is the ID and the text I would be extracting is </p>\n\n<pre><code>MKMQRTIVIRRDYLHYIRKYNRFEKRHKNMSVHLSPCFRDVQIGDIVTVGECRPLSKTVR\\\n    FNVLKVTKAAGTKKQFQKF\\\n</code></pre>\n","question_id":32830018,"tags":["java","file","optimization","io"],"score":3,"is_answered":true,"view_count":13599,"last_edit_date":1443468219},{"owner":{"profile_image":"https://i.stack.imgur.com/DKYS4.png?s=256&g=1","account_id":4361623,"user_type":"registered","user_id":3558514,"link":"https://stackoverflow.com/users/3558514/weteamsteve","reputation":187,"display_name":"weteamsteve","accept_rate":100},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48792823/junit-what-is-the-best-way-to-fail-java-io-file-delete-for-unit-testing","last_activity_date":1518629340,"creation_date":1518628554,"answer_count":3,"title":"JUnit What is the best way to fail java.io.File.delete() for unit testing","body":"<p>I am unit testing a method that is using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#delete()\" rel=\"nofollow noreferrer\">java.io.File.delete()</a> and I am wondering what the best way to make <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#delete()\" rel=\"nofollow noreferrer\">java.io.File.delete()</a> fail is.</p>\n\n<pre><code>final File newFile = new File(filePath); // filePath is a valid path\n\nif (newFile.exists())\n{\n    if (!newFile.delete())\n    {\n        final String msg = \"Error deleting file \" + newFile.getAbsolutePath();\n        LOG.error(msg);\n    }\n}\n</code></pre>\n\n<p>So the file must exist, and I want the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#delete()\" rel=\"nofollow noreferrer\">newFile.delete()</a> to fail.</p>\n\n<p>I understand this could be done by:</p>\n\n<ul>\n<li>Mocking the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html\" rel=\"nofollow noreferrer\">File</a> class delete method to return false or throw <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/SecurityException.html\" rel=\"nofollow noreferrer\">java.lang.SecurityException</a></li>\n<li>Somehow use a security manager and its <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkDelete(java.lang.String)\" rel=\"nofollow noreferrer\">SecurityManager.checkDelete(java.lang.String)</a> method denies delete access to the file</li>\n<li>Maybe simply changing read/write access alone could do this, but it hasn't seem to be working for me in <a href=\"https://junit.org/junit4/\" rel=\"nofollow noreferrer\">JUnit 4</a>.</li>\n</ul>\n","question_id":48792823,"tags":["java","file","unit-testing","junit","io"],"score":4,"accepted_answer_id":48792978,"is_answered":true,"view_count":6847,"last_edit_date":1518628895},{"owner":{"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=256&g=1","account_id":137237,"user_type":"registered","user_id":341291,"link":"https://stackoverflow.com/users/341291/axel","reputation":13989,"display_name":"Axel","accept_rate":76},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/5883808/new-file-vs-new-file-feature-or-bug","last_activity_date":1518595146,"creation_date":1304514037,"answer_count":3,"title":"new File(&quot;&quot;) vs. new File(&quot;.&quot;): Feature or Bug?","body":"<p><code>new File(\"\")</code> and <code>new File(\".\")</code> yield the same canonical path, yet the former object is unsubable. Consider below code, and how both objects return the same canonical path. <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/File.html#getCanonicalPath%28%29\">The documentation states</a> the canonical path is \"both absolute and unique\". Yet only the File created with the \".\" argument is actually usable.</p>\n\n<p>Shouldn't an exception be thrown at some point? Either in the empty string constructor call (since the object created doesn't seem valid), or at least in getCanonicalPath (which at least declares IOException)?</p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\npublic abstract class Test {\n\n    public static void main(String[] args) throws Exception {\n        testFile(\"\");\n        testFile(\".\");\n    }\n\n    private static void testFile(String arg) throws IOException {\n        System.out.format(\"File constructor argument: \\\"%s\\\"\\n\", arg);\n        File g = new File(arg);\n      System.out.format(\"toString()            = \\\"%s\\\"\\n\", g.toString());\n        System.out.format(\"getAbsolutePath()     = \\\"%s\\\"\\n\", g.getAbsolutePath());\n        System.out.format(\"getAbsoluteFile()     = \\\"%s\\\"\\n\", g.getAbsoluteFile());\n        System.out.format(\"getgetCanonicalPath() = \\\"%s\\\"\\n\", g.getCanonicalPath());\n        System.out.format(\"getgetCanonicalFile() = \\\"%s\\\"\\n\", g.getCanonicalFile());\n        System.out.format(\"exists()              = %s\\n\", g.exists());\n        System.out.format(\"isDirectory()         = %s\\n\", g.isDirectory());\n        System.out.println();\n  }\n}\n</code></pre>\n\n<p>And the output that it produces:</p>\n\n<pre><code>File constructor argument: \"\"\ntoString()            = \"\"\ngetAbsolutePath()     = \"C:\\usr\\workspace\\Test\"\ngetAbsoluteFile()     = \"C:\\usr\\workspace\\Test\"\ngetgetCanonicalPath() = \"C:\\usr\\workspace\\Test\"\ngetgetCanonicalFile() = \"C:\\usr\\workspace\\Test\"\nexists()              = false\nisDirectory()         = false\n\nFile constructor argument: \".\"\ntoString()            = \".\"\ngetAbsolutePath()     = \"C:\\usr\\workspace\\Test\\.\"\ngetAbsoluteFile()     = \"C:\\usr\\workspace\\Test\\.\"\ngetgetCanonicalPath() = \"C:\\usr\\workspace\\Test\"\ngetgetCanonicalFile() = \"C:\\usr\\workspace\\Test\"\nexists()              = true\nisDirectory()         = true\n</code></pre>\n","question_id":5883808,"tags":["file","io","java"],"score":34,"accepted_answer_id":5884502,"is_answered":true,"view_count":7581,"last_edit_date":1304514672},{"owner":{"profile_image":"https://i.stack.imgur.com/pYYSU.jpg?s=256&g=1","account_id":1729460,"user_type":"registered","user_id":1583374,"link":"https://stackoverflow.com/users/1583374/surz","reputation":994,"display_name":"Surz","accept_rate":78},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25577398/error-unreported-exception-java-io-ioexception-must-be-caught-or-declared-to-be","last_activity_date":1518134285,"creation_date":1409354055,"answer_count":3,"title":"Error &quot;unreported exception java.io.ioexception must be caught or declared to be thrown&quot; in Java class","body":"<p>I am getting a \"unreported exception java.io.ioexception must be caught or declared to be thrown\" for some reason. I throw an I/O exception in this method:</p>\n\n<pre><code>    private void setChar() throws IOException\n    {\n        try\n        {\n            int data = in.read(); \n            if(data==-1)\n            {\n                eof = true; \n            }\n            else\n            {\n                currentChar = (char) data; \n            }\n        }\n        catch (IOException e) \n        {\n            System.exit(0);\n        }\n    }\n</code></pre>\n\n<p>And I call the method here (in the constructors):</p>\n\n<pre><code>private BufferedReader in;\nprivate char currentChar;\nprivate boolean done;\n\npublic Scanner(InputStream inStream)\n{\n    in = new BufferedReader(new InputStreamReader(inStream));\n    done = false;\n    getNextChar();\n}\n\npublic Scanner(String inString)\n{\n    in = new BufferedReader(new StringReader(inString));\n    done = false; \n    setChar();\n}\n</code></pre>\n\n<p>Am I calling / throwing the exception wrong?</p>\n","question_id":25577398,"tags":["java","exception","io","ioexception"],"score":-1,"accepted_answer_id":25577455,"is_answered":true,"view_count":10787,"last_edit_date":1518134171},{"owner":{"profile_image":"https://www.gravatar.com/avatar/7d44423fad79530b59a084b2d15ee19a?s=256&d=identicon&r=PG","account_id":221017,"user_type":"registered","user_id":478765,"link":"https://stackoverflow.com/users/478765/ed22","reputation":1137,"display_name":"ed22","accept_rate":50},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48654729/i-have-an-input-stream-and-need-to-make-it-look-like-a-file-on-disk-possible-in","last_activity_date":1517969531,"creation_date":1517967916,"answer_count":0,"title":"I have an input stream and need to make it look like a file on disk. Possible in Java?","body":"<p>I have a third party class that only accepts files but all I can provide is InputStream. Is it possible to make a stream \"look\" like a file so that I could pass it to the before mentioned class.</p>\n\n<p>Specifically I need to pass this stream to javafx.scene.media.Media() constructor which accepts only a file path. I do not have the file \"video.mp4\" - only a stream.</p>\n\n<pre><code> // create media player\n Media media = new Media(\"video.mp4\");\n MediaPlayer mediaPlayer = new MediaPlayer(media);\n</code></pre>\n","question_id":48654729,"tags":["java","io"],"score":0,"is_answered":false,"view_count":193,"last_edit_date":1517969531},{"owner":{"profile_image":"https://www.gravatar.com/avatar/6ae8d785e5cebd64e31d803e97713380?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":12733114,"user_type":"registered","user_id":9248984,"link":"https://stackoverflow.com/users/9248984/some-student","reputation":67,"display_name":"Some Student"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48650358/binary-i-o-skipping-the-bytes-and-printing-only-the-utf-types","last_activity_date":1517945446,"creation_date":1517944567,"answer_count":1,"title":"Binary I/O Skipping the bytes and printing only the UTF types","body":"<p>So here is my problem : I need to read some data from a .dat file, the problem being that not all things are saved the same (some UTF, Int, Double), so I can't just <code>readUTF()</code> in a loop until it's done because it will stumble upon an Int and give me an error. One thing I do know is that the order of the things written in the .dat file, and they go like this: UTF, Int, Double, Double, Double. Here is the code I have so far :</p>\n\n<pre><code>import java.io.*;\n\npublic class BytePe1 {\n   public static void main(String[] args) {\n      try {\n         FileInputStream fis = new  FileInputStream(\"ClassList.dat\");\n         BufferedInputStream bis = new BufferedInputStream( fis );\n         DataInputStream dis = new DataInputStream(bis);\n\n         String studentName;\n         int studentNumber;\n\n         //while(dis.readLine() != null) {\n            System.out.println(\"Name\");\n            System.out.println(dis.readUTF());\n            System.out.println(dis.readInt());\n            System.out.println(dis.readDouble());\n            System.out.println(dis.readDouble());\n            System.out.println(dis.readDouble());\n            //System.out.println(dis.readUTF());\n            //And I would need to repeat these steps above but I don't know how many\n            //Files there actually are, so I would like to not just spam this until I see errors\n         //}\n         dis.close();\n      }\n      catch(Exception e) {\n         System.out.println(\"Exception: \" + e.getMessage());\n      }\n   }\n}\n</code></pre>\n\n<p>This will output the correct things but I don't know how many things I have saved in that file, and thats what I would like to know; is it possible to skip some parts of the file and just print all of the names and then int's and so on.\n<a href=\"https://i.stack.imgur.com/TeK2h.png\" rel=\"nofollow noreferrer\">One small part of the reading</a></p>\n","question_id":48650358,"tags":["java","io","datainputstream"],"score":0,"accepted_answer_id":48650560,"is_answered":true,"view_count":118},{"owner":{"profile_image":"https://www.gravatar.com/avatar/a803d236c435f104ed1fde59fb9d1c61?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":9772223,"user_type":"registered","user_id":7243671,"link":"https://stackoverflow.com/users/7243671/topgun741","reputation":135,"display_name":"topgun741","accept_rate":20},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48612350/file-not-found-in-data-user-0-package-name-files-directory-but-is-found-in-d","last_activity_date":1517871620,"creation_date":1517773942,"answer_count":0,"title":"File not found in /data/user/0/[package name]/files directory but is found in /data/data/[package name]/files directory","body":"<p>I am downloading a zip file from a server to my internal storage. It is saved to the <code>/data/data/[package name]/files</code> directory and I can view it with the device file explorer in Android Studio. But when I try to access it to unzip it, I get the following error:</p>\n\n<pre><code>java.io.FileNotFoundException: thezip.zip: open failed: ENOENT (No such file or directory)\n</code></pre>\n\n<p>When I call:</p>\n\n<pre><code>context.getFileDir();\n</code></pre>\n\n<p>it gives me the following directory:</p>\n\n<pre><code>/data/user/0/[package name]/files\n</code></pre>\n\n<p>Which is a symbolic link to the </p>\n\n<pre><code>/data/data/[package name]/files directory\n</code></pre>\n\n<p>So I should have access to the zip file, shouldn't I?</p>\n\n<p>What am I missing here? I want to be able to have any user that uses the app to have access to the files in the zip folder. Help!</p>\n\n<p><strong>EDIT</strong>: here is the code:</p>\n\n<pre><code>class DownloadFileAsync extends AsyncTask&lt;String, String, String&gt; {\n    private Context context;\n    private String fileName;\n\n    public DownloadFileAsync(Context context, String fileName){\n        this.context = context;\n        this.fileName = fileName;\n    }\n\n    @Override\n    protected void onPreExecute() {\n        super.onPreExecute();\n\n    }\n\n    @Override\n    protected String doInBackground(String... aurl) {\n        downloadZipFile(aurl[0]);\n        try {\n            unzipFolder(fileName);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n\n    }\n    protected void onProgressUpdate(String... progress) {\n        Log.d(\"ANDRO_ASYNC\",progress[0]);\n\n    }\n\n    @Override\n    protected void onPostExecute(String unused) {\n\n    }\n\n    private void downloadZipFile(String link){\n        int count;\n\n        try {\n\n            URL url = new URL(link);\n            URLConnection connection = url.openConnection();\n            connection.connect();\n\n            int lenghtOfFile = connection.getContentLength();\n            Log.d(\"ANDRO_ASYNC\", \"Lenght of file: \" + lenghtOfFile);\n\n           // File file = new File(context.getFilesDir(), fileName);\n            File file = new File(context.getFilesDir(), fileName);\n            Log.d(\"zzzz\", file.toString());\n            InputStream input = new BufferedInputStream(url.openStream());\n            FileOutputStream output = new FileOutputStream(file);\n\n            byte data[] = new byte[1024];\n\n            long total = 0;\n\n            while ((count = input.read(data)) != -1) {\n                total += count;\n                publishProgress(\"\"+(int)((total*100)/lenghtOfFile));\n                output.write(data, 0, count);\n            }\n\n            output.flush();\n            output.close();\n            input.close();\n        } catch (Exception e) {}\n    }\n\n    private void unzipFolder(String zippedFile) throws IOException {\n            //Log.d(\"zzzz\", context.getFilesDir().toString());\n\n        byte[] buffer = new byte[1024];\n        ZipInputStream zipInputStream = new ZipInputStream(new FileInputStream(zippedFile));\n        ZipEntry zipEntry = zipInputStream.getNextEntry();\n        while (zipEntry != null){\n            String aFile = zipEntry.getName();\n            File newFile = new File(context.getFilesDir(), aFile);\n//            File newFile = new File(context.getFilesDir(), aFile);\n            FileOutputStream fileOutputStream = new FileOutputStream(newFile);\n            int len;\n            while ((len = zipInputStream.read(buffer)) &gt; 0){\n                fileOutputStream.write(buffer, 0, len);\n            }\n            fileOutputStream.close();\n            zipEntry = zipInputStream.getNextEntry();\n        }\n\n        zipInputStream.closeEntry();\n        zipInputStream.close();\n\n    }\n}\n</code></pre>\n","question_id":48612350,"tags":["java","android","io","filesystems","android-file"],"score":6,"is_answered":false,"view_count":6034,"last_edit_date":1517871620},{"owner":{"user_type":"does_not_exist","display_name":"user7038003"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42320415/difference-between-system-err-println-and-just-throwing-an-exception-java","last_activity_date":1487451975,"creation_date":1487450193,"answer_count":3,"title":"difference between system.err.println and just throwing an exception? (java)","body":"<p>I'm trying to open and read a file passed from the command line. </p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>import java.io.*;\n\npublic class Test {\n\n    public static void main(String[] args) throws FileNotFoundException {\n\n        if ( (args[0].length() == 0) || (args[0] == null) || (args[0].isEmpty()) ) {\n            System.err.println(\"Usage Error: No file name was provided.\");\n            System.exit(1);\n        }\n\n        File file = new File(args[0]);\n\n        if (!file.exists()) {\n            System.err.println(\"Usage Error: The file, \" + args[0] + \", does not exist.\");\n        }\n\n        if (!file.canRead()) {\n            System.err.println(\"Usage Error: The file, \" + args[0] + \", cannot be read.\");\n        }\n    } // main\n}\n</code></pre>\n\n<p>I am not entirely sure how I should be handling file not found exceptions. My teacher has mentioned try/catch blocks but I wasn't sure if I needed those here. Is it sufficient to just test to see if the file was passed as an argument and if it wasn't use the System.err.print() method to give the user an error? </p>\n\n<p>Also, if System.err.print() is called does it exit the program after that (meaning, do I need to include System.exit(1) after that)? Or is it better (in terms of design) to just do something like this:</p>\n\n<pre><code>public void readFile() throws FileNotFoundException {\n    // try to open file here\n}\n\npublic static void main(String[] args) {\n   try {\n       readFile(); \n   } catch (Exception e) {\n       // exception handled here\n   }\n}\n</code></pre>\n\n<p>I just need to make sure the user actually passes a string as the file name and that it exists/can be read.</p>\n","question_id":42320415,"tags":["java","io","filenotfoundexception"],"score":-2,"accepted_answer_id":42320475,"is_answered":true,"view_count":2376,"last_edit_date":1487450805},{"owner":{"profile_image":"https://www.gravatar.com/avatar/9db3bf26eef643ef5238d499e07aced0?s=256&d=identicon&r=PG","account_id":1371375,"user_type":"registered","user_id":1306482,"link":"https://stackoverflow.com/users/1306482/jasmin-meg","reputation":53,"display_name":"Jasmin Meg"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/9965875/java-file-createnewfile-file-not-created-and-no-exceptions-thrown","last_activity_date":1487325959,"creation_date":1333295983,"answer_count":4,"title":"Java file.createNewFile file not created and no exceptions thrown","body":"<p>The following code does not always create the file. \nAs far as I noticed, the first time this code has run, though no exception is thrown and createdFileSucceeded == true, the file doesn't get created.</p>\n\n<p>I run the code on Windows, java 6. </p>\n\n<p>Any input could be helpful</p>\n\n<pre><code>File file = new File(tmpDir, fileName);\n\ntry {\nif (tmpDir == null) {\n  String environmentHomePath // = somePath;\n  tmpDir = new File(environmentHomePath, \"SampleDumps\");\n\n  if (! tmpDir.exists() || ! tmpDir.isDirectory()) {\n    boolean mkdirSucceeded = tmpDir.mkdir();\n    if (! mkdirSucceeded) {\n      throw new IOException(\"Failed creating directory: '\" + tmpDir.getAbsolutePath() + \"'\");\n    }\n  }\n}\n\nif (file.exists()) {\n  boolean deleteFileSucceeded = file.delete(); \n  if (! deleteFileSucceeded) {\n    throw new IOException(\"Unable to delete pre existing sample file: '\" + fileName + \"'\");\n  }\n}\n\nboolean createFileSucceeded = file.createNewFile();\nif (! createFileSucceeded) {\n  throw new IOException(\"Unable to create sample file: '\" + fileName + \"'\");\n}\n\nfw = new FileWriter(file);\nbw = new BufferedWriter(fw);\n\nStringBuilder sb = new StringBuilder(\"something...\");\n\nbw.write(sb.toString());\nbw.flush();\n}\ncatch (IOException ioe) {\nlog.warn(\"Unable to file invalid sample to file: '\" + fileName + \"'\", ioe);\n}\nfinally {\nif (bw != null) {\n  try {\n    bw.close();\n  } catch (IOException e) {\n    log.warn(\"Unable to close Writer to file: '\" + fileName + \"'\", e);\n  }\n}\nelse if (fw != null) {\n  try {\n    fw.close();\n  } catch (IOException e) {\n    log.warn(\"Unable to close Writer to file: '\" + fileName + \"'\", e);\n  }\n}\n}\n</code></pre>\n","question_id":9965875,"tags":["java","io"],"score":5,"accepted_answer_id":9965937,"is_answered":true,"view_count":11311},{"owner":{"profile_image":"https://lh4.googleusercontent.com/-Nvys2W4v0tk/AAAAAAAAAAI/AAAAAAAABKc/Uiuw5qdWsPI/photo.jpg?sz=256","account_id":10261841,"user_type":"registered","user_id":7572899,"link":"https://stackoverflow.com/users/7572899/akhil-chaturvedi","reputation":1,"display_name":"Akhil Chaturvedi"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42266587/how-to-save-a-file-in-a-text-editor","last_activity_date":1487274381,"creation_date":1487226860,"answer_count":1,"title":"How to save a file in a text editor?","body":"<p>This code creates a small application which is a basic text editor initially and I have added a drop down file menu which is obvious in every editor, it includes features like 'new', 'open', 'save' and 'save as'.</p>\n\n<p>I am not getting how to add the feature of saving in the existing file and a new file.</p>\n\n<pre><code>import java.io.*;  \nimport java.awt.event.*;  \nimport javax.swing.*;    \nimport java.io.IOException;\nimport java.nio.file.StandardOpenOption;\n\npublic class Editor implements ActionListener\n{    \n\n    boolean updateStatus;\n    Editor Jedtr;\n    boolean saved;  \n    boolean newFileFlag;  \n    String fileName;    \n    static File fileRef;  \n\n\n    JFrame f;    \n    JMenuBar mb;    \n    JMenu file,edit,help;    \n    JMenuItem cut,copy,paste,selectAll,NewFile,Open,Save,SaveAs;    \n    JTextArea ta;  \n\n\n    Editor(){ \n\n\n        saved=true;  \n        newFileFlag=true;  \n        fileName=new String(\"Untitled\");  \n        fileRef=new File(fileName);  \n\n        Open=new JMenuItem(\"Open File\");    \n        Open.addActionListener(this);            \n        file=new JMenu(\"File\");    \n        file.add(Open);             \n        mb=new JMenuBar();    \n        f=new JFrame();    \n        cut=new JMenuItem(\"Cut\");    \n        copy=new JMenuItem(\"Copy\");    \n        paste=new JMenuItem(\"Paste\");    \n        selectAll=new JMenuItem(\"Select All\");    \n\n        /////////////////////////////////////////////////////////////////////////////////\n\n        NewFile =new JMenuItem(\"New\");\n        Open=new JMenuItem(\"Open\");\n        Save=new JMenuItem(\"Save\");\n        SaveAs=new JMenuItem(\"Save As\");\n\n        ///////////////////////////////////////////////////////////////////////////////////\n\n        cut.addActionListener(this);    \n        copy.addActionListener(this);    \n        paste.addActionListener(this);    \n        selectAll.addActionListener(this);\n\n        /////////////////////////////////////////////////////////////////////////////////////\n\n        NewFile.addActionListener(this);\n        Open.addActionListener(this);\n        Save.addActionListener(this);\n        SaveAs.addActionListener(this);\n\n        //////////////////////////////////////////////////////////////////////////////////\n\n        mb=new JMenuBar();    \n        file=new JMenu(\"File\");    \n        edit=new JMenu(\"Edit\");    \n        help=new JMenu(\"Help\");     \n        file.add(NewFile);file.add(Open);file.add(Save);file.add(SaveAs);    \n        edit.add(cut);edit.add(copy);edit.add(paste);edit.add(selectAll);    \n        mb.add(file);mb.add(edit);mb.add(help);    \n\n        ///////////////////////////////////////////////////////////////////////////////////////\n\n        ta=new JTextArea();    \n        ta.setBounds(5,5,1200,1200);    \n        f.add(mb);f.add(ta);    \n        f.setJMenuBar(mb);  \n        f.setLayout(null);    \n        f.setSize(800,400);    \n        f.setVisible(true);\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }     \n\n\n\n\n    /////////////////////////////Action performed/////////////////////////////////////////////////\n\n\n    public void actionPerformed(ActionEvent e) \n    {\n        if(e.getSource()==cut)                 \n            ta.cut();                                // to cut text.\n        else if(e.getSource()==paste)\n            ta.paste();                             // to paste text. \n        else if(e.getSource()==copy)\n            ta.copy();                              // to copy text.\n        else if(e.getSource()==selectAll)\n            ta.selectAll();                        // to select text. \n        else if(e.getSource()==Open)\n        {\n            JFileChooser fc=new JFileChooser();\n            int i=fc.showOpenDialog(f);\n            if(i==JFileChooser.APPROVE_OPTION)\n            {\n                File f=fc.getSelectedFile();\n                String filepath=f.getPath();\n                try\n                {\n                    BufferedReader br=new BufferedReader(new FileReader(filepath));\n                    String s1=\"\",s2=\"\";\n                    while((s1=br.readLine())!=null)\n                    {\n                        s2+=s1+\"\\n\";\n                    }\n                    ta.setText(s2);\n                    br.close();\n                }\n                catch (Exception ex)\n                {\n                    ex.printStackTrace();\n                }\n            }\n        }                                       //to open an existing file\n        else if(e.getSource() == NewFile)\n        {\n            JFileChooser fc=new JFileChooser();\n            int j=fc.showOpenDialog(f);\n            if (j==JFileChooser.CUSTOM_DIALOG);\n\n            System.out.println(\"New File\");\n\n            File file = new File(\"C:\\\\Android\\\\.txt\");\n\n            boolean result;\n            try {\n                // create a new file\n                result = file.createNewFile();\n                // test if successfully created a new file\n                if(result){\n                    System.out.println(\"Successfully created \"+file.getAbsolutePath());\n\n                }\n                else{\n                    System.out.println(\"Filed creating \"+file.getAbsolutePath());\n                }\n            }\n                catch (IOException e1) {\n                    // TODO Auto-generated catch block\n                    e1.printStackTrace();\n                }\n    }                                            // to create a new file.\n\n            else if(e.getSource()== SaveAs)\n            {                                  // what to specify here?\n                }\n\n\n\n            else if(e.getSource()==Save)\n            {                                 // what to specify here?\n            }\n}\n\n\n\n\n                /*private Object SaveAs(File temp)\n{\n    // TODO Auto-generated method stub\n    return null;\n}\n\n\n\n///////////////////////////////////////////////////////////////////////////////////////////////\n\n\nprivate void updateStatus(File temp, boolean b)\n{\n    // TODO Auto-generated method stub\n\n}*/\n                boolean isSave()\n                {\n                    return saved;}  \n\n                void setSave(boolean saved)\n                {\n                    this.saved=saved;\n                }\n\n                String getFileName()\n                {\n                    return new String(fileName);\n                }\n\n                void setFileName(String fileName)\n                {\n                    this.fileName=new String(fileName);\n                }  \n\n                ////-------File-------////////\n\n                //public class File implements ActionListener{}\n\n                ////-------File-------////////\n\n                /*public void actionPerformedf(ActionEvent O) {    \nif(O.getSource()==Open){    \n    JFileChooser fc=new JFileChooser();    \n    int i=fc.showOpenDialog(f);    \n    if(i==JFileChooser.APPROVE_OPTION){    \n        File f=fc.getSelectedFile();    \n        String filepath=f.getPath();    \n        try{  \n        BufferedReader br=new BufferedReader(new FileReader(filepath));    \n        String s1=\"\",s2=\"\";                         \n        while((s1=br.readLine())!=null){    \n        s2+=s1+\"\\n\";    \n        }    \n        ta.setText(s2);    \n        br.close();    \n        }catch (Exception ex) \n        {\n            ex.printStackTrace();          \n        }\n    }\n    }\n    }*/    \n\n                public static void main(String[] args) {    \n\n                    new Editor(); \n\n                }    \n            }\n</code></pre>\n","question_id":42266587,"tags":["java","swing","file","io","jtextarea"],"score":0,"is_answered":false,"view_count":1317,"last_edit_date":1487274381},{"owner":{"profile_image":"https://www.gravatar.com/avatar/c7ef16d4725d403d423198e39a0be6b5?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":8193308,"user_type":"registered","user_id":6166963,"link":"https://stackoverflow.com/users/6166963/giorgio-b","reputation":113,"display_name":"giorgio-b"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/37545236/java-asynchronous-i-o-channel-for-reading-and-writing-lines","last_activity_date":1487263793,"creation_date":1464696153,"answer_count":1,"title":"Java: Asynchronous I/O channel for reading and writing lines","body":"<p>I have an application that synchronously reads and writes lines of text using a <code>BufferedReader</code> and a <code>PrintStream</code> wrapping the <code>InputStream</code> and <code>OutputStream</code> of a <code>java.net.Socket</code> object. So, I can just use the methods <code>BufferedReader.readLine()</code> and <code>PrintStream.println()</code> and let the Java library split the input into lines and format the output for me.</p>\n\n<p>Now I want to replace this synchronous IO with asynchronous IO. So I have been looking into <code>AsynchronousSocketChannel</code> which allows to read and write bytes asynchronously. Now, I would like to have wrapper classes so that I can asynchronously read / write lines using strings.</p>\n\n<p>I cannot find such wrapper classes in the Java library. Before I write my own implementation, I wanted to ask if there are any other libraries that allow to wrap <code>AsynchronousSocketChannel</code> and provide asynchronous text IO.</p>\n","question_id":37545236,"tags":["java","asynchronous","text","io"],"score":6,"is_answered":true,"view_count":1804,"last_edit_date":1464696678},{"owner":{"profile_image":"https://i.stack.imgur.com/rFPHA.jpg?s=256&g=1","account_id":6204832,"user_type":"registered","user_id":4833259,"link":"https://stackoverflow.com/users/4833259/alisondong","reputation":151,"display_name":"alisondong"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42266463/java-how-to-get-input-from-console-with-redirection","last_activity_date":1487226367,"creation_date":1487226367,"answer_count":0,"title":"JAVA: how to get input from console with redirection","body":"<p>Sorry to bother you guys, but I cannot find answer when did a lot of searching.</p>\n\n<p>Here is my code, it's pretty simple:</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.ObjectInputStream;\n\npublic class Test {\n    public static void main(String[] args) {\n        System.out.println(args.length);\n        ObjectInputStream is;\n        try {\n            is = new ObjectInputStream(System.in);\n        } catch (IOException e1) {\n            // TODO Auto-generated catch block\n            e1.printStackTrace();\n        }\n\n        String input = System.console().readLine();\n        System.out.println(\"input: \" + input);\n\n    }\n}\n</code></pre>\n\n<p>With command like : java Test, everything works find, and I can get input from console by typing something.\nBUT, with redirection in the command, I cannot type on console to input, the application will return immediately.</p>\n\n<pre><code>java Test /d/aa.dat &lt; /d/example.dat\nException in thread \"main\" java.lang.NullPointerException\n        at Test.main(Test.java:17) \n</code></pre>\n\n<p>I think the root cause is when I use redirection in command line with a file, the default System.in is override by file \"example.dat\".</p>\n\n<p>My question is how can I restore the default System.in to let user input from console?</p>\n\n<p>Thank you so much.</p>\n","question_id":42266463,"tags":["java","redirect","io","inputstream"],"score":0,"is_answered":false,"view_count":1216},{"owner":{"profile_image":"https://www.gravatar.com/avatar/dc897b561a54763c39bc7f005c59b066?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":3277192,"user_type":"registered","user_id":2758839,"link":"https://stackoverflow.com/users/2758839/geogecco","reputation":437,"display_name":"GeoGecco","accept_rate":57},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/29879254/ycad-dxf-library-code-example","last_activity_date":1487182531,"creation_date":1430060535,"answer_count":0,"title":"YCad DXF Library code example","body":"<p>I'm currently working on a java project and need to export a DXF with lines and text. Especially MTEXT which is a multi-line text in AutoCAD DXF files.</p>\n\n<p>I was hoping that anyone here already used the \"<a href=\"http://sourceforge.net/projects/ycad/\" rel=\"nofollow noreferrer\">Ycad</a>\" Library. I can't find any code example and I only have the documentation which doesn't help me right away. <a href=\"https://stackoverflow.com/questions/23512202/ycad-library-usage/29879083#29879083\">This</a> and <a href=\"https://stackoverflow.com/questions/23801956/save-dxf-file-in-java\">that</a> are the only examples I found...</p>\n\n<p>I would need a code snipped which shows how to create a new DXF File, insert lines and text entities and write the file via the Ycad library.\nI would be very thankful if anyone could give me a hint!</p>\n\n<p>Thanks in advance</p>\n","question_id":29879254,"tags":["java","file","io","dxf"],"score":4,"is_answered":false,"view_count":1698,"last_edit_date":1495540900},{"owner":{"profile_image":"https://www.gravatar.com/avatar/3068953dfa307d7a3e0e4c949b85ec01?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":10041747,"user_type":"registered","user_id":7424345,"link":"https://stackoverflow.com/users/7424345/mostafa-hosseini","reputation":7,"display_name":"Mostafa.Hosseini"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42232627/output-is-empty-in-mapreduce","last_activity_date":1487146436,"creation_date":1487093601,"answer_count":0,"title":"Output is Empty in MapReduce","body":"<p>I have Two Function in Reducer Class : \"reducer\" and \"execute\". in \"myExecute\" function :</p>\n\n<pre><code>public class Reducer extends MapReduceBase\nimplements Reducer&lt;IntWritable,Text, IntWritable, Text&gt;, TIntProcedure\n{\n    OutputCollector&lt; IntWritable, Text&gt; m_Collector = null;\n    RTree tree = new RTree();\n    private int m_BasePolyId;\n    private HashMap&lt;Integer,PolyDefault&gt; m_BasePolyMap = new HashMap&lt;Integer,PolyDefault&gt;();\n    private HashMap&lt;Integer,PolyDefault&gt; m_ClipPolyMap = new HashMap&lt;Integer,PolyDefault&gt;();\n\n    public void configure(JobConf conf) \n    {\n      //initialize the RTree\n      tree.init(null);\n    }\n\n    // the key is grid id and values are the polygon texts\n\n    public void reduce(IntWritable gridId, Iterator&lt;Text&gt; values,\n            OutputCollector&lt;IntWritable, Text&gt; collector, Reporter arg3)\n            throws IOException \n    {\n        m_Collector = collector;\n\n        List&lt;PolyDefault&gt;basePolyList = new ArrayList&lt;PolyDefault&gt;();\n        List&lt;PolyDefault&gt; overlayPolyList = new ArrayList&lt;PolyDefault&gt;();\n\n        Text clipText; \n\n        int count = 0;\n        String strcount = \" \";\n        PolyDefault basePolygon = null;\n\n        String strBaseId;\n        String strClipId;\n        int baseId = 0;\n        int clipId = 0;\n        //values contain both basepolygons and clip polygons\n        PolyDefault clipPoly;\n\n        while(values.hasNext())\n        {\n            Text text = values.next(); \n\n            if(text.charAt(0) == 'b')\n            {\n                basePolygon = new PolyDefault();\n                StringTokenizer baseItr = new StringTokenizer(text.toString());\n                //System.err.println(\"base : = \" + baseText);\n                while (baseItr.hasMoreTokens()) // tokens are strings from one serialized polygon\n                {     \n                  if(count == 0)\n                   {\n                    baseItr.nextToken(); //discard\n                    strBaseId = baseItr.nextToken(); //index or line number \n                    baseId = Integer.parseInt(strBaseId);\n\n                    Point2D lbox = new Point2D.Double(Double.parseDouble(baseItr.nextToken()), Double.parseDouble(baseItr.nextToken()));\n                    basePolygon.setM_lbBox(lbox);\n\n                    Point2D ubox = new Point2D.Double(Double.parseDouble(baseItr.nextToken()),Double.parseDouble(baseItr.nextToken()));\n                    basePolygon.setM_ubBox(ubox);\n                   }\n                   count = count + 1;\n\n                  double xCord,yCord;\n\n                  xCord = Double.parseDouble(baseItr.nextToken());\n                  yCord = Double.parseDouble(baseItr.nextToken());\n                  Point2D vertex = new Point2D.Double(xCord,yCord);\n\n                  basePolygon.add(vertex);\n                 }\n                 basePolyList.add(basePolygon);\n                 m_BasePolyMap.put(baseId,basePolygon);\n            }\n            else\n            {\n\n                  StringTokenizer clipItr = new StringTokenizer(text.toString());\n                  clipPoly = new PolyDefault();\n\n                  while(clipItr.hasMoreTokens())\n                  {\n                    if(count == 0)\n                    {\n                     //discard the index or line number\n                     strClipId =  clipItr.nextToken();  //index or line number\n                     clipId = Integer.parseInt(strClipId);\n\n                     Point2D lbox = new Point2D.Double(Double.parseDouble(clipItr.nextToken()), Double.parseDouble(clipItr.nextToken()));\n                     clipPoly.setM_lbBox(lbox);\n\n                     Point2D ubox = new Point2D.Double(Double.parseDouble(clipItr.nextToken()),Double.parseDouble(clipItr.nextToken()));\n                     clipPoly.setM_ubBox(ubox);\n\n                     Rectangle r2 = new Rectangle((float)lbox.getX(), (float)lbox.getY(), (float)ubox.getX(), (float)ubox.getY());\n                     tree.add(r2, clipId);\n                    }\n                    count = count + 1;\n\n                    double xCord,yCord;\n\n                    xCord = Double.parseDouble(clipItr.nextToken());\n                    yCord = Double.parseDouble(clipItr.nextToken());\n                    Point2D vertex = new Point2D.Double(xCord,yCord);\n\n                    clipPoly.add(vertex);\n                  }\n                  //overlayPolyList.add(clipPoly);\n                  m_ClipPolyMap.put(clipId, clipPoly);\n            }\n          } //end while\n\n          Iterator&lt;PolyDefault&gt; itr = basePolyList.iterator();\n          Rectangle baseBox = new Rectangle();\n          PolyDefault basePoly;\n\n          while(itr.hasNext())\n          {\n            basePoly = itr.next();\n            baseBox.maxX = (float)basePoly.getM_ubBox().getX();\n            baseBox.maxY = (float)basePoly.getM_ubBox().getY();\n            baseBox.minX = (float)basePoly.getM_lbBox().getX();\n            baseBox.minY = (float)basePoly.getM_lbBox().getY();\n            this.m_BasePolyId = basePoly.getId();\n\n            tree.intersects(baseBox, this);\n          }\n\n         } //end reduce\n\n    public boolean execute(int clipPolyId) \n    {\n        PolyDefault basePoly = m_BasePolyMap.get(m_BasePolyId);\n        PolyDefault clipPoly = m_ClipPolyMap.get(clipPolyId);\n        PolyDefault resultPoly = (PolyDefault)Clip.intersection(basePoly, clipPoly);\n\n        String strResult;\n        if(resultPoly.isEmpty() == false)\n        {\n           strResult = Parser.serializePoly(resultPoly).toString(); \n           try \n           {\n            m_Collector.collect(null,new Text(strResult) );\n            System.out.println(strResult);\n           } \n           catch (IOException e) \n           {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n           }\n\n        }\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>map and reduce run completely , but in output(part-0000) , there is no message \"Result Sucess ...\" .\ncan I call Execute function in reducer or ... ?</p>\n\n<p>Thanks</p>\n","question_id":42232627,"tags":["java","hadoop","io","mapreduce","reduce"],"score":1,"is_answered":false,"view_count":231,"last_edit_date":1487146436},{"owner":{"profile_image":"https://i.stack.imgur.com/2meZp.png?s=256&g=1","account_id":1065970,"user_type":"registered","user_id":1066530,"link":"https://stackoverflow.com/users/1066530/sas","reputation":2493,"display_name":"Sas","accept_rate":94},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42045098/io-bufferreader-vs-nio-files-newbufferedreader-charsetdecoder-leniency-on-malfor","last_activity_date":1487116971,"creation_date":1486239222,"answer_count":1,"title":"IO bufferReader vs nio Files.newBufferedReader CharsetDecoder leniency on MalformedInput","body":"<p>I have a text file that contains invalid \"UTF-8\" charactor and this causing my app to throw <code>MalformedInputException</code>. I use <code>Files.newBufferedReader</code> to create <code>BufferReader</code>.</p>\n\n<pre><code>Path path = FileSystems.getDefault().getPath(inputDirectory, fileName);\nBufferedReader br = Files.newBufferedReader(path, Charset.defaultCharset());\n</code></pre>\n\n<p>And this seems to be strict on the character encoding. I did some digging and found online that we can improve the leniency by overriding <code>CharactorDecoder</code> default action by <code>.onMalformedInput(CodingErrorAction.REPLACE)</code>. This seems to be fixing the issue.</p>\n\n<p>Then out of curiosity I used java IO <code>BufferedReader</code> to Read the same file.</p>\n\n<pre><code>fr = new FileReader(file);\nbr = new BufferedReader(fr);\n</code></pre>\n\n<p><strong>This seems to have no issue on the invalid character and read the file without any issue.</strong></p>\n\n<p>So I looked at the code of both <code>Files.newBufferedReader</code> and <code>new BufferedReader(fr)</code>. This is how they both implemented</p>\n\n<p><strong>Files.newBufferedReader</strong>:</p>\n\n<pre><code>public static BufferedReader newBufferedReader(Path path, Charset cs)\n    throws IOException\n{\n    //onMalformedInput is not overridden. Thus strict decoding\n    CharsetDecoder decoder = cs.newDecoder();\n\n    //Look at how the InputStreadReader created. The decoder being passed\n    Reader reader = new InputStreamReader(newInputStream(path), decoder);\n\n    return new BufferedReader(reader);\n}\n</code></pre>\n\n<p><strong>IO BuffereReader</strong></p>\n\n<pre><code>//Creating File Reader\n FileReader fr = new FileReader(file);\n\n --------------------------------------------------------------------\n//File Reader constructor\npublic FileReader(File file) throws FileNotFoundException {\n    //Calls it's supper constructor InputStreamReader\n    super(new FileInputStream(file));\n}\n\n-----------------------------------------------------------\n//InputStreamReader Constructor\npublic InputStreamReader(InputStream in) {\n    super(in);\n    try {\n        //This where I don't understand\n        sd = StreamDecoder.forInputStreamReader(in, this, (String)null); // ## check lock object\n    } catch (UnsupportedEncodingException e) {\n        throw new Error(e);\n    }\n}\n</code></pre>\n\n<p>As you can see they both uses <code>StreamDecoder.forInputStreamReader</code>. I know why <code>Files.newBufferedReader</code> has strict decoder. But I am trying to understand where in IO <code>BufferredReader</code>, it's defined to do lenient decoding.</p>\n\n<p>Would really appreciate if some can help me understand this.</p>\n","question_id":42045098,"tags":["java","io","bufferedreader","nio"],"score":1,"is_answered":false,"view_count":1188},{"owner":{"profile_image":"https://www.gravatar.com/avatar/01fe82b4e1acbc5cf2d856d7253e52fc?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":10251444,"user_type":"registered","user_id":7565563,"link":"https://stackoverflow.com/users/7565563/abbey-s","reputation":7,"display_name":"Abbey S"},"closed_date":1487116784,"link":"https://stackoverflow.com/questions/42237722/fairly-new-to-programming-trouble-reading-and-writing-to-a-binary-file","last_activity_date":1487113356,"creation_date":1487112802,"answer_count":1,"title":"Fairly new to programming, trouble reading and writing to a binary file.","body":"<p>So I've got an assignment where I'm supposed to read a .csv file and then write it out in a seperate binary file. The csv file gives strangely formatted stats about baseball players. </p>\n\n<p>Here is the code for the GUI where the program is actually run from:</p>\n\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport java.util.*;\nimport java.io.*;\n\npublic class Homework3 extends JFrame\n{\n   private JButton jbChoose = new JButton(\"Choose File to Convert\");\n   private JTextArea jtaDisc = new JTextArea(\"Welcome to the .csv to binary file converter. Simply click the button below and choose the .csv file you would like to write to binary.\", 5, 20);\n   private File fobj = null;\n\n   public static void main(String[] args)\n   {\n      new Homework3();\n   }\n\n   public Homework3()\n   {\n      this.setSize(400, 175);\n      this.setTitle(\"File Converter\");\n      this.setLocationRelativeTo(null);\n      this.setDefaultCloseOperation(EXIT_ON_CLOSE);\n      this.setResizable(false);\n\n      jtaDisc.setWrapStyleWord(true);\n      jtaDisc.setLineWrap(true);\n      jtaDisc.setEditable(false);\n\n      JPanel jpSouth = new JPanel();\n         jpSouth.add(jbChoose);\n         jpSouth.setAlignmentX(jbChoose.CENTER_ALIGNMENT);\n      this.add(jpSouth, BorderLayout.SOUTH);\n\n      JPanel jpNorth = new JPanel();\n         jpNorth.add(jtaDisc);\n      this.add(jpNorth, BorderLayout.NORTH);\n\n      Homework3Button hw3b = new Homework3Button(this);\n         jbChoose.addActionListener(hw3b);\n\n      setVisible(true);\n   }\n   public File getFobj()\n   {\n      return fobj;\n   }\n\n   public void setFobj(File _fobj)\n   {\n      fobj = _fobj;\n   }\n}\n</code></pre>\n\n<p>Here is the class where I actually try to do the reading and writing. I've got it set to print out the values of the csv file so I can see where it is going wrong. For some reason it's reading the first line and skipping the 2nd and 3rd instead of skipping the 1st and second like I want. It also doesn't get far enough to actually create the file in the write method.</p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport java.io.*;\nimport javax.swing.filechooser.*;\nimport java.util.*;\n\npublic class Homework3Button implements ActionListener \n{\n   private Homework3 window;\n   private ArrayList&lt;Player&gt; data = new ArrayList&lt;Player&gt;();\n   private int pos; \n\n   public Homework3Button(Homework3 _window)\n   {\n      this.window = _window;\n   }\n\n   public void actionPerformed(ActionEvent ae)\n   {\n      doChoose();\n      doRead();\n      doWrite();\n   }\n\n   public void doChoose()\n   {\n      JFileChooser chooser = new JFileChooser(new File(\".\"));\n      FileNameExtensionFilter filter = new FileNameExtensionFilter(\"Excel Documents\", \"csv\");\n      chooser.setFileFilter(filter);\n\n      int returnVal = chooser.showDialog(window, \"Select\");\n      if(returnVal == JFileChooser.APPROVE_OPTION)\n      {\n         File fobj = chooser.getSelectedFile();\n         window.setFobj(fobj);\n      } \n   }\n\n   public void doRead()\n   {\n      File fobj = window.getFobj();\n      if(fobj == null)\n      {\n         JOptionPane.showMessageDialog(null, \"There was a problem reading your file.\", \"Opening Error\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      BufferedReader br = null;\n      try\n      {\n          br= new BufferedReader(new FileReader(fobj));\n      }\n      catch(IOException ioe)\n      {\n         JOptionPane.showMessageDialog(null, \"Cannot open file: \" + ioe.getMessage(), \"Cannot Open\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      data = new ArrayList&lt;Player&gt;();\n      try\n      {\n         String line = br.readLine() ;\n         while(line != null)\n         {\n            System.out.println(line);\n            for(int i = 0; i &lt;= 1; i++)\n            {\n                line = br.readLine();\n            }\n            Player pl = new Player(line);\n            data.add(pl);\n            line = br.readLine();\n         }\n      }\n      catch(EOFException eofe)\n      {\n         System.out.println(\"Exception for ArrayList.\");\n      } \n      catch(IOException ioe)\n      {\n         JOptionPane.showMessageDialog(null, \"Error reading file: \" + ioe.getMessage(), \"Bad Read\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      try\n      {\n          br.close();\n      }\n      catch(IOException ioe)\n      {\n         JOptionPane.showMessageDialog(null, \"Cannot close file: \" + ioe.getMessage(), \"Cannot Close\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n   }\n\n   public void doWrite()\n   {\n      File fobj2 = new File(\"BaseballNames1.bin\");\n\n      if(fobj2 == null)\n      {\n         JOptionPane.showMessageDialog(null, \"There was a problem writing to your file.\", \"Problem Writing\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      DataOutputStream dos = null;\n      try\n      {\n         dos = new DataOutputStream(new FileOutputStream(fobj2));\n      }\n      catch(IOException ioe)\n      {\n         JOptionPane.showMessageDialog(null, \"Cannot open file: \" + ioe.getMessage(), \"Cannot Open\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      System.out.println(\"Before For Loop\");\n      for(Player pl : data)\n      {\n         System.out.println(\"Inside For Loop\");\n         try\n         {\n            dos.writeUTF(pl.getName());\n            dos.writeUTF(pl.getBirth());\n            dos.writeInt(pl.getWeight());\n            dos.writeUTF(pl.getHeight());\n         }\n         catch(IOException ioe)\n         {\n            JOptionPane.showMessageDialog(null, \"Cannot write file: \" + ioe.getMessage(), \"Cannot Write\", JOptionPane.ERROR_MESSAGE);\n            return;\n         }\n         try \n         {\n            dos.close();\n         }\n         catch(IOException ioe)\n         {\n            JOptionPane.showMessageDialog(null, \"Cannot close file: \" + ioe.getMessage(), \"Cannot Close\", JOptionPane.ERROR_MESSAGE);\n            return;\n         }\n      }\n   }    \n}\n</code></pre>\n\n<p>Here is the class where I describe the a player object. When I try to run the program, after reading the .csv file I am met with a long list of errors. The top one is a null pointer exception at line 16 of this class. </p>\n\n<pre><code>import java.util.*;\nimport java.io.*;\n\npublic class Player\n{\n   private String firstName;\n   private String lastName;\n   private int birthDay;\n   private int birthMonth;\n   private int birthYear;\n   private int weight;\n   private double height;\n\n   public Player(String lineRead)\n   {\n      String[] fields = lineRead.split(\",\");\n      firstName = fields[0];\n      lastName = fields[1];\n      birthDay = Integer.parseInt(fields[2]);\n      birthMonth = Integer.parseInt(fields[3]);\n      birthYear = Integer.parseInt(fields[4]);\n      weight = Integer.parseInt(fields[5]);\n      height = Double.parseDouble(fields[6]);  \n   }\n\n   public String getName()\n   {\n      return firstName + \" \" + lastName;\n   }\n\n   public String getBirth()\n   {\n      return Integer.toString(birthMonth) + \"/\" + Integer.toString(birthDay) + \"/\" + Integer.toString(birthYear);\n   }\n\n   public int getWeight()\n   {\n      return weight;\n   }\n\n   public String getHeight()\n   {\n      String weight2 = String.format(\"%.2f\", weight);\n      return weight2;\n   }\n}\n</code></pre>\n\n<p>Here is the .csv file format, each line starts with one space in front of it:</p>\n\n<pre><code>namefirst , namelast  , birthday , birthmonth , birthyear , weight , height \n\nStarlin   , Castro    ,24,3,1990,190,72.8\nMadison   , Bumgarner ,1,8,1989,215,76.0\nJason     , Heyward   ,9,8,1989,240,77.3\nRuben     , Tejada    ,27,10,1989,160,71.2\nJenrry    , Mejia     ,11,10,1989,160,72.5\nMike      , Stanton   ,8,11,1989,235,77.9\nDayan     , Viciedo   ,10,3,1989,240,71.1\nChris     , Sale      ,30,3,1989,170,77.2\nFreddie   , Freeman   ,12,9,1989,225,77.7\nClayton   , Kershaw   ,19,3,1988,225,75.4\nTravis    , Snider    ,2,2,1988,235,72.0\nElvis     , Andrus    ,26,8,1988,200,72.0\nTrevor    , Cahill    ,1,3,1988,220,76.0\nRick      , Porcello  ,27,12,1988,200,77.0\nBrett     , Anderson  ,1,2,1988,235,76.5\nFernando  , Martinez  ,10,10,1988,200,73.0\nJhoulys   , Chacin    ,7,1,1988,215,75.2\nChris     , Tillman   ,15,4,1988,200,77.8\nNeftali   , Feliz     ,2,5,1988,215,75.5\nCraig     , Kimbrel   ,28,5,1988,205,71.6\n</code></pre>\n\n<p>I know this is a lot but none of the questions I look at online pertain to my specific problem and the javadocs are really confusing to me. This is my first big thing with Java IO so I'd really appreciate some help here... I'm not sure if it's a problem with the way I've declared the array in the Player class or what... Any advice on how to fix this mess is greatly appreciated.</p>\n","question_id":42237722,"tags":["java","arrays","csv","io"],"score":-6,"closed_reason":"Not suitable for this site","is_answered":true,"view_count":105},{"owner":{"profile_image":"https://www.gravatar.com/avatar/982c89b4ab31cedd7b618b2657a788f6?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":9435166,"user_type":"registered","user_id":7017351,"link":"https://stackoverflow.com/users/7017351/johnny","reputation":103,"display_name":"Johnny","accept_rate":69},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42172869/filewriter-not-writing-into-directory-properly","last_activity_date":1486797449,"creation_date":1486793212,"answer_count":1,"title":"FileWriter not writing into directory properly","body":"<p>I have a simple program that reads in commands and performs them. Rightnow I have this code for inserting certain text into a text file:</p>\n\n<p>Example command:</p>\n\n<pre><code>INSERT \"John Smith\" INTO college.student\n</code></pre>\n\n<p>My main method: </p>\n\n<pre><code> else if(command.substring(0,6).equalsIgnoreCase(\"INSERT\")){\n        String string = command.substring(7, command.indexOf(\"INTO\") - 1);\n        String DBNameTBName = command.substring(command.indexOf(\"INTO\") + 5);\n        String tableName = DBNameTBName.substring(DBNameTBName.indexOf(\".\") + 1);\n        String DBName = DBNameTBName.substring(0, DBNameTBName.indexOf(\".\"));\n\n        if(DBCommands.insert(string, DBName, tableName)){\n            statfileWriter.println(\"Inserted \" + string  + \" into table \" + tableName + \" in \" + DBName);\n            statfileWriter.println(\"(\" + command + \")\");\n            statfileWriter.flush();\n        }\n        else{\n            errfileWriter.println(\"Error: Could not insert \" + string + \" into table \" + tableName + \" in \" + DBName);\n            errfileWriter.println(\"(\" + command + \")\");\n            errfileWriter.flush();\n        }       \n</code></pre>\n\n<p>And the insert method it calls: </p>\n\n<pre><code>public static boolean insert(String string, String DBName, String tableName){\n    try{\n        string = string.substring(string.indexOf('\"') + 1, string.lastIndexOf('\"')); //removes quotes\n\n        File tableToWriteTo = new File(DBName  + \"/\" + tableName + \".txt\");\n        if (!tableToWriteTo.exists()){\n            return false;\n        }\n\n        PrintWriter writer = new PrintWriter(new FileWriter\n                  (tableToWriteTo, true));\n        writer.println(string);\n        writer.close();\n        return true;\n    }\n    catch(Exception e){\n\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>I am getting very weird behavior with my insert method. It returns true as it always prints to my status log and not error log. I know the method to create the .txt file is working perfectly, I have tested it many times and the student.txt file is always there. With my insert command, if I change the File = new File line to this: </p>\n\n<pre><code>File tableToWriteTo = new File(tableName + \".txt\");\n</code></pre>\n\n<p>Then it unsurprisingly creates a .txt file called \"student\" with my example command, but not in the \"DBName\" folder. If I change it to this: </p>\n\n<pre><code>File tableToWriteTo = new File(DBName  + \"/\" + tableName);\n</code></pre>\n\n<p>Then it creates a file called \"student\" with no type (as in, Windows asks what I want to open it with) but puts in the string I want to insert into it. I should note that if there are multiple INSERT commands then it writes all the strings as I would like it to. </p>\n\n<p>I have tried declaring <code>PrintWriter</code> and <code>File</code> in my main method and passing them in, but that doesn't work either. </p>\n\n<p>How can I get it to write into students.txt in the directory college? </p>\n\n<p>EDIT: Oh my goodness, I'm the stupidest person on Earth. I didn't look at the full commands list I received for this assignment and I forgot there was a delete command and they were BOTH working. I would delete this question but I'll leave this up in case anyone in the future wants to see an example of FileWriter.</p>\n","question_id":42172869,"tags":["java","string","io","filewriter","printwriter"],"score":1,"accepted_answer_id":42173224,"is_answered":true,"view_count":157,"last_edit_date":1486797449},{"owner":{"profile_image":"https://lh3.googleusercontent.com/a-/AOh14GhcB5E9arpBcV39Zyl4FU_UFh5TA7GxnorIOzrh=k-s256","account_id":20604629,"user_type":"registered","user_id":15125159,"link":"https://stackoverflow.com/users/15125159/evelknet","reputation":17,"display_name":"Evelknet"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67443592/recieve-data-from-esp32-socket-server-with-android","last_activity_date":1620445769,"creation_date":1620441650,"answer_count":1,"title":"Recieve Data from ESP32 Socket Server with Android","body":"<p>I'm trying to recieve data from my ESP32 with an Android App. Sending data from my phone isn't a problem. I just don't get anything. It doesn't show an exception and also not a msg.\nMy code so far:</p>\n<pre><code>//In the onCreate method:\nConnection connection = new Connection();\nconnection.execute();\n\n//The Connection:\nclass Connection extends AsyncTask&lt;Void,Void,Void&gt; {\n        String msg;\n\n        @Override\n        protected Void doInBackground(Void...params){\n            try{\n                client = new Socket(&quot;ESP32-1&quot;,80);\n                input = new BufferedReader(new InputStreamReader(client.getInputStream()));\n                System.out.println(input.readLine());\n            }catch (UnknownHostException e){\n                e.printStackTrace();\n            }catch (IOException e){\n                e.printStackTrace();\n            }\n\n            while (true) {\n                try {\n                    msg=input.readLine();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                System.out.println(msg);\n            }\n        }\n    }\n</code></pre>\n<p>Permissions:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n<p>ESP32(in Arduino IDE):</p>\n<pre><code>#include &lt;WiFi.h&gt;\n\nconst char* ssid=&quot;Jack-2.4&quot;;\nconst char* password=&quot;QayWsxEdcRfv123456#&quot;; \n\nWiFiServer server(80);\n\nvoid setup() {\n  \n  //Server\n  Serial.begin(115200);\n  Serial.println(&quot;start&quot;);\n  \n  delay(1000);\n \n  WiFi.begin(ssid, password);\n \n  while (WiFi.status() != WL_CONNECTED) {\n    delay(1000);\n    Serial.println(&quot;Connecting to WiFi..&quot;);\n  }\n \n  Serial.println(&quot;Connected to the WiFi network&quot;);\n  Serial.println(WiFi.localIP());\n \n  server.begin();\n}\n\nvoid loop() {\n  WiFiClient client = server.available();\n \n  if (client) {\n    Serial.println(&quot;Client connected&quot;);\n \n    while (client.connected()) {\n      client.write('A');\n      delay(500);\n    }\n  }\n}\n</code></pre>\n<p>I checked the ESP32 Code if it writes and it does send the messages.\nIs there anything i missed?</p>\n","question_id":67443592,"tags":["java","c++","sockets","esp32"],"score":0,"accepted_answer_id":67443905,"is_answered":true,"view_count":1569},{"owner":{"profile_image":"https://www.gravatar.com/avatar/5984a73c88b026220197d60788d440dd?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":16723196,"user_type":"registered","user_id":12087492,"link":"https://stackoverflow.com/users/12087492/ics","reputation":87,"display_name":"ICS"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67430428/problem-when-sending-messages-from-client-socket-to-server-socket","last_activity_date":1620385326,"creation_date":1620371350,"answer_count":2,"title":"Problem when sending messages from client socket to server socket","body":"<p>I'm new to socket. I want to make a client-server program but I have a problem when it comes to printing messages on the side of the server. That leads me to believe there is a problem in my Client class when it is sending the messages. The first message that is sent from client to server is delivered fine but the rest aren't printed even though the sequence number is printed.</p>\n<p>Here are both classes:</p>\n<p>Client class:</p>\n<pre><code>public class Cliente extends Conexion {\n    private String mensaje;\n    private String recibeTeclado;\n    int numSec = 0;\n    String tipo = &quot;0&quot;;\n    private int num;\n    int c;\n    \n    public Cliente() throws IOException{\n        super(&quot;cliente&quot;);\n    } \n    \n    public void startClient() {\n        try {\n            salidaServidor = new DataOutputStream(cs.getOutputStream());\n            \n            Scanner lee = new Scanner(System.in);\n            System.out.println(&quot;How many messages do you want to send?&quot;);\n            num = lee.nextInt();\n            salidaServidor.writeUTF(&quot;:&quot; + num + &quot;\\n&quot;); \n            for (int i = 1; i &lt;= num; i++) {\n                numSec++;\n                System.out.println(&quot;Enter the message: &quot;);\n                recibeTeclado = lee.next();\n                mensaje = tipo + &quot;:&quot; + Integer.toString(numSec) + &quot;:&quot; + recibeTeclado + &quot;\\n&quot;;\n                salidaServidor.writeUTF(mensaje);\n                salidaServidor.flush();\n                BufferedReader in = new BufferedReader (new InputStreamReader (cs.getInputStream()));\n                String mensajeDelServidor = in.readLine();\n                System.out.println(&quot;Status : &quot; + mensajeDelServidor);  \n            } \n            cs.close();\n        } catch (Exception e) {\n            System.out.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n<p>Server class:</p>\n<pre><code>public class Servidor extends Conexion{\n    String nuevo;\n    int numSec=0;\n    String tipo=&quot;1&quot;;\n    int num;\n    String [] n;\n    public Servidor() throws IOException{super(&quot;servidor&quot;);}\n    public void startServer() {\n        try {\n            System.out.println(&quot;Waiting...&quot;); \n            cs = ss.accept();\n            BufferedReader numString = new BufferedReader(new InputStreamReader(cs.getInputStream()));\n            n=numString.readLine().split(&quot;:&quot;);\n            num=Integer.parseInt(n[1]);\n            for(int i=1; i&lt;=num; i++) {\n\n                salidaCliente=new DataOutputStream(cs.getOutputStream());\n                numSec++;\n                System.out.println(numSec);\n                nuevo= tipo +&quot;:&quot;+ Integer.toString(numSec) +&quot;:&quot;+ &quot;Received\\n&quot;;\n                salidaCliente.writeUTF(nuevo);\n                salidaCliente.flush();\n                BufferedReader entrada = new BufferedReader(new InputStreamReader(cs.getInputStream()));\n                boolean band=false;\n                while((mensajeServidor=entrada.readLine())!=null &amp;&amp; !band) {\n                    String[] arrSplit = mensajeServidor.split(&quot;:&quot;);\n                    System.out.println(arrSplit[2]);\n                    band=true;\n                }\n            }\n\n            System.out.println(&quot;Fin de la conexión&quot;);\n\n            ss.close();\n            cs.close();\n        }catch (Exception e)\n        {\n            System.out.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n","question_id":67430428,"tags":["java","sockets","client-server"],"score":0,"accepted_answer_id":67432816,"is_answered":true,"view_count":356},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e61219168f3d7c64f526cbc394839d6e?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":15997673,"user_type":"registered","user_id":12683601,"link":"https://stackoverflow.com/users/12683601/joey","reputation":1,"display_name":"Joey"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67424168/client-server-communication-via-xml-java-tcp","last_activity_date":1620328448,"creation_date":1620326515,"answer_count":1,"title":"Client-Server communication via XML (Java, TCP)","body":"<p>i have written a client - server programm, where different clients and server communicate via request/reply using xml and tcp sockets. Later i want to add udp sockets. This is the current code:</p>\n<p>Client:</p>\n<pre><code>package network.client;\nimport java.io.BufferedReader;\nimport java.io.Closeable;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.OutputStream;\nimport java.net.Socket;\n\npublic class Client implements Closeable {\n    private Socket socket;\n\n    public Client(String host, int port) throws IOException {\n        this(new Socket(host, port));\n    }\n\n    public Client(Socket s) {\n        this.socket = s;\n    }\n\n    @Override\n    public void close() throws IOException {\n        this.socket.close();\n    }\n\n    public void send(String msg) throws IOException {\n\n        OutputStream out=this.socket.getOutputStream();\n        out.write(msg.getBytes());\n        out.flush();\n        socket.shutdownOutput();\n\n    }\n\n    public void recv() {\n        try {\n            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n\n            String request=&quot;&quot;;\n            String temp=in.readLine();\n            while(temp!=null) {\n               request+=temp;\n               temp=in.readLine();\n            }\n            socket.shutdownInput();\n            \n            System.out.println(&quot;Client: &quot; + request);\n            System.out.println(request.toString().length());\n        } catch (IOException ex) {\n            System.err.println(&quot;Error: Unable to read server response\\n\\t&quot; + ex);\n        }        \n    }\n\n    public static void main(String[] args) {\n        // Make sure command line arguments are valid\n        String ip=&quot;127.0.0.1&quot;;\n        int port=5000;\n\n        StringBuilder sb = new StringBuilder();\n       \n        sb.append(&quot;stuff&quot;);\n        System.out.println(sb.toString().length());\n        try (Client c = new Client(ip, port)) {\n            c.send(sb.toString());\n            c.recv();\n            c.close();\n            \n        } catch (IOException ex) {\n            System.err.println(&quot;Error: &quot; + ex);\n        }\n    }\n}\n</code></pre>\n<p>Server:</p>\n<pre><code>package network.server;\n\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.net.ServerSocket;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class Server {\n\n    private static ServerSocket serversocket;\n    private static ExecutorService threadpool;\n    private String ip;\n    private int port;\n\n    public static void main(final String[] args) {\n\n        Server2 server;\n        String ip = &quot;127.0.0.1&quot;;\n        int port = 5000;\n\n        try {\n            server = new Server(ip, port);\n            \n            while (true) {\n                Runnable requestHandler = null;\n                try {\n                    requestHandler = new TCPRequestHandler(serversocket.accept());\n\n                } catch (IOException io) {\n                    System.out.println(&quot;Accepting client connection failed&quot;);\n                    io.printStackTrace();\n                }\n                threadpool.submit(requestHandler);\n            }\n            \n        } catch (IOException io) {\n            System.out.println(io.getMessage());\n            io.printStackTrace();\n        }\n        System.out.println(&quot;end&quot;);\n\n    }\n\n    public Server(String ip, int port) throws IOException {\n        this.ip = ip;\n        this.port = port;\n        try {\n            this.serversocket = new ServerSocket();\n            serversocket.bind(new InetSocketAddress(ip, port));\n        } catch (IOException io) {\n            throw new IOException(&quot;Creating the ServerSocket failed&quot;);\n        }\n        \n        System.out.println(&quot;Binding the server succeeded&quot;);\n\n        this.threadpool = Executors.newCachedThreadPool();\n    }\n}\n</code></pre>\n<p>RequestHandler:</p>\n<pre><code>public class TCPRequestHandler extends Thread{\n    private Socket clientSocket=null;\n    \n    public TCPRequestHandler(Socket clientSocket) {\n        this.clientSocket=clientSocket;\n    }       \n    \n    public void run(){\n        System.out.println(&quot;Accepted client connection (&quot; + clientSocket.getInetAddress().getHostAddress() + &quot;, &quot; + clientSocket.getPort() + &quot;)&quot;);\n        byte[] buffer = new byte[1024];\n        int count;\n            try {\n                BufferedReader in =new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));\n                OutputStream out = clientSocket.getOutputStream();\n                \n                String request=&quot;&quot;;\n                String temp=in.readLine();\n                while(temp!=null) {\n                   request+=temp;\n                   temp=in.readLine();\n                }\n                System.out.println(&quot;Server:&quot; + request);\n                System.out.println(request.toString().length());\n                // do stuff with xml request\n               \n                out.write(request.getBytes());\n                out.flush();\n                \n                clientSocket.shutdownInput();\n                clientSocket.shutdownOutput();\n            } catch (IOException io) {\n                System.err.println(&quot;IO initialization failed&quot;);\n            }\n    }\n}\n</code></pre>\n<p>XML Request:</p>\n<pre><code>&lt;Request&gt;\n  &lt;Info Attribute1=&quot;&quot; Attribute2=&quot;&quot;&gt;&lt;/Info&gt;\n  &lt;Info Attribute1=&quot;&quot; Attribute2=&quot;&quot;&gt;&lt;/Info&gt;\n&lt;/Request&gt;\n</code></pre>\n<p>XML Reply (the overhead sending back the attributes will be necessary for the client, so i have to send it twice):</p>\n<pre><code>&lt;Reply&gt;\n  &lt;Info Attribute1=&quot;&quot; Attribute2=&quot;&quot;&gt;GoodReply&lt;/Info&gt;\n  &lt;Info Attribute1=&quot;&quot; Attribute2=&quot;&quot;&gt;GoodReply&lt;/Info&gt;\n&lt;/Reply&gt;\n</code></pre>\n<p>My question is 2-folded:</p>\n<p>1.) Maybe I did something unusual at the client-server programming (forgetting to close something, unusual stream reading/handling). Reading every line of the client/server message seems to be e.g. weird for me, because i'd rather read the xml message until it is finished independently of its line). Feel free to provide me &quot;good coding style&quot; advice :-)</p>\n<p>2.) At the moment i would assemble the XML by a StringBuilder and send just the bytes of the whole String and without special characters like \\r \\n. I'm not sure how to do it with a common api like Stax (this seemed to be complicated). Parsing the Attributes and their content will be necessary for the application. Is there an easier/more common way to solve this?\nIf not: how to do it with e.g Stax?</p>\n","question_id":67424168,"tags":["java","xml","sockets","tcp"],"score":0,"is_answered":false,"view_count":688,"last_edit_date":1620327802},{"owner":{"profile_image":"https://www.gravatar.com/avatar/99e4455de7e6c479c7da3278107c2ad3?s=256&d=identicon&r=PG","account_id":265739,"user_type":"registered","user_id":552914,"link":"https://stackoverflow.com/users/552914/john-c","reputation":1795,"display_name":"John C","accept_rate":97},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/15464963/oracle-11g-connection-reset-error","last_activity_date":1620251281,"creation_date":1363547169,"answer_count":6,"title":"Oracle 11g connection reset error","body":"<p>Am seeing the below error while trying to connect to Oracle 11g on Red Hat Linux, 64-bit using thin jdbc drivers. Would highly appreciate if anyone can throw more light on how to go about troubleshooting this.       </p>\n\n<pre><code> Caused by: java.net.SocketException: Connection reset\n    at java.net.SocketOutputStream.socketWrite(SocketOutputStream.java:113)\n    at java.net.SocketOutputStream.write(SocketOutputStream.java:153)\n    at oracle.net.ns.DataPacket.send(DataPacket.java:199)\n    at oracle.net.ns.NetOutputStream.flush(NetOutputStream.java:211)\n    at oracle.net.ns.NetInputStream.getNextPacket(NetInputStream.java:227)\n    at oracle.net.ns.NetInputStream.read(NetInputStream.java:175)\n    at oracle.net.ns.NetInputStream.read(NetInputStream.java:100)\n    at oracle.net.ns.NetInputStream.read(NetInputStream.java:85)\n    at oracle.jdbc.driver.T4CSocketInputStreamWrapper.readNextPacket(T4CSocketInputStreamWrapper.java:123)\n    at oracle.jdbc.driver.T4CSocketInputStreamWrapper.read(T4CSocketInputStreamWrapper.java:79)\n    at oracle.jdbc.driver.T4CMAREngine.unmarshalUB1(T4CMAREngine.java:1122)\n    at oracle.jdbc.driver.T4CMAREngine.unmarshalSB1(T4CMAREngine.java:1099)\n    at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:288)\n    at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:191)\n    at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:366)\n    at oracle.jdbc.driver.T4CTTIoauthenticate.doOAUTH(T4CTTIoauthenticate.java:752)\n    at oracle.jdbc.driver.T4CConnection.logon(T4CConnection.java:366)\n</code></pre>\n","question_id":15464963,"tags":["java","sockets","networking","jdbc","oracle11g"],"score":11,"accepted_answer_id":15465357,"is_answered":true,"view_count":69965,"last_edit_date":1363548346},{"owner":{"profile_image":"https://www.gravatar.com/avatar/80ffc8f4c72331e9d7cd92bb2e1ab278?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":4870053,"user_type":"registered","user_id":3926894,"link":"https://stackoverflow.com/users/3926894/bob","reputation":91,"display_name":"Bob","accept_rate":20},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/27305164/java-socket-bufferedreader-read-not-reading","last_activity_date":1620235538,"creation_date":1417731272,"answer_count":4,"title":"Java socket BufferedReader read not reading","body":"<p>Im trying to make a client/server socket connection via BufferedReader and Buffered Writer, but reader not reading anything it is just hanged, where client send and flush properly.\nServer does not throw any exception as if client not sending anything to server.</p>\n\n<p>My head is going go explode... </p>\n\n<p>Im using same for both client and server:</p>\n\n<pre><code>in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\nout = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));\n</code></pre>\n\n<p>Here is the code of server:</p>\n\n<pre><code>//inside of try catch\nwhile(true){\n          while(!in.ready())// just to debug\n            System.out.println(\"READY: \" + in.ready()); //just to debug\n          System.out.println(\"READY: OK\"); //just to debug\n            msg = receive().toString(); //hangs here...\n            System.out.println(\"KEYIS: \" + msg);\n           ///some stuff to do ....\n\npublic StringBuilder receive() throws IOException {\n    StringBuilder str = new StringBuilder();\n    int tmp;\n    while(true){\n        tmp = in.read();\n        if(tmp == 0)\n            break;\n        else if(tmp == -1)\n            throw new IOException();\n        str.append((char)tmp);\n    }\n    return str;\n}\n</code></pre>\n\n<p>Client code: not hanging here</p>\n\n<pre><code> //inside of try catch\n         send(KEY); //sended properly, no exception\n         while(true){\n             send(KEY); // sended properly, no exception\n             System.out.println(\"sent\");\n             //System.out.println(receive().toString());\n         }\n\npublic void send(String str) throws IOException{\n    out.write(str + \"\\n\"); //\n    //out.newLine(); //tried too, not helped\n    out.flush(); //push message to server\n}\n</code></pre>\n","question_id":27305164,"tags":["java","sockets"],"score":3,"is_answered":true,"view_count":2236},{"owner":{"profile_image":"https://i.stack.imgur.com/1UDzF.jpg?s=256&g=1","account_id":9195237,"user_type":"registered","user_id":8263136,"link":"https://stackoverflow.com/users/8263136/arashdeep-singh","reputation":310,"display_name":"Arashdeep Singh"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67399176/unwanted-characters-in-input-stream-of-java-socket","last_activity_date":1620232761,"creation_date":1620209117,"answer_count":1,"title":"Unwanted characters in input stream of java socket","body":"<pre><code>HTTP/1.1 200 OK\nServer: Apache-Coyote/1.1\nContent-Type: text/xml;charset=ISO-8859-1\nTransfer-Encoding: chunked\nDate: Thu, 16 Jul 2015 18:46:37 GMT\nConnection: close\n\nbc  // Unwanted  \n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;Request type=&quot;POST&quot;&gt;\n    &lt;FirstName&gt;Aditya&lt;/FirstName&gt;\n    &lt;MiddleName&gt;Rameshwarpratap&lt;/MiddleName&gt;\n    &lt;LastName&gt;Singh&lt;/LastName&gt;\n&lt;/Request&gt;\n0  // Unwanted\n</code></pre>\n<p>how do I remove those unwanted chunk length at start and end of response in Java Socket input stream\nRight now I am reading input stream like this.</p>\n<pre><code>    StringBuffer sb = new StringBuffer();\n    DataInputStream din = new DataInputStream(is);\n    int i;\n    while ((i = din.read()) != -1) {\n        char c = (char) i;\n        sb.append(c);\n    }\n    return sb.toString();\n</code></pre>\n","question_id":67399176,"tags":["java","sockets","http"],"score":0,"is_answered":true,"view_count":101,"last_edit_date":1620225531},{"owner":{"profile_image":"https://i.stack.imgur.com/6rmhM.jpg?s=256&g=1","account_id":4641056,"user_type":"registered","user_id":3760899,"link":"https://stackoverflow.com/users/3760899/aditya-singh","reputation":2363,"display_name":"Aditya Singh","accept_rate":52},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/31462367/unwanted-characters-sent-while-sending-xml-data-via-java-servlets","last_activity_date":1620195618,"creation_date":1437073071,"answer_count":1,"title":"Unwanted characters sent while sending XML data via Java Servlets","body":"<p>I have been developing a Java web app that simply takes <code>first_name</code>, <code>middle_name</code> and <code>last_name</code> parameters via an <code>HTML</code> form and then embeds that data into an XML file and responds back to the client.  </p>\n\n<p>I set the <code>Content-Type: text/xml</code>.  </p>\n\n<p>Here is my servlet code:  </p>\n\n<pre><code>package com.adi.request.xml;\n\nimport java.io.*;\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServlet;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\npublic class RequestToXMLServlet extends HttpServlet {\n\n    private String lastName;\n    private String firstName;\n    private String middleName;\n\n    /* Request Handling... */\n\n    @Override\n    public void doGet(HttpServletRequest request, HttpServletResponse response) {\n\n        setName(request);  // Initialising the firstName, middleName and lastName\n        String xmlDoc = getXML();  // Build and recieve the XML output\n\n        response.setContentType(\"text/xml\");  // TO BE NOTED...\n\n        try(PrintWriter writer = response.getWriter()) {\n\n            writer.print(xmlDoc);  // Printing the XML output\n            writer.flush();\n        } catch(IOException e) {\n\n            e.printStackTrace();\n        }\n    }   \n\n\n    // Setting the firstName, middleName and lastName\n    private void setName(HttpServletRequest request) {\n\n        firstName = request.getParameter(\"first_name\");\n        lastName = request.getParameter(\"last_name\");\n        middleName = request.getParameter(\"middle_name\");\n    }\n\n    // Building the XML output\n    private String getXML() {\n        // The append() methods just adds a \\r\\n at the end of every line.\n        String xmlDoc = append(\"&lt;?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?&gt;\")+\n                        append(\"&lt;Request&gt;\")+\n                        append(\"    &lt;FirstName&gt;\"+firstName+\"&lt;/FirstName&gt;\")+\n                        append(\"    &lt;MiddleName&gt;\"+middleName+\"&lt;/MiddleName&gt;\")+\n                        append(\"    &lt;LastName&gt;\"+lastName+\"&lt;/LastName&gt;\")+\n                        append(\"&lt;/Request&gt;\");\n\n        return xmlDoc;              \n    }\n\n    private String append(String str) {\n\n        return str + \"\\r\\n\";\n    }\n}  \n</code></pre>\n\n<p>The HTML form:  </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\r\n&lt;html&gt;\t\r\n&lt;head&gt;\r\n\t&lt;title&gt;Request to XML - Servlet&lt;/title&gt;\r\n&lt;/head&gt;\r\n\r\n&lt;body&gt;\r\n\t\t&lt;form method=\"GET\" action=\"Request.do\"&gt;\r\n\t\t\t&lt;label for=\"first_name\"&gt;Firstname:&lt;/label&gt;\r\n\t\t\t&lt;input type=\"text\" name=\"first_name\" id=\"first_name\" /&gt;\r\n\t\t\t\r\n\t\t\t&lt;br&gt;\r\n\t\t\t\r\n\t\t\t&lt;label for=\"middle_name\"&gt;Middlename&lt;/Label&gt;\r\n\t\t\t&lt;input type=\"text\" name=\"middle_name\" id=\"middle_name\" /&gt;\r\n\t\t\t\r\n\t\t\t&lt;br&gt;\r\n\t\t\t\r\n\t\t\t&lt;label for=\"last_name\"&gt;Lastname&lt;/Label&gt;\r\n\t\t\t&lt;input type=\"text\" name=\"last_name\" id=\"last_name\" /&gt;\r\n\t\t\t\r\n\t\t\t&lt;br&gt;\r\n\t\t\t\r\n\t\t\t&lt;input type=\"submit\" name=\"submit\" value=\"GET\" /&gt;\r\n\t\t&lt;/form&gt;\r\n\t&lt;/body&gt;\r\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This works fine and my browser properly displays the <code>XML</code> formatted data.  </p>\n\n<h1>The problem is that</h1>  \n\n<p>I wrote a small <code>jython</code> app that makes an <code>HTTP POST</code> request using raw sockets to the above written <code>Java Servlet</code>. Though it recieves proper XML formatted data, it also recieves unwanted characters at the begenning and end of the actual required XML data.  </p>\n\n<p>Here is my <code>jython</code> code:  </p>\n\n<pre><code>from java.io import *\nfrom java.net import *\nfrom java.util import *\n\nsock = Socket(\"localhost\", 8080)\n\nostream = sock.getOutputStream()\nwriter = PrintWriter(ostream)\n\nparams=\"first_name=Aditya&amp;middle_name=Rameshwarpratap&amp;last_name=Singh\"\n\nwriter.print(\"GET /RequestToXML/Request.do?\"+params+\" HTTP/1.1\\r\\n\")\nwriter.print(\"Host: localhost:8080\\r\\n\")\nwriter.print(\"Connection: Close\\r\\n\")\nwriter.print(\"\\r\\n\")\nwriter.flush()\n\nistream = sock.getInputStream()\nscanner = Scanner(istream)\n\nwhile(scanner.hasNextLine()):\n    print(scanner.nextLine())\n\nistream.close()\nostream.close()\nscanner.close()\nwriter.close()\nsock.close()  \n</code></pre>\n\n<p>The output of this code is:  </p>\n\n<pre><code>HTTP/1.1 200 OK\nServer: Apache-Coyote/1.1\nContent-Type: text/xml;charset=ISO-8859-1\nTransfer-Encoding: chunked\nDate: Thu, 16 Jul 2015 18:46:37 GMT\nConnection: close\n\nbc  // What is this?    \n&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;Request type=\"POST\"&gt;\n    &lt;FirstName&gt;Aditya&lt;/FirstName&gt;\n    &lt;MiddleName&gt;Rameshwarpratap&lt;/MiddleName&gt;\n    &lt;LastName&gt;Singh&lt;/LastName&gt;\n&lt;/Request&gt;\n\n0  // And this?\n</code></pre>\n\n<p>So my questions are:  </p>\n\n<ol>\n<li><p>What are those characters and why are they even sent when the content type is <code>text/xml</code>?  </p></li>\n<li><p>This is irrelevant, but still, in my jython code, I've closed all the streams and socket at the end of the code. Is it necessary to close all of them or a few of them would do the cleanup job?         </p></li>\n</ol>\n","question_id":31462367,"tags":["java","xml","sockets","servlets","jython"],"score":4,"accepted_answer_id":31462850,"is_answered":true,"view_count":638},{"owner":{"profile_image":"https://www.gravatar.com/avatar/9e13a193ecb192b7b56f69733832df07?s=256&d=identicon&r=PG","account_id":17110474,"user_type":"registered","user_id":12381427,"link":"https://stackoverflow.com/users/12381427/almaz-akylbekov","reputation":87,"display_name":"Almaz Akylbekov"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67387024/java-inputdatastream-shows-nothing","last_activity_date":1620139830,"creation_date":1620139507,"answer_count":1,"title":"Java InputDataStream shows nothing","body":"<p>Hello StackOverflow Community! Right now I'm working on 2D multiplayer racing game. The issue I faced up with, is that client sends car details to the server, and server reads them successfully and attempts to send them back BUT client can't read it. Besides it seems that client event doesn't lacuna run() with DataInputStream. Can anybody give me a piece of advise of something?</p>\n<p>Client Code:</p>\n<pre><code>private Socket socket;\nprivate int playerID;\n\nprivate ReadFromServer rfsRunnable;\nprivate WriteToServer wtsRunnable;\n\nprivate void connectToServer(){\n    try{\n        socket = new Socket(&quot;localhost&quot;,5000);\n        DataInputStream in = new DataInputStream(socket.getInputStream());\n        DataOutputStream out = new DataOutputStream(socket.getOutputStream());\n        playerID = in.readInt();\n        System.out.println(&quot;You are Player#&quot; + playerID);\n\n        if (playerID==1){\n            System.out.println(&quot;Waiting for Player #2 to connect&quot;);\n        }\n\n        rfsRunnable = new ReadFromServer(in);\n        wtsRunnable = new WriteToServer(out);\n\n        rfsRunnable.waitForStartMessage();\n    }catch (IOException ex){\n        System.out.println(&quot;IOException from connect to server&quot;);\n    }\n}\n\n\n\nprivate class ReadFromServer implements Runnable{\n\n    private DataInputStream dataIn;\n\n    public ReadFromServer(DataInputStream in){\n        dataIn = in;\n        System.out.println(&quot;Read from server runnable&quot;);\n    }\n\n    public void run(){\n        try{\n            while (true){\n                if (foreignKart != null){\n                    foreignKart.locationX=dataIn.readInt();\n                    foreignKart.locationY=dataIn.readInt();\n                    foreignKart.speed = dataIn.readInt();\n                    foreignKart.currentImage = dataIn.readInt();\n                    foreignKart.ready = dataIn.readBoolean();\n\n                    System.out.println(&quot;test&quot;);\n                }\n            }\n        }catch (IOException ex){\n            System.out.println(&quot;IOException from RFS run&quot;);\n        }\n    }\n\n    public void waitForStartMessage(){\n        try{\n            String startMessage = dataIn.readUTF();\n            System.out.println(&quot;Message form server&quot; + startMessage);\n\n            Thread readThread = new Thread(rfsRunnable);\n            Thread writeThread = new Thread(wtsRunnable);\n\n            readThread.start();\n            writeThread.start();\n        }catch (IOException ex){\n            System.out.println(&quot;IOException form waiting message&quot;);\n        }\n    }\n\n}\n\nprivate class WriteToServer implements Runnable{\n\n    private DataOutputStream dataOut;\n\n    public WriteToServer(DataOutputStream out){\n        dataOut = out;\n        System.out.println(&quot;Write to server runnable&quot;);\n    }\n\n    public void run(){\n        try{\n\n            while (true){\n                if (homeKart != null) {\n                    dataOut.writeInt(homeKart.locationX);\n                    dataOut.writeInt(homeKart.locationY);\n                    dataOut.writeInt(homeKart.speed);\n                    dataOut.writeInt(homeKart.currentImage);\n                    dataOut.writeBoolean(homeKart.ready);\n                    dataOut.flush();\n                }\n\n                try{\n                    Thread.sleep(25);\n                }catch(InterruptedException ex){\n                    System.out.println(&quot;Interrupted exception from WTS run&quot;);\n                }\n            }\n\n        } catch (IOException ex){\n            System.out.println(&quot;IOException from WTS run&quot;);\n        }\n    }\n\n}\n</code></pre>\n<p>and Server Code:</p>\n<pre><code>import java.io.*;\nimport java.net.*;\n\npublic class RaceServer {\n\nprivate ServerSocket ss;\nprivate int numberPlayers;\nprivate int maxPlayers;\n\nprivate Socket p1Socket;\nprivate Socket p2Socket;\n\nprivate ReadFromClient p1ReadRunnable;\nprivate ReadFromClient p2ReadRunnable;\n\nprivate WriteToClient p1WriteRunnable;\nprivate WriteToClient p2WriteRunnable;\n\nprivate int pl1X, pl1Y, pl1speed, pl1currentImage;\nprivate int pl2X, pl2Y, pl2speed, pl2currentImage;\n\nprivate boolean ready1, ready2;\n\npublic RaceServer() {\n\n    System.out.println(&quot;------RACE GAME SERVER-----&quot;);\n    numberPlayers = 0;\n    maxPlayers = 2;\n\n    pl1X = 425;\n    pl1Y = 550;\n    pl1speed = 0;\n    pl1currentImage = 12;\n    ready1 = false;\n\n    pl2X = 425;\n    pl2Y = 500;\n    pl2speed = 0;\n    pl2currentImage = 12;\n    ready2 = false;\n\n\n    try {\n        ss = new ServerSocket(5000);\n    } catch (IOException ex) {\n        System.out.println(&quot;IOException from Race Server Constructor&quot;);\n    }\n}\n\nprivate class ReadFromClient implements Runnable {\n\n    private int playerID;\n    private DataInputStream dataIn;\n\n    public ReadFromClient(int pid, DataInputStream in){\n        playerID = pid;\n        dataIn = in;\n\n        System.out.println(&quot;Read From Client&quot; + playerID + &quot; Runnable created&quot;);\n    }\n\n    public void run(){\n        try{\n            while(true){\n                if (playerID == 1){\n                    pl1X = dataIn.readInt();\n                    pl1Y = dataIn.readInt();\n                    pl1speed = dataIn.readInt();\n                    pl1currentImage = dataIn.readInt();\n                    ready1 = dataIn.readBoolean();\n                } else {\n                    pl2X = dataIn.readInt();\n                    pl2Y = dataIn.readInt();\n                    pl2speed = dataIn.readInt();\n                    pl2currentImage = dataIn.readInt();\n                    ready2 = dataIn.readBoolean();\n                }\n\n                System.out.println(&quot;Player 1,IN X: &quot;+pl1X);\n                System.out.println(&quot;Player 2,IN X: &quot;+pl2X);\n            }\n        }catch (IOException ex){\n            System.out.println(&quot;Exception from RFC run&quot;);\n        }\n    }\n}\n\nprivate class WriteToClient implements Runnable {\n\n    private int playerID;\n    private DataOutputStream dataOut;\n\n    public WriteToClient(int pid, DataOutputStream out){\n        playerID = pid;\n        dataOut = out;\n\n        System.out.println(&quot;Write to client &quot; + playerID + &quot; Runnable created&quot;);\n    }\n\n    public void run(){\n        try{\n            while(true){\n                if (playerID == 1){\n                    dataOut.writeInt(pl2X);\n                    dataOut.writeInt(pl2Y);\n                    dataOut.writeInt(pl2speed);\n                    dataOut.writeInt(pl2currentImage);\n                    dataOut.writeBoolean(ready2);\n                } else {\n                    dataOut.writeInt(pl1X);\n                    dataOut.writeInt(pl1Y);\n                    dataOut.writeInt(pl1speed);\n                    dataOut.writeInt(pl1currentImage);\n                    dataOut.writeBoolean(ready1);\n                }\n                dataOut.flush();\n                try {\n                    Thread.sleep(25);\n                } catch (InterruptedException ex){\n                    System.out.println(&quot;InterruptedException from WTC run&quot;);\n                }\n\n\n                System.out.println(&quot;Player 1, OUT X: &quot;+pl1X);\n                System.out.println(&quot;Player 2, OUT X: &quot;+pl2X);\n            }\n\n        }catch (IOException ex){\n            System.out.println(&quot;IOException from WTC run&quot;);\n        }\n    }\n\n    public void sendStartMessage(){\n        try{\n            dataOut.writeUTF(&quot;We now have two players&quot;);\n        }catch (IOException ex){\n            System.out.println(&quot;IOException from sendStartMessage&quot;);\n        }\n    }\n\n}\n\npublic void acceptConnections(){\n    try{\n        System.out.println(&quot;Waiting for connections&quot;);\n\n        while (numberPlayers &lt; maxPlayers){\n            Socket s = ss.accept();\n            DataInputStream in = new DataInputStream(s.getInputStream());\n            DataOutputStream out = new DataOutputStream(s.getOutputStream());\n\n            numberPlayers++;\n            out.writeInt(numberPlayers);\n            System.out.println(&quot;Player #&quot; + numberPlayers + &quot; has connected&quot;);\n\n            ReadFromClient rfc = new ReadFromClient(numberPlayers, in);\n            WriteToClient wtc = new WriteToClient(numberPlayers, out);\n\n            if (numberPlayers == 1){\n                 p1Socket = s;\n                 p1ReadRunnable = rfc;\n                 p1WriteRunnable = wtc;\n            }  else {\n                p2Socket = s;\n                p2ReadRunnable = rfc;\n                p2WriteRunnable = wtc;\n                p1WriteRunnable.sendStartMessage();\n                p2WriteRunnable.sendStartMessage();\n\n                Thread readThread1 = new Thread(p1ReadRunnable);\n                Thread readThread2 = new Thread(p2ReadRunnable);\n                readThread1.start();\n                readThread2.start();\n\n                Thread writeThread1 = new Thread(p1WriteRunnable);\n                Thread writeThread2 = new Thread(p2WriteRunnable);\n                writeThread1.start();\n                writeThread2.start();\n            }\n        }\n\n        System.out.println(&quot;No longer accepting connections&quot;);\n\n    }catch (IOException ex){\n        System.out.println(&quot;IOException from Accept Connections&quot;);\n    }\n}\n\npublic static void main(String[] args){\n    RaceServer rs = new RaceServer();\n    rs.acceptConnections();\n}\n</code></pre>\n<p>}</p>\n","question_id":67387024,"tags":["java","sockets","client","datainputstream"],"score":0,"accepted_answer_id":67387118,"is_answered":true,"view_count":27},{"owner":{"profile_image":"https://i.stack.imgur.com/PTP1j.jpg?s=256&g=1","account_id":6683530,"user_type":"registered","user_id":5155761,"link":"https://stackoverflow.com/users/5155761/vishal-sharma","reputation":13,"display_name":"vishal sharma"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/45792767/regarding-video-and-audio-stream-over-socket-io-from-android-camera-live","last_activity_date":1620137641,"creation_date":1503305076,"answer_count":1,"title":"Regarding video and audio stream over socket.io from android camera live","body":"<p>I want to stream real time video from android camera to device via socket.io, But i am not able to send audio </p>\n\n<p>As i am using surfaceview to create camra view </p>\n\n<p>On Camera preview i am getting video bytes</p>\n\n<p>But bytes not contain any Audio, it just contain video frame </p>\n\n<p><strong>Help me how can i merge video and audio at same time to byte array and send to the other device, while recording and on other side how i can decode</strong></p>\n\n<p>Code i am using is like this </p>\n\n<pre><code> mCamera.setPreviewCallbackWithBuffer(new Camera.PreviewCallback() {\n\n            private long timestamp = 0;\n\n            public synchronized void onPreviewFrame(byte[] data, Camera camera) {\n\n                int size = data.length;\n                Camera.Size previewSize = camera.getParameters().getPreviewSize();\n                YuvImage yuvimage = new YuvImage(data, ImageFormat.NV21, previewSize.width, previewSize.height, null);\n                ByteArrayOutputStream baos = new ByteArrayOutputStream();\n                yuvimage.compressToJpeg(new Rect(0, 0, previewSize.width, previewSize.height), 80, baos);\n//                yuvimage.compressToJpeg(new Rect(0, 0, 128, 96), 80, baos);\n                byte[] jdata = baos.toByteArray();\n//                int sizeOfData = jdata.length;\n\n                DatagramSocket s;\n                try {\n                    s = new DatagramSocket();\n                    s.setBroadcast(true);\n                    s.setSoTimeout(TIMEOUT_MS);\n                    InetAddress local = InetAddress.getByName(IPAdresse.getText().toString());\n\n                    DatagramPacket p = new DatagramPacket(jdata, jdata.length, local, server_port);\n                    s.send(p);\n\n                } catch (SocketException e) {\n                    e.printStackTrace();\n                } catch (UnknownHostException e) {\n                    e.printStackTrace();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n\n//                // Convert to Bitmap\n                Bitmap bmp = BitmapFactory.decodeByteArray(jdata, 0, jdata.length);\n                m_VideCaptureBitmap.setImageBitmap(bmp);\n\n                Log.v(\"CameraTest\", \"Frame size = \" + data.length);\n                timestamp = System.currentTimeMillis();\n                try {\n                    camera.addCallbackBuffer(data);\n                } catch (Exception e) {\n                    Log.e(\"CameraTest\", \"addCallbackBuffer error\");\n                    return;\n                }\n                return;\n            }\n        });\n\n        try {\n            mCamera.startPreview();\n        } catch (Throwable e) {\n            mCamera.release();\n            mCamera = null;\n            e.printStackTrace();\n            return;\n        }\n</code></pre>\n","question_id":45792767,"tags":["java","android","sockets"],"score":0,"is_answered":true,"view_count":2184},{"owner":{"profile_image":"https://graph.facebook.com/100001309135590/picture?type=large","account_id":3782041,"user_type":"registered","user_id":3141191,"link":"https://stackoverflow.com/users/3141191/user3141191","reputation":301,"display_name":"user3141191"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/23903608/dynamically-set-setenabledprotocols-other-than-sslsocket-setenabledprotocols","last_activity_date":1620130224,"creation_date":1401255803,"answer_count":2,"title":"Dynamically set setEnabledProtocols other than SSLSocket.setEnabledProtocols","body":"<p>Hi do any one having idea about setting setEnabledProtocols other than java code</p>\n\n<pre><code>SSLSocket.setEnabledProtocols(newProtocol);\n</code></pre>\n\n<p>Because in our web service code we couldn't find any socket connection.</p>\n\n<p>Thanks in advance. Appreciate your help if you guide me in setting dynamic UNIX java command.</p>\n","question_id":23903608,"tags":["java","web-services","sockets","ssl","encryption"],"score":0,"is_answered":false,"view_count":2221},{"owner":{"profile_image":"https://lh5.googleusercontent.com/-coChfxzkd8M/AAAAAAAAAAI/AAAAAAAAAA0/VDQj6NtvIUw/photo.jpg?sz=256","account_id":9283001,"user_type":"registered","user_id":6893709,"link":"https://stackoverflow.com/users/6893709/ali-bagheri","reputation":3219,"display_name":"Ali Bagheri","accept_rate":0},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63408396/java-my-thread-is-terminated-without-any-exception-or-throwable-why","last_activity_date":1597498843,"creation_date":1597390237,"answer_count":1,"title":"java, my thread is terminated without any exception or throwable, why?","body":"<p>I have a problem,my thread is terminated without any exception!!!</p>\n<p>I have a thread for accepting socket (nio, but blocking-mode).that is works well, if socket get receiving requests by slow speed,but when receiving a lot of requests at a time ,the thread stops.</p>\n<p>I changed a few options in linux, may be for this?</p>\n<p>part of my code:</p>\n<pre><code>while(!Thread.interrupted() &amp;&amp; !serverSocketChannel.socket().isClosed()){\n        try\n        {\n            SocketChannel socketChannel = serverSocketChannel.accept();\n\n            while (!socketChannel.finishConnect() &amp;&amp; check &lt; 50) {\n                try {\n                    Thread.sleep(20);\n                }\n                catch (InterruptedException ignored) {}\n                check += 1;\n            }\n            check = 0;\n\n            if(!socketChannel.finishConnect()){\n                socketChannel.close();\n                continue;\n            }\n\n            NioSocket socket = new NioSocket(server, socketChannel);\n\n            if(acceptedSocketQueue.offer(socket))\n                server.addSocket(socket);\n            else\n                socket.forceClose();\n        }\n        catch(Throwable e){\n            Logger.log(SocketAccepter.class, e,&quot;SocketAccepter, on accepting.&quot;);\n        }\n    }\n\nLogger.log(SocketAccepter.class,&quot;SocketAccepter ### interrupted.&quot;);\n// I do not get here\n</code></pre>\n<p>changed options:</p>\n<pre><code>echo fs.file-max=500000 &gt;&gt; /etc/sysctl.conf\necho fs.nr_open=500000 &gt;&gt; /etc/sysctl.conf\necho fs.aio-max-nr=300000 &gt;&gt; /etc/sysctl.conf\necho fs.aio-nr=50000 &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_mem=&quot;2048 51200 725376&quot; &gt;&gt; /etc/sysctl.conf\necho net.core.rmem_default=51200 &gt;&gt; /etc/sysctl.conf\necho net.core.rmem_max=725376 &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_rmem=&quot;2048 51200 725376&quot; &gt;&gt; /etc/sysctl.conf\necho net.core.wmem_default=51200 &gt;&gt; /etc/sysctl.conf\necho net.core.wmem_max=725376 &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_wmem=&quot;2048 51200 725376&quot; &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_syn_retries=4  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_synack_retries=2  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.ip_local_port_range=1024 65500  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_fin_timeout=20  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_keepalive_time=240  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_keepalive_probes=3  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_keepalive_intvl=30  &gt;&gt; /etc/sysctl.conf\necho net.core.somaxconn=5000  &gt;&gt; /etc/sysctl.conf\necho net.core.netdev_max_backlog=5000  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_max_syn_backlog=5000  &gt;&gt; /etc/sysctl.conf\necho net.core.rps_sock_flow_entries=32000  &gt;&gt; /etc/sysctl.conf\necho net.core.optmem_max=51100  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_rfc1337=1  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_max_orphans=2000  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_syncookies=0  &gt;&gt; /etc/sysctl.conf\necho net.ipv4.tcp_adv_win_scale=2  &gt;&gt; /etc/sysctl.conf\n</code></pre>\n<p>please help me if you know.</p>\n<hr />\n<p>Update:</p>\n<p>I added a <code>Thread.UncaughtExceptionHandler</code> to thread.\nthen I ran app by this command</p>\n<p><code>java - jar app.jar &amp;&gt;&gt; log.txt</code>\nand when thread stops I opened log file.</p>\n<p>in log file I saw below line</p>\n<pre><code>Exception: java.lang.NullPointerException thrown from the UncaughtExceptionHandler in thread &quot;NioServer Accepter&quot;\n</code></pre>\n<p>my new code was this</p>\n<pre><code>SocketChannel socketChannel = serverSocketChannel.accept();\n NioSocket socket = new NioSocket(server, socketChannel);\n acceptedSocketQueue.offer(socket);\n</code></pre>\n<p>I realized <code>serverSocketChannel.accept()</code> is causing this to happen, does anyone have a reason?</p>\n","question_id":63408396,"tags":["java","linux","multithreading","sockets","nio"],"score":0,"is_answered":false,"view_count":174,"last_edit_date":1597497894},{"owner":{"profile_image":"https://lh5.googleusercontent.com/-NJncVfsaQCs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reld1sGWhLAair9OMBFZIRvY2Bjqg/mo/photo.jpg?sz=256","account_id":15458616,"user_type":"registered","user_id":11151854,"link":"https://stackoverflow.com/users/11151854/divyansh-kumar","reputation":1,"display_name":"Divyansh Kumar"},"closed_date":1597469049,"link":"https://stackoverflow.com/questions/63378912/modify-code-to-send-multiple-files-over-socket","last_activity_date":1597466434,"creation_date":1597243213,"answer_count":0,"title":"modify code to send multiple files over socket","body":"<p>I am a beginner in android development i have a question on how can i modify my code to send <em><strong>multiple files over socket</strong></em>, With my current code i can only send one file at a time, I have an ArrayList which is obtained from other Activity which contains Full Path of the file to be send but when i add more than one file to array it wont send anything. It is disturbing me from a whole month\nAny help or suggestions will be really appreciated</p>\n<p>Here is my Sender's Code</p>\n<pre><code>@Override\npublic void run() {\n\nIntent intent = getIntent();\nBundle bundle = intent.getExtras();  //Receiving Intent from other Activity\nArrayList send = (ArrayList) bundle.getParcelableArrayList(&quot;send&quot;); //Full path of file in ArrayList\nArrayList name = (ArrayList) bundle.getParcelableArrayList(&quot;name&quot;); //Name of the file if Available \nString con = send.toString();\nString convert = con.replaceAll(&quot;\\\\[&quot;, &quot;&quot;).replaceAll(&quot;\\\\]&quot;,&quot;&quot;);\nfile = new File(convert);\n\nbyte[] bytes = new byte[(int) file.length()];\nBufferedInputStream bis;\ntry {\n   bis = new BufferedInputStream(new FileInputStream(file));\n   DataInputStream dis = new DataInputStream(bis);\n   OutputStream os = socket.getOutputStream();\n   DataOutputStream dos = new DataOutputStream(os);\n   if (name == null){\n      dos.writeUTF(file.getName());\n   }else {\n      String conname = name.toString();\n      String convertname = conname.replaceAll(&quot;\\\\[&quot;, &quot;&quot;).replaceAll(&quot;\\\\]&quot;,&quot;&quot;);\n      dos.writeUTF(convertname + &quot;.apk&quot;);\n  }\n\n  int read;\n  while ((read = dis.read(bytes)) != -1){\n        dos.write(bytes,0,read);\n  }\n\n  socket.close();\n}\n</code></pre>\n<p>Here is the receiver's</p>\n<pre><code>@Override\npublic void run() {\n\nSocket socket = null;\nint bytesRead;\nInputStream in;\nint bufferSize = 0;\n\ntry {\n    socket = new Socket(dstAddress, dstPort);\n    bufferSize = socket.getReceiveBufferSize();\n    in = socket.getInputStream();\n    DataInputStream clientData = new DataInputStream(in);\n    String fileName = clientData.readUTF();\n    File file = new File(Environment.getExternalStorageDirectory()  + fileName);  //Name and place of file to be save\n    OutputStream output = new FileOutputStream(file);\n    byte[] buffer = new byte[bufferSize];\n    int read;\n    while ((read = clientData.read(buffer)) != -1) {\n          output.write(buffer, 0, read);\n    }\n\n    socket.close();\n\n}\n\n</code></pre>\n<p>New Sender's code</p>\n<pre><code>\n            public void run() {\n\n            Intent intent = getIntent();\n            Bundle bundle = intent.getExtras();\n            ArrayList send = (ArrayList) bundle.getParcelableArrayList(&quot;send&quot;);\n            ArrayList name = (ArrayList) bundle.getParcelableArrayList(&quot;name&quot;);\n\n            BufferedInputStream bis;\n            byte[] bytes = new byte[8192];\n\n            try {\n                //bis = new BufferedInputStream(new FileInputStream(file));\n                OutputStream os = socket.getOutputStream();\n                DataOutputStream dos = new DataOutputStream(os);\n                for (int i =0; i&lt;send.size();i++){\n                    String filePath = send.get(i).toString();\n                    File file = new File(filePath);\n\n                    if (name!=null){ //check if name Array is empty or not\n                        dos.writeUTF(String.valueOf(name.get(i)));\n                    }else {\n                        dos.writeUTF(file.getName());\n                    }\n                    dos.writeInt(file.size());\n                };\n\n\n                FileInputStream fis = new FileInputStream(file);\n                DataInputStream dis = new DataInputStream(new BufferedInputStream(fis));\n\n                int read;\n                while ((read = dis.read(bytes)) != -1){\n                    dos.write(bytes,0,read);\n                }\n\n                fis.close();\n                dos.flush();\n                os.flush();\n                socket.close();\n\n\n</code></pre>\n<p>New Receiver's code</p>\n<pre><code>             try {\n                socket = new Socket(dstAddress, dstPort);\n                bufferSize = socket.getReceiveBufferSize();\n                in = socket.getInputStream();\n                DataInputStream clientData = new DataInputStream(in);\n\n                String fileName = clientData.readUTF();\n                int filelength = clientData.readInt();\n\n                File file = new File(Environment.getExternalStorageDirectory()  + fileName);  //Name and place of file to be save\n                OutputStream output = new FileOutputStream(file);\n\n                byte[] buffer = new byte[8192];\n                int read;\n\n                while ((read = clientData.read(buffer)) != -1) {\n                    output.write(buffer, 0, read);\n                }\n\n                socket.close();\n              }\n\n</code></pre>\n","question_id":63378912,"tags":["java","android","android-studio","sockets","multiple-file-upload"],"score":0,"closed_reason":"Duplicate","is_answered":false,"view_count":47,"last_edit_date":1597466434},{"owner":{"profile_image":"https://www.gravatar.com/avatar/c52a173b8977f7cd13a64f87e7851b17?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":7225798,"user_type":"registered","user_id":5514399,"link":"https://stackoverflow.com/users/5514399/felix-vaughan","reputation":87,"display_name":"Felix Vaughan"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63407986/server-and-client-program-stops-for-unknown-reason","last_activity_date":1597390231,"creation_date":1597388370,"answer_count":0,"title":"Server and client program stops for unknown reason","body":"<p>I'm trying to create a simple client/server program that takes client into the server and gives it back to the user then queries the user for another input. The problem is though, that for some reason the program keeps waiting after the first input and it doesn't even send the input to the server at that. Any help would be much appreciated.</p>\n<p>SERVER CODE</p>\n<pre><code>import java.util.*;\nimport java.io.*;\nimport java.net.*;\n\n\npublic class Server {\n    public static final String ENDLINE = &quot;\\r\\n&quot;;\n    public static void main(String[] args) throws Exception{\n        try(ServerSocket serverSocket = new ServerSocket(2000)){\n            System.out.println(&quot;Waiting for connection...&quot;);\n            Socket clientConnection = serverSocket.accept();\n            System.out.println(&quot;connection accepted from: &quot;+ clientConnection.getInetAddress().getHostAddress());\n            OutputStream clientOutputStream = clientConnection.getOutputStream();\n            InputStream clientInputStream = clientConnection.getInputStream();\n            String msg = String.format(&quot;Hello: %s tell me something: &quot;, clientConnection.getInetAddress().getHostAddress());\n            clientOutputStream.write(msg.getBytes());\n\n            while(true){\n                StringBuilder clientMessage = new StringBuilder();\n                int c = clientInputStream.read();\n                while(c != -1){\n                    clientMessage.append((char)c);\n                    c = clientInputStream.read();\n                }\n                String clientMessageString = String.valueOf(clientMessage);\n                String returnMsg = String.format(&quot;Okay got your message: %s, anything else? &quot;,clientMessageString);\n                clientOutputStream.flush();\n                if (clientMessageString.equals(&quot;quit&quot;)) break;\n            }clientConnection.close();\n        }catch(IOException e){ e.printStackTrace(); }\n    }\n}\n</code></pre>\n<p>CLIENT CODE</p>\n<pre><code>import java.io.*;\nimport java.util.*;\nimport java.net.*;\n\npublic class Client {\n    public static void main(String[] args) {\n        try(Socket clientSocket = new Socket(&quot;localhost&quot;,2000)){\n            InputStream inputFromServer = clientSocket.getInputStream();\n            Reader newRead = new InputStreamReader(inputFromServer);\n            OutputStream toServer = clientSocket.getOutputStream();\n            int c = newRead.read();\n            while(true) {\n                while (c != -1) {\n                    System.out.print((char) c);\n                    c = newRead.read();\n                }\n                Scanner keyboard = new Scanner(System.in);\n                System.out.println(&quot;&gt; &quot;);\n                String keyboardInput = keyboard.nextLine();\n                toServer.write(keyboardInput.getBytes());\n                toServer.flush();\n            }\n        }catch(IOException e){e.printStackTrace();}\n    }\n}\n</code></pre>\n","question_id":63407986,"tags":["java","sockets"],"score":0,"is_answered":false,"view_count":46},{"owner":{"profile_image":"https://www.gravatar.com/avatar/9f92f6dfd66f7493bbf099a36ebde45a?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":15452679,"user_type":"registered","user_id":11147643,"link":"https://stackoverflow.com/users/11147643/s-y-jin","reputation":1,"display_name":"S.Y.Jin"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63169189/unexpected-subcontract-and-stick-happened-in-tcp-socket-between-python-server","last_activity_date":1597388751,"creation_date":1596097777,"answer_count":1,"title":"Unexpected Subcontract and Stick happened in TCP Socket between Python (Server) and Java (Client)","body":"<p>When my colleague's Java(Client) TCP socket program send a package (500KB~1MB) to my Python(Server) TCP socket program, there are cases of subcontracting and sticking. I want to know, is there a universally valid solution to this situation? And what people usually do in this case?\nI think if it is possible to manually refresh the buffer zone requested by socket function recv(buffer_zone).If I can do that, the program will be free from sticking packages at least.</p>\n","question_id":63169189,"tags":["java","python","sockets","tcp"],"score":0,"accepted_answer_id":63408074,"is_answered":true,"view_count":53},{"owner":{"profile_image":"https://www.gravatar.com/avatar/d5df8e28621b50944be1b5e4e22cbf31?s=256&d=identicon&r=PG","account_id":923497,"user_type":"registered","user_id":954718,"link":"https://stackoverflow.com/users/954718/gelion","reputation":531,"display_name":"Gelion","accept_rate":72},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/34883310/java-socket-inputstream-read-not-behaving-as-expected","last_activity_date":1597351903,"creation_date":1453224614,"answer_count":1,"title":"Java socket InputStream.read() not behaving as expected","body":"<p>Ive read many tutorials and posts about the java InputStream and reading data. Ive established a client and server implementation but i'm having weird issues where reading a variable length \"payload\" from the client is not consistent.</p>\n\n<p>What im trying to do is to transfer up 100kB max in one single logical payload. Now i have verified that the TCP stack is not sending one mahousive 100kB packet from the client. I have played about with different read forms as per previous questions about the InputStream reading but ive nearly teared my hair out trying to get it to dump the correct data.</p>\n\n<p>Lets for example say the client is sending a 70k payload.</p>\n\n<p>Now the first observation i've noticed is that if I flow through the code line by line initiated from a break point, it will work fine, i get the exact same count in the outbound byte[]. When free running the byte[] will be different sizes every time i run the code with practically the same payload.</p>\n\n<p><strong>Timing problems?</strong></p>\n\n<p>second observation is that when the \"inbuffer\" size is set to 4096 for example this odd behaviour occurs. setting the \"inbuffer\" size to 1 presents the correct behaviour i.e. i get the correct payload size.</p>\n\n<p>please understand i dont like the way ive had to get this to work and im not happy with the solution.</p>\n\n<p>What experiences, problems have you had/seen respectively that might help me fix this code to be more reliable, easier to read.</p>\n\n<pre><code>    public void listenForResponses() {\n    isActive = true;\n    try {\n        // apprently read() doesnt return -1 on socket based streams\n        // if big stuff comes through, TCP packets are segmented, but the inputstream \n        // does something odd and doesnt return the correct raw data.\n        // this is a work around to accept vari-length payloads into one byte[] buffer\n        byte[] inBuffer = new byte[1];\n        byte[] buffer = null;\n        int bytesRead = 0;\n\n        byte[] finalbuffer = new byte[0];\n\n        boolean isMultichunk = false;\n\n        InputStream istrm = currentSession.getInputStream();\n\n        while ((bytesRead = istrm.read(inBuffer)) &gt; -1 &amp;&amp; isActive) {\n            buffer = new byte[bytesRead];\n            buffer = Arrays.copyOfRange(inBuffer, 0, bytesRead);\n\n            int available = istrm.available();\n\n            if(available &lt; 1) {\n                if(!isMultichunk) {\n                    finalbuffer = buffer;\n                }\n                else {\n                    finalbuffer = ConcatTools.ByteArrayConcat(finalbuffer,buffer);\n                }\n                notifyOfResponse(deserializePayload(finalbuffer));\n                finalbuffer = new byte[0];\n                isMultichunk = false;\n            }\n            else {\n                if(!isMultichunk) {\n                    isMultichunk = true;\n                    finalbuffer = new byte[0];\n                }\n                finalbuffer = ConcatTools.ByteArrayConcat(finalbuffer,buffer);\n            }\n\n        }\n    } catch (IOException e) {\n        Logger.consoleOut(\"PayloadReadThread: \" + e.getMessage());\n        currentSession = null;\n    }\n}\n</code></pre>\n","question_id":34883310,"tags":["java","android","sockets","inputstream"],"score":0,"is_answered":false,"view_count":1021,"last_edit_date":1453245011},{"owner":{"profile_image":"https://www.gravatar.com/avatar/6b3d4cd6a2649c0a01c7d6166efaadac?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":5695900,"user_type":"registered","user_id":4502434,"link":"https://stackoverflow.com/users/4502434/neebz","reputation":69,"display_name":"Neebz"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63398458/is-maintaining-a-socket-connection-to-a-server-side-service-bad-for-sending-noti","last_activity_date":1597346678,"creation_date":1597332831,"answer_count":1,"title":"Is maintaining a socket connection to a server-side service bad for sending notifications to desktop applications?","body":"<p>I'm currently working on a semi-small spare time project to learn some new technologies. My plan is to create a chat application, client-side being built in WPF, and server-side with Java.</p>\n<p>What I'm curious about is what approach I should take to sending and receiving messages. My current idea is to log the user in using a socket connection, and then maintain that connection to send that user notifications when he/she receives a message. Many people might have an application such as this run for many hours on their computer, so is maintaining a socket connection bad? If so, is there another approach I should consider instead?</p>\n","question_id":63398458,"tags":["java","c#","sockets","networking","tcp"],"score":2,"accepted_answer_id":63401970,"is_answered":true,"view_count":127},{"owner":{"profile_image":"https://www.gravatar.com/avatar/958d61fc7ed9e1843fadd0fd1cbabe94?s=256&d=identicon&r=PG","account_id":1513151,"user_type":"registered","user_id":1414775,"link":"https://stackoverflow.com/users/1414775/berkayk","reputation":2396,"display_name":"berkayk","accept_rate":93},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63355852/reading-binarywebsocketframe-data-pooledunsafedirectbytebuf","last_activity_date":1597324773,"creation_date":1597140018,"answer_count":1,"title":"Reading BinaryWebSocketFrame data PooledUnsafeDirectByteBuf","body":"<p>I have a netty java server handling websockets.</p>\n<p>I managed to handle handshakes and receive data from the HTML5 client. The problem I have is, the server receives <code>BinaryWebSocketFrame</code> and its data contains <code>PooledUnsafeDirectByteBuf(ridx: 0, widx: 6, cap: 6)</code>.</p>\n<p>How can I decode this data and see what it contains?</p>\n<p>PS: My client is an OpenFL client that uses <code>openfl.net.socket</code>.</p>\n","question_id":63355852,"tags":["java","sockets","websocket","netty","openfl"],"score":0,"is_answered":false,"view_count":296},{"owner":{"profile_image":"https://graph.facebook.com/100006338167321/picture?type=large","account_id":4443960,"user_type":"registered","user_id":3617811,"link":"https://stackoverflow.com/users/3617811/draxdomax","reputation":988,"display_name":"DraxDomax","accept_rate":75},"closed_date":1597253812,"link":"https://stackoverflow.com/questions/63381551/java-sockets-how-to-know-which-version-of-tls-my-sslsocket-is-currently-using","last_activity_date":1597253151,"creation_date":1597252226,"answer_count":1,"title":"Java sockets: How to know which version of TLS my SslSocket is currently using?","body":"<p>My client dials a server. We've recently adopted a security policy to allow only TLS 1.2 connections but we are being soft with the transition: If the server and client cannot agree on a TLS 1.2 socket, then some warning is raised for this issue to be fixed but connection should proceed as normal.</p>\n<p>So, I am not really looking for a way to enforce my client to only create TLS 1.2 connection but a way to know which one is currently used.</p>\n<p>My question is about how to get that information from the live socket.</p>\n<p>Here's how my client creates sockets:</p>\n<pre><code>public static SSLSocket getSSLsocket (String hostFQDN, int port, String ksFullPath, String ksPassword, String pkPassword) {\n    try {\n        SSLContext context = SSLContext.getInstance(&quot;TLS&quot;);\n        KeyManagerFactory keyMngFactory = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n        KeyStore keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n\n        keyStore.load(new FileInputStream(ksFullPath), ksPassword.toCharArray());\n        keyMngFactory.init(keyStore, pkPassword.toCharArray());\n        context.init(keyMngFactory.getKeyManagers(), null, null);\n        //TODO: We are going to need a truststore definition... Meanwhile: System.setProperty(&quot;javax.net.ssl.trustStore&quot;, &quot;src/resources/certificates/epp/cacertsuk&quot;);\n        SSLSocketFactory sslScktFactory = context.getSocketFactory();\n        return (SSLSocket) sslScktFactory.createSocket(hostFQDN, port);\n    } catch (Exception e) {\n        throw new RuntimeException(&quot;Could not create SSL socket&quot;, e);\n    }\n}\n</code></pre>\n<p>I am aware of this question: <a href=\"https://stackoverflow.com/questions/10500511/how-to-find-what-ssl-tls-version-is-used-in-java\">How to find what SSL/TLS version is used in Java</a> , where the leading answer seems to say I can get the SSLSession from the SSLSocket and then call .getProtocol... But an example on how to do this was not provided and I was unable to find the solution myself</p>\n","question_id":63381551,"tags":["java","sockets","ssl","tls1.2"],"score":0,"closed_reason":"Duplicate","is_answered":true,"view_count":881},{"owner":{"profile_image":"https://www.gravatar.com/avatar/28fb754f1200fd8383d065ccc738662f?s=256&d=identicon&r=PG","account_id":384482,"user_type":"registered","user_id":741028,"link":"https://stackoverflow.com/users/741028/jevivre-xavie","reputation":303,"display_name":"Jevivre xavie"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/6164167/get-mac-address-on-local-machine-with-java","last_activity_date":1597169166,"creation_date":1306614420,"answer_count":9,"title":"Get MAC address on local machine with Java","body":"<p>I can use </p>\n\n<pre><code>ip = InetAddress.getLocalHost();\nNetworkInterface.getByInetAddress(ip);\n</code></pre>\n\n<p>to obtain the mac address, but if I use this code in an offline machine it doesn't work.</p>\n\n<p>So, <strong>How can I get the Mac address?</strong></p>\n","question_id":6164167,"tags":["java","sockets","mac-address"],"score":27,"accepted_answer_id":6164182,"is_answered":true,"view_count":87491,"last_edit_date":1306614578},{"owner":{"profile_image":"https://lh3.googleusercontent.com/a-/AOh14Gg1mjpCzRmYPnVfCN2x51JYUa3xAN0PYsnNu2hONA=k-s256","account_id":19253913,"user_type":"registered","user_id":14071272,"link":"https://stackoverflow.com/users/14071272/bluesac","reputation":13,"display_name":"BlueSac"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63345500/isp-or-windows-firewall-blocking-udp-connection","last_activity_date":1597112334,"creation_date":1597081968,"answer_count":1,"title":"ISP or Windows firewall blocking UDP connection","body":"<p>I have made a online player game in which i use TCP connection between server and client, and UDP (DatagramSocket) between clients  (its a real time game).\nMy problem is that i can play with some friends but no with others, that is to say, my UDP connection works only with some PCs. I think the only possible reason for this is that their ISP or Firewall is blocking the UDP port.\nIs there any solution to make it works for all without adding a rule manually?\nThanks in advance</p>\n","question_id":63345500,"tags":["java","sockets","udp","block","firewall"],"score":0,"accepted_answer_id":63350579,"is_answered":true,"view_count":654},{"owner":{"profile_image":"https://www.gravatar.com/avatar/81731e401dd41691b3e63fdb60737850?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":17496102,"user_type":"registered","user_id":12687277,"link":"https://stackoverflow.com/users/12687277/vinlem","reputation":1,"display_name":"vinlem"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59676102/android-client-not-receiving-from-python-server-socket","last_activity_date":1578635181,"creation_date":1578635181,"answer_count":0,"title":"Android Client not receiving from Python Server (SOCKET)","body":"<p>I am new to programming and has been looking through tutorials for my project. Please forgive me if I may seem clueless about most things. </p>\n\n<p>I am currently working on a project that requires an Android client to send string data to a Python server where the data will be processed and sent back from the Python Server to the Android client. I am using Socket and managed to send the data from Client to the Server and also got the Server to send it back to the Client. However, my Client isnt receiving anything, would anyone be kind enough to help me with this problem..? </p>\n\n<p>These are my codes.</p>\n\n<p>Android Client Receive:</p>\n\n<pre><code> class recMsg extends Thread {\n    @Override\n    public void run()\n    {\n        try\n        {\n            Socket socket = new Socket(\"192.168.68.105\", 8123);\n            BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n            String response = in.readLine();\n            showToast(response);\n            mTextView.setText((response));\n            socket.close();\n        }\n        catch(Exception e) {}\n    }\n}\n</code></pre>\n\n<p>Python Server Receive and Send:</p>\n\n<pre><code>import socket\nimport sys\n\nHOST = '192.168.68.105'  # this is your localhost\nPORT = 8123\n\ns = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n# socket.socket: must use to create a socket.\n# socket.AF_INET: Address Format, Internet = IP Addresses.\n# socket.SOCK_STREAM: two-way, connection-based byte streams.\nprint('socket created')\n\n# Bind socket to Host and Port\ntry:\n    s.bind((HOST, PORT))\nexcept socket.error as err:\n    print('Bind Failed, Error Code: ' + str(err[0]) + ', Message: ' + err[1])\n    sys.exit()\n\nprint('Socket Bind Success!')\n\n# listen(): This method sets up and start TCP listener.\ns.listen(10)\nprint('Socket is now listening')\n\nwhile True:\n\n    conn, addr = s.accept()\n    print('Connect with ' + addr[0] + ':' + str(addr[1]))\n    if not conn:\n        break\n    buf = conn.recv(4096).decode()\n    print(buf)\n\n    # convert string to byte and send back to android\n    processedText = \"Hello World\"\n    conn.send(processedText.encode())\n    print(\"message sent\")\n\ns.close()\n</code></pre>\n","question_id":59676102,"tags":["java","python","android","sockets","server"],"score":0,"is_answered":false,"view_count":284},{"owner":{"profile_image":"https://www.gravatar.com/avatar/edc541f3d44d16cec1e7139dea8e019d?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":17089310,"user_type":"registered","user_id":12365820,"link":"https://stackoverflow.com/users/12365820/vishwas","reputation":1,"display_name":"vishwas"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59407477/how-can-i-display-the-data-that-is-present-inside-bufferreader-which-is-running","last_activity_date":1578634116,"creation_date":1576750329,"answer_count":1,"title":"how can i display the data that is present inside BufferReader which is running inside the doInBackground of AsyncTask","body":"<p>The below code shows how does the data sent to server and Received from there</p>\n\n<pre><code>public class SendMessage extends AsyncTask&lt;String,String, String&gt; {\n\n    private Exception exception;\n    String mes;\n\n    protected String doInBackground(String... params){\n\n            try{\n\n                //socket creation\n                Socket socket= new Socket(\"192.168.0.115\",8888);\n\n                //send activity to server\n                PrintWriter outToServer = new PrintWriter(\n                        new OutputStreamWriter(\n                                socket.getOutputStream()));\n\n                //printing the received data\n                outToServer.print(params[0]);\n\n                //send the data to server and clear the output stream\n                outToServer.flush();\n\n                //Create the input stream to receive data\n                DataInputStream dis2 = new DataInputStream(socket.getInputStream());\n\n                //create the input stream reader to read the data\n                InputStreamReader disR2 = new InputStreamReader(dis2);\n\n                //Create the buffer reader to store the data\n                BufferedReader br = new BufferedReader(disR2);\n\n\n\n\n\n            }catch (IOException e){\n                e.printStackTrace();\n            }\n\n\n\n        return  null;\n\n    }\n</code></pre>\n\n<p>How can i Display the data that is present inside the AsyncTask.\n used  //Toast.makeText(MainActivity.this,br,Toast.LENGTH_LONG).show(); \nbut i am not able to display. </p>\n","question_id":59407477,"tags":["java","android","sockets"],"score":0,"is_answered":false,"view_count":41,"last_edit_date":1576753446},{"owner":{"user_type":"does_not_exist","display_name":"user12658035"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59669291/java-multi-threading-and-socket-questions","last_activity_date":1578590848,"creation_date":1578590848,"answer_count":0,"title":"Java multi-threading and socket questions","body":"<p>So, im trying to understand this example that teaches about multithreading:\n<a href=\"https://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/networking/sockets/clientServer.html</a></p>\n\n<p>The client starts with:</p>\n\n<pre><code> public class KnockKnockClient {\npublic static void main(String[] args) throws IOException {\n\n    if (args.length != 2) {\n        System.err.println(\n            \"Usage: java EchoClient &lt;host name&gt; &lt;port number&gt;\");\n        System.exit(1);\n    }\n\n    String hostName = args[0];\n    int portNumber = Integer.parseInt(args[1]);\n</code></pre>\n\n<p>while the server instead starts with:</p>\n\n<pre><code>if (args.length != 1) {\n    System.err.println(\"Usage: java KKMultiServer &lt;port number&gt;\");\n    System.exit(1);\n}\n\n    int portNumber = Integer.parseInt(args[0]);\n    boolean listening = true;\n\n    try (ServerSocket serverSocket = new ServerSocket(portNumber)) { \n        while (listening)\n</code></pre>\n\n<p>What are those arguments? If i enter \"localhost 4444\" on the run properties of the project it still doesn't run.</p>\n\n<p>How does the server/client both select the same port?</p>\n\n<p>Will multi-threading still be possible if I write <code>int portNumber = \"4444\";</code> instead? The server shouldnt be able to listen to the port \"4444\" after the first client connected right?</p>\n","question_id":59669291,"tags":["java","multithreading","sockets"],"score":0,"is_answered":false,"view_count":64},{"owner":{"profile_image":"https://www.gravatar.com/avatar/d22e39e8398ac58b4399e1080af763b3?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":3927868,"user_type":"registered","user_id":3247551,"link":"https://stackoverflow.com/users/3247551/jay-vyas","reputation":2702,"display_name":"Jay Vyas","accept_rate":37},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/52362555/serversocketchannel-vs-serversocket-java","last_activity_date":1578582029,"creation_date":1537168488,"answer_count":1,"title":"ServerSocketChannel vs ServerSocket Java","body":"<p>I have started my work on a pre-developed Java application, where they are dealing with java sockets. The main concept of the project is to get data from the client at the java socket server and process it.</p>\n\n<p>The project has been developed using Java NIO ServerSocketChannel.</p>\n\n<p>Now in this scenario, I could able to get around 70-80 records per second from the client. While if I use simple Java ServerSocket ( Just for testing purpose ) the output zoomed to around 800 reps. </p>\n\n<p>Why is so much difference in both of this?\nAnd how can I modify ServerSocketChannel to imitate ServerSocket?</p>\n\n<p>Here is my main processing part,</p>\n\n<pre><code>SocketChannel client = (SocketChannel) key.channel();\n                        if (!key.isReadable()) {\n                            key.cancel();\n                            client.close();\n                            continue;\n                        }\n\n                        int[] k = (int[]) key.attachment();\n\n                        if (k[2] == 0) {\n                                ByteBuffer lengthBuffer = ByteBuffer.allocate(2);\n\n                                int bytesRead = -1;\n                                if (!client.socket().isClosed() &amp;&amp; key.isValid()) {\n                                    bytesRead = client.read(lengthBuffer);\n                                }\n\n                                if (bytesRead == -1) {\n                                    key.cancel();\n                                    client.close();\n                                    continue;\n                                }\n                                lengthBuffer.flip();\n                                byte[] bytes = new byte[2];\n                                lengthBuffer.get(bytes, 0, 2);\n                                short length = DRMSDecoder.getShort(bytes);\n\n\n                                k[0]++;\n                                k[1] = length;\n                                k[2] = 1;\n                                key.attach(k);\n                                lengthBuffer.clear();\n                            } \n                            else {\n                                try {\n\n                                    int length = k[1];\n                                    ByteBuffer dataBuffer = ByteBuffer.allocate(length);\n                                    dataBuffer.clear();\n                                    System.gc();\n\n                                    int bytesRead = -1;\n                                    if (!client.socket().isClosed() &amp;&amp; key.isValid()) {\n                                        bytesRead = client.read(dataBuffer);\n                                    }\n\n                                    if (bytesRead == -1) {\n                                        key.cancel();\n                                        client.close();\n                                        continue;\n                                    }\n\n                                    dataBuffer.flip();\n\n                                    Hashtable&lt;String, Object&gt; request = decoder.decode(dataBuffer);\n                                    short call_type = (Short) request.get(\"Call Type\");\n\n                                    if (request.get(\"Call Type\") != null &amp;&amp; (((Short) request.get(\"Call Type\")) == 78 || ((Short) request.get(\"Call Type\")) == 80)) {\n\n\n                                    } else if (request.get(\"Call Type\") != null &amp;&amp; (((Short) request.get(\"Call Type\")) == 79)) {\n                                        key.cancel();\n                                        client.close();\n\n                                    } \n                                        String message = (String) request.get(\"Buffer\");\n\n                                        handleMessage(message);\n\n                                    }\n                                    k[0]++;\n                                    k[2] = 0;\n                                    key.attach(k);\n                                    lastMessageProcessed++;\n\n                                    dataBuffer.clear();\n\n                                } catch (Exception e) {\n//                                    System.out.println(e);\n                                }\n                            }\n</code></pre>\n","question_id":52362555,"tags":["java","sockets","serversocket","socketchannel"],"score":1,"is_answered":true,"view_count":4787,"last_edit_date":1578582029},{"owner":{"profile_image":"https://i.stack.imgur.com/DoPCR.png?s=256&g=1","account_id":3280268,"user_type":"registered","user_id":2761035,"link":"https://stackoverflow.com/users/2761035/codingenious","reputation":8445,"display_name":"codingenious","accept_rate":74},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/24516418/detecting-tcp-ip-packet-loss","last_activity_date":1578577993,"creation_date":1404236944,"answer_count":3,"title":"detecting TCP/IP packet loss","body":"<p>I have tcp communication via socket code like :</p>\n\n<pre><code>public void openConnection() throws Exception\n{\n   socket = new Socket();\n   InetAddress iNet = InetAddress.getByName(\"server\");\n   InetSocketAddress sock = new InetSocketAddress(iNet, Integer.parseInt(port));\n   socket.connect(sock, 0);\n\n   out = new PrintWriter(socket.getOutputStream(), true);\n   in = new BufferedReader(new InputStreamReader(socket.getInputStream()));\n}\n</code></pre>\n\n<p>and send method as :</p>\n\n<pre><code>synchronized void send(String message)\n{\n try\n {\n    out.println(message);\n }\n catch (Exception e)\n {\n    throw new RuntimeException(this.getClass() + \": Error Sending Message: \"\n        + message, e);\n }\n}\n</code></pre>\n\n<p>And I read from webpages that, TCP/IP does not guarantee delivery of packet, it retries but if network is too busy, packet may be dropped([link]).<a href=\"http://www.ibm.com/developerworks/aix/library/au-aix-packet-dropping/index.html?ca=dat\" rel=\"nofollow\">1</a></p>\n\n<blockquote>\n  <p>Packets can be dropped when transferring data between systems for two key reasons:</p>\n</blockquote>\n\n<ul>\n<li>Heavy network utilization and resulting congestion</li>\n<li>Faulty network hardware or connectors</li>\n</ul>\n\n<blockquote>\n  <p>TCP is designed to be able to react when packets are dropped on a network. When a packet is successfully delivered to its destination, the destination system sends an acknowledgement message back to the source system. If this acknowledgement is not received within a certain interval, that may be either because the destination system never received the packet or because the packet containing the acknowledgement was itself lost. In either case, if the acknowledgement is not received by the source system in the given time, the source system assumes that the destination system never received the message and retransmits it. It is easy to see that if the performance of the network is poor, packets are lost in the first place, and the increased load from these retransmit messages is only increasing the load on the network further, meaning that more packets will be lost. This behaviour can result in very quickly creating a critical situation on the network.</p>\n</blockquote>\n\n<p>Is there any way, that I can detect if packet was received successfully by destination or not, I am not sure that <code>out.println(message);</code> will throw any exception, as this is non blocking call. It will put message in buffer and return to let TCP/IP do its work.</p>\n\n<p>Any help?</p>\n","question_id":24516418,"tags":["java","sockets","networking","tcp"],"score":2,"accepted_answer_id":24516864,"is_answered":true,"view_count":9749},{"owner":{"profile_image":"https://www.gravatar.com/avatar/2ff7300be724cb852aba48e6f3bcc6a1?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":14066899,"user_type":"registered","user_id":10161504,"link":"https://stackoverflow.com/users/10161504/wattbatt","reputation":447,"display_name":"wattbatt"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59651696/how-do-input-stream-and-output-stream-of-the-same-socket-see-each-other","last_activity_date":1578523175,"creation_date":1578507582,"answer_count":2,"title":"How do input stream and output stream of the same socket see each other?","body":"<p>Hello i am studying an example of a server-client application and I do not understand how the client receives the string from the server.</p>\n\n<p>The server runs a thread that does this:</p>\n\n<pre><code>String seq = generateSequence(l); //random stuff\n        outSocket.println(seq);\n</code></pre>\n\n<p>in the client class there is this code:</p>\n\n<pre><code> String serverSeq = inSocket.readLine();\n        System.out.println(serverSeq);\n</code></pre>\n\n<p>and <code>inSocket</code> and <code>outSocket</code> are implemented in the same way both in the thread and in the client classes, with:</p>\n\n<pre><code>inSocket = new BufferedReader(new InputStreamReader(socket.getInputStream()));\noutSocket = new PrintWriter(new BufferedWriter(\n                        new OutputStreamWriter(socket.getOutputStream())), true);\n</code></pre>\n\n<p>where <code>socket</code> is the same object too, it's the client's socket</p>\n\n<p>My question is why <code>serverSeq</code> string is exactly the<code>seq</code> string? The server writes in the output stream, and the client picks up from the input stream, aren't those two different memory areas?</p>\n","question_id":59651696,"tags":["java","sockets","stream"],"score":0,"is_answered":true,"view_count":658,"last_edit_date":1578523175},{"owner":{"profile_image":"https://www.gravatar.com/avatar/aa1dd869cf0f5429d199c9aa3c16e998?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":14712295,"user_type":"registered","user_id":10625320,"link":"https://stackoverflow.com/users/10625320/goel-nimi","reputation":37,"display_name":"Goel Nimi"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59618070/how-can-i-use-java-sockets-to-communicate-between-different-networks","last_activity_date":1578340692,"creation_date":1578340017,"answer_count":1,"title":"How can I use java sockets to communicate between different networks?","body":"<p>I have java programs for my client and server, and they work fine within the same wifi network. But I need the clients to be able to connect to the server from the open internet. In questions like these</p>\n\n<p><a href=\"https://stackoverflow.com/questions/15371694/how-to-connect-client-and-server-with-the-help-of-ip-address-which-are-connected\">How to connect client and server with the help of ip address which are connected to internet through different wifi?</a></p>\n\n<p><a href=\"https://coderanch.com/t/667020/java/Socket-connections-networks\" rel=\"nofollow noreferrer\">https://coderanch.com/t/667020/java/Socket-connections-networks</a></p>\n\n<p>the solution is to manually reroute a port to the server from the router, making it open to connections from the outside. Is there a way to do this with just software on the server? I don't understand why manually dedicating ports is necessary since of course other applications on my computer (like games) that I install communicate with their servers back and forth without me having to manually go in and flip switches. </p>\n\n<p>How can I achieve this with just software running on my server?</p>\n\n<p>If there isn't another way, how do other applications communicate openly without manual router changes, and will opening up ports through my router result in security issues?</p>\n","question_id":59618070,"tags":["java","sockets","security","port","router"],"score":2,"accepted_answer_id":59618198,"is_answered":true,"view_count":1419},{"owner":{"profile_image":"https://www.gravatar.com/avatar/5d34156c7fc42d7ce742b7b02a7f8f86?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":7976387,"user_type":"registered","user_id":6019425,"link":"https://stackoverflow.com/users/6019425/ajay-yadav","reputation":31,"display_name":"Ajay Yadav","accept_rate":14},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/41738144/how-to-send-a-java-object-in-binary-format-and-receive-in-c-server","last_activity_date":1578311933,"creation_date":1484818100,"answer_count":3,"title":"How to send a Java Object in binary format and receive in C server?","body":"<p>I am having a Java object and now I want to convert it into binary form (binary protocol) and send across the network and a C client will receive it and print the contents. Like I have a Student class</p>\n\n<p><strong>Student.java</strong></p>\n\n<pre><code>import java.io.Serializable;\n\npublic class Student implements Serializable {\n\n    public String name;\n    public int id;\n\n    public String getName() { return name; }\n\n    public void setName(String name) { this.name = name; }\n\n    public int getId() { return id; }\n\n    public void setId(int id) { this.id = id; }\n\n} \n</code></pre>\n\n<p><strong>Client.java</strong></p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.DataOutputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.io.ObjectOutputStream;\nimport java.net.Socket;\n\npublic class Client {\n\n    public static void main(String[] args) throws IOException {\n\n        Student s1 = new Student();\n        s1.setId(10);\n        s1.setName(\"abc\");\n\n        Socket clientSocket = new Socket(\"localhost\", 7777);\n        DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());\n\n        try {\n            FileOutputStream fos = new FileOutputStream(\"data.ser\");\n            ObjectOutputStream oos = new ObjectOutputStream(clientSocket.getOutputStream());\n            oos.writeObject(s1);\n            // oos.close();\n            // fos.close();\n        }\n        catch(Exception e) {\n            e.printStackTrace();\n        }\n        clientSocket.close();\n    }\n\n}\n</code></pre>\n\n<p>And the last is server.c, which is in c language.</p>\n\n<p><strong>server.c</strong></p>\n\n<pre><code>/*\n * C socket server example\n */\n\n#include&lt;stdio.h&gt;\n#include&lt;string.h&gt;    //strlen\n#include&lt;sys/socket.h&gt;\n#include&lt;arpa/inet.h&gt; //inet_addr\n#include&lt;unistd.h&gt;    //write\n\nint main(int argc , char *argv[]) {\n    int socket_desc , client_sock , c , read_size;\n    struct sockaddr_in server , client;\n    char client_message[2000];\n\n    // Create socket\n    socket_desc = socket(AF_INET , SOCK_STREAM , 0);\n    if (socket_desc == -1) {\n        printf(\"Could not create socket\");\n    }\n    puts(\"Socket created\");\n\n    // Prepare the sockaddr_in structure\n    server.sin_family = AF_INET;\n    server.sin_addr.s_addr = INADDR_ANY;\n    server.sin_port = htons( 7777 );\n\n    // Bind\n    if (bind(socket_desc,(struct sockaddr *)&amp;server , sizeof(server)) &lt; 0) {\n        // Print the error message\n        perror(\"bind failed. Error\");\n        return 1;\n    }\n    puts(\"bind done\");\n\n    // Listen\n    listen(socket_desc , 3);\n\n    // Accept and incoming connection\n    puts(\"Waiting for incoming connections...\");\n    c = sizeof(struct sockaddr_in);\n\n    // Accept connection from an incoming client\n    client_sock = accept(socket_desc, (struct sockaddr *)&amp;client, (socklen_t*)&amp;c);\n    if (client_sock &lt; 0) {\n        perror(\"accept failed\");\n        return 1;\n    }\n    puts(\"Connection accepted\");\n\n    // Receive a message from client\n    while ((read_size = recv(client_sock , client_message , 2000 , 0)) &gt; 0){\n        // Send the message back to client\n        printf(\"\\n%s\", client_message);\n        write(client_sock , client_message , strlen(client_message));\n    }\n\n    if (read_size == 0) {\n        puts(\"Client disconnected\");\n        fflush(stdout);\n    }\n    else if (read_size == -1) {\n        perror(\"recv failed\");\n    }\n\n    return 0;\n}\n</code></pre>\n\n<p>When I am running the server and client. I am getting output like this:</p>\n\n<pre><code> �\n sr\n xp\n</code></pre>\n\n<p>I want the output should be name and ID of the student printed on the server.</p>\n\n<p>Please provide your suggestion or any alternate on the same.</p>\n","question_id":41738144,"tags":["java","sockets","jakarta-ee","networking"],"score":0,"accepted_answer_id":41738243,"is_answered":true,"view_count":1409,"last_edit_date":1578311933},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e44c97259cb4f0c1a11460a3ad517c59?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":13468379,"user_type":"registered","user_id":9717814,"link":"https://stackoverflow.com/users/9717814/kratess","reputation":55,"display_name":"kratess"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59605835/creating-a-tls-ssl-server-with-httpsserver","last_activity_date":1578275573,"creation_date":1578275573,"answer_count":0,"title":"Creating a TLS/SSL server with HttpsServer","body":"<p>I tried all day do make a server TLS/SSL HTTPS with java. Can someone help me?</p>\n\n<p>This is my code</p>\n\n<pre><code>static class MyHandler implements HttpHandler {\n    @Override\n    public void handle(HttpExchange t) throws IOException {\n        System.out.println(\"called\");\n        String response = \"This is the response\";\n        t.sendResponseHeaders(200, response.length());\n        OutputStream os = t.getResponseBody();\n        os.write(response.getBytes());\n        os.close();\n    }\n}\n\nstatic HttpsServer server = null;\nstatic int port = 9000;\n\npublic static void main(String[] args) throws Exception {\n    String keystoreFilename = \"/home/kratess/\" + \"mykey.keystore\";\n    char[] storepass = \"mypassword\".toCharArray();\n    char[] keypass = \"mypassword\".toCharArray();\n    String alias = \"alias\";\n    FileInputStream fIn = new FileInputStream(keystoreFilename);\n    KeyStore keystore = KeyStore.getInstance(\"JKS\");\n    keystore.load(fIn, storepass);\n\n    // display certificate\n    Certificate cert = keystore.getCertificate(alias);\n    System.out.println(cert);\n\n    // setup the key manager factory\n    KeyManagerFactory kmf = KeyManagerFactory.getInstance(\"SunX509\");\n    kmf.init(keystore, keypass);\n\n    // setup the trust manager factory\n    TrustManagerFactory tmf = TrustManagerFactory.getInstance(\"SunX509\");\n    tmf.init(keystore);\n\n\n\n    server = HttpsServer.create(new InetSocketAddress(port), 0);\n\n    // create ssl context\n    SSLContext sslContext = SSLContext.getInstance(\"TLSv1.2\");\n\n    // setup the HTTPS context and parameters\n    sslContext.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);\n    server.setHttpsConfigurator(new HttpsConfigurator(sslContext) {\n        public void configure(HttpsParameters params) {\n            try {\n                // initialise the SSL context\n                SSLContext c = SSLContext.getDefault();\n                SSLEngine engine = c.createSSLEngine();\n                params.setNeedClientAuth(true);\n                params.setCipherSuites(engine.getEnabledCipherSuites());\n                params.setProtocols(engine.getEnabledProtocols());\n                // get the default parameters\n                SSLParameters defaultSSLParameters = c.getDefaultSSLParameters();\n                params.setSSLParameters(defaultSSLParameters);\n            } catch (Exception ex) {\n                ex.printStackTrace();\n                System.out.println(\"Failed to create HTTPS server\");\n            }\n        }\n    });\n\n    System.out.println(\"server started at \" + port);\n    server.createContext(\"/test\", new MyHandler());\n    server.setExecutor(null);\n\n    server.start();\n}\n</code></pre>\n\n<p>The server starts but it and the certificate doesn't work on chrome.\nThe certificate print in the console and is all complete.</p>\n\n<p>Chrome gives that response <code>ERR_EMPTY_RESPONSE</code></p>\n\n<p>Also, HttpHandler isn't called.</p>\n\n<p>Where am I wrong? If this solution doesn't work can someone suggest me what I have to use? I need to code this HTTPS for creating a WebHook page (required SSL)</p>\n","question_id":59605835,"tags":["java","sockets","ssl","https"],"score":2,"is_answered":false,"view_count":101},{"owner":{"profile_image":"https://graph.facebook.com/562008003998064/picture?type=large","account_id":9519217,"user_type":"registered","user_id":7074634,"link":"https://stackoverflow.com/users/7074634/asad-mubashar","reputation":1,"display_name":"Asad Mubashar"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59585595/run-some-specific-code-in-server-when-there-are-3-clients-connected-to-server-in","last_activity_date":1578260614,"creation_date":1578087113,"answer_count":0,"title":"Run some specific code in Server when there are 3 clients connected to server in java","body":"<pre><code>if(clientCount == 3) { \n</code></pre>\n\n<p>that's the problem in client class \nI am using if statement but that only work for 3rd client but not for 1st and 2nd client as for them clientCount is not equal to 3. Please let me know how can I start the ServerThread code only when there are 3 clients. What is possible solution there to run some specific code on receiving 3 clients information. I also need to code a timer on mcqs when I asked a question to user if on that time user doesn't submitted his answer then next question will be asked to that user.</p>\n\n<p>I haven't found any solution online for that.</p>\n\n<p>Server Class</p>\n\n<pre><code>import org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\n\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.File;\nimport java.io.IOException;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.util.ArrayList;\nimport java.util.TimerTask;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class Server {\n    private static ArrayList&lt;Client&gt; clients = new ArrayList&lt;&gt;();\n    private static ArrayList&lt;Mcq&gt; mcqs = new ArrayList&lt;&gt;();\n    ServerSocket serversocket;\n    Socket client;\n    int clientCount = 0;\n    static int players = 0;\n    ExecutorService pool = Executors.newFixedThreadPool(10);\n\n    public static void buildMCQs(){\n        try {\n\n            File fXmlFile = new File(\"questionaire.xml\");\n            DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();\n            DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();\n            Document doc = dBuilder.parse(fXmlFile);\n\n            doc.getDocumentElement().normalize();\n\n            NodeList nList = doc.getElementsByTagName(\"QuestionBank\");\n            Node nNode = nList.item(nList.getLength()-1);\n            if(nNode.getNodeType() == Node.ELEMENT_NODE){\n                Element eElement1 = (Element) nNode;\n                players = Integer.parseInt(eElement1.getAttribute(\"players\"));\n                NodeList nodeList = doc.getElementsByTagName(\"Question\");\n                for (int i = 0; i &lt; nodeList.getLength(); i++) {\n                    mcqs.add(new Mcq());\n                }\n                for (int i = 0; i &lt; nodeList.getLength(); i++) {\n                    Node node = nodeList.item(i);\n                    if (node.getNodeType() == Node.ELEMENT_NODE) {\n                        Element eElement = (Element) node;\n                        mcqs.get(i).setId(Integer.parseInt(eElement.getAttribute(\"id\")));\n                        mcqs.get(i).setAnswer(Integer.parseInt(eElement.getAttribute(\"answerid\")));\n                    }\n                }\n            }\n            NodeList nodeList1 = doc.getElementsByTagName(\"text\");\n            for (int j = 0; j &lt; nodeList1.getLength(); j++) {\n                Node node1 = nodeList1.item(j);\n                if(node1.getNodeType() == Node.ELEMENT_NODE) {\n                    Element eElement2 = (Element) node1;\n                    mcqs.get(j).setTitle(eElement2.getTextContent());\n                }\n            }\n            NodeList nodeList2 = doc.getElementsByTagName(\"option\");\n            int count = 0;\n            for (int j = 0; j &lt; nodeList2.getLength(); j++) {\n                Node node2 = nodeList2.item(j);\n                if(node2.getNodeType() == Node.ELEMENT_NODE) {\n                    Element eElement3 = (Element) node2;\n                    if(count &lt;= mcqs.size()){\n                        mcqs.get(count).setOption(eElement3.getTextContent());\n                    }\n                    if(j == 3){\n                        count = 1;\n                    }\n                    if(j == 7){\n                        count = 2;\n                    }\n                    if(j == 11){\n                        count = 3;\n                    }\n                }\n            }\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n    public void start() throws IOException{\n        System.out.println(\"Connection Started...\");\n        //make connection to client on port specified\n        serversocket = new ServerSocket(12345);\n\n        //accept connection from client\n        while (true){\n            client = serversocket.accept();\n            clientCount++;\n            ServerThread runnable = new ServerThread();\n            pool.execute(runnable);\n        }\n    }\n    public class ServerThread implements Runnable{\n        DataInputStream input;\n        DataOutputStream output;\n        public void run(){\n            try{\n                System.out.println(\"New Client received...\");\n                //open buffered reader for reading data from client\n                input = new DataInputStream(client.getInputStream());\n                output = new DataOutputStream(client.getOutputStream());\n\n                String greetings = \"*** Welcome to our Game server ***\";\n                output.writeUTF(greetings);\n//that's the wrong logic\n\n\n                if(clientCount == 3) {\n                    String promptFirstName = \"Enter first name: \";\n                    output.writeUTF(promptFirstName);\n                    String firstName = input.readUTF(); //read1\n\n                    String promptLastName = \"Enter last name: \";\n                    output.writeUTF(promptLastName);\n                    String lastName = input.readUTF();\n\n                    String promptAge = \"Enter your age: \";\n                    output.writeUTF(promptAge);\n                    int age = Integer.parseInt(input.readUTF());\n                    clients.add(new Client(firstName, lastName, age));\n\n                    int points = 0;\n                    output.writeUTF(String.valueOf(mcqs.size()));\n                    output.writeUTF(String.valueOf(mcqs.get(0).getOptions().size()));\n\n                    for (int i = 0; i &lt; mcqs.size(); i++) {\n                        try {\n                            output.writeUTF(mcqs.get(i).getTitle());\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                        for (int j = 0; j &lt; mcqs.get(i).getOptions().size(); j++) {\n                            try {\n                                output.writeUTF(mcqs.get(i).getOptions().get(j));\n                            } catch (IOException e) {\n                                e.printStackTrace();\n                            }\n                        }\n                        try {\n                            output.writeUTF(\"Answer: \");\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                        try {\n                            if (Integer.parseInt(input.readUTF()) == mcqs.get(i).getAnswer()) {\n                                output.writeUTF(\"Right!\");\n                                points += 10;\n                            } else {\n                                output.writeUTF(\"Wrong!\");\n                            }\n                        } catch (IOException e) {\n                            e.printStackTrace();\n                        }\n                    }\n                    output.writeUTF(String.valueOf(points));\n                }\n\n            }catch (IOException ex){\n                ex.printStackTrace();\n            }\n\n        }\n    }\n    public static void main(String[] args) throws IOException {\n        buildMCQs();\n        Server server = new Server();\n        try {\n            server.start();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>Client class</p>\n\n<pre><code>import java.io.DataInputStream;\nimport java.io.DataOutputStream;\nimport java.io.IOException;\nimport java.net.InetAddress;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.util.Scanner;\n\npublic class Client {\n    private String firstName;\n    private String lastName;\n    private int age;\n    static Scanner scanner = new Scanner(System.in);\n    Socket socket;\n    DataInputStream input;\n    DataOutputStream output;\n\n    public Client(){\n\n    }\n    public Client(String firstName, String lastName, int age){\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.age = age;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n    public void startClient() throws UnknownHostException, IOException{\n\n        //Create socket connection\n        socket = new Socket(\"localhost\", 12345);\n        input = new DataInputStream(socket.getInputStream());\n        output = new DataOutputStream(socket.getOutputStream());\n\n        String greetings = input.readUTF();\n        System.out.println(greetings);\n\n        String firstName = input.readUTF();\n        System.out.println(firstName);\n        setFirstName(scanner.nextLine());\n        output.writeUTF(getFirstName()); //write1\n\n        //prompt for user name\n        String lastName = input.readUTF();\n        System.out.println(lastName);\n        setLastName(scanner.nextLine());\n        output.writeUTF(getLastName()); //write1\n\n        //prompt for age\n        String age = input.readUTF();\n        System.out.println(age);\n        setAge(scanner.nextInt());\n        output.writeUTF(String.valueOf(getAge()));\n\n        int questions = Integer.parseInt(input.readUTF());\n        int options = Integer.parseInt(input.readUTF());\n        for (int i = 0; i &lt; questions; i++) {\n            System.out.println();\n            System.out.println(input.readUTF());\n            for (int j = 0; j &lt; options; j++) {\n                System.out.println(j+1+\".\"+input.readUTF());\n            }\n            System.out.println(input.readUTF());\n            output.writeUTF(String.valueOf(scanner.nextInt()));\n            System.out.println(input.readUTF());\n        }\n        System.out.println(\"Points Scored: \"+ input.readUTF()+\"/30\");\n\n\n    }\n    public static void main(String args[]){\n        Client client = new Client();\n        try {\n            client.startClient();\n        } catch (UnknownHostException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n\n<p>XML FILE</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;?xml version=\"1.0\"?&gt;\n    &lt;QuestionBank players=\"3\"&gt;\n        &lt;Question id=\"1\" answerid=\"1\"&gt;\n            &lt;text&gt;Who invented the BALLPOINT PEN?&lt;/text&gt;\n            &lt;answers&gt;\n                &lt;option id=\"1\"&gt;Biro Brothers&lt;/option&gt;\n                &lt;option id=\"2\"&gt;Waterman Brothers&lt;/option&gt;\n                &lt;option id=\"3\"&gt;Bicc Brothers&lt;/option&gt;\n                &lt;option id=\"4\"&gt;Write Brothers&lt;/option&gt;\n            &lt;/answers&gt;\n        &lt;/Question&gt;\n        &lt;Question id=\"2\" answerid=\"1\"&gt;\n            &lt;text&gt;In which decade was the first solid state integrated circuit demonstrated?&lt;/text&gt;\n            &lt;answers&gt;\n                &lt;option id=\"1\"&gt;1950s&lt;/option&gt;\n                &lt;option id=\"2\"&gt;1960s&lt;/option&gt;\n                &lt;option id=\"3\"&gt;1970s&lt;/option&gt;\n                &lt;option id=\"4\"&gt;1980s&lt;/option&gt;\n            &lt;/answers&gt;\n        &lt;/Question&gt;\n        &lt;Question id=\"3\" answerid=\"4\"&gt;\n            &lt;text&gt;Which scientist discovered the radioactive element radium?&lt;/text&gt;\n            &lt;answers&gt;\n                &lt;option id=\"1\"&gt;Isaac Newton&lt;/option&gt;\n                &lt;option id=\"2\"&gt;Albert Einstein&lt;/option&gt;\n                &lt;option id=\"3\"&gt;Benjamin Franklin&lt;/option&gt;\n                &lt;option id=\"4\"&gt;Marie Curie&lt;/option&gt;\n            &lt;/answers&gt;\n        &lt;/Question&gt;\n    &lt;/QuestionBank&gt;\n</code></pre>\n","question_id":59585595,"tags":["java","multithreading","sockets"],"score":0,"is_answered":false,"view_count":41,"last_edit_date":1578260614}]