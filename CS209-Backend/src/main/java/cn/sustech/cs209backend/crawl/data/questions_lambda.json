[{"owner":{"profile_image":"https://www.gravatar.com/avatar/36393a2d15f0c38a682c41167e2a9ddf?s=256&d=identicon&r=PG","account_id":26046837,"user_type":"registered","user_id":19750774,"link":"https://stackoverflow.com/users/19750774/hut-rudder","reputation":11,"display_name":"hut_rudder"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/73376182/how-can-i-avoid-an-unchecked-overriding-warning-when-interface-methods-generi","last_activity_date":1660667395,"creation_date":1660662178,"answer_count":1,"title":"How can I avoid an &quot;Unchecked overriding&quot; warning when interface method&#39;s generic return is implemented with a concrete type in Java?","body":"<p>This is an educational question that relates to a hobby project. Project Spring Boot MVC/REST app.</p>\n<p>I would like to retain the flexibility to be able to create multiple implementations of Service and have list return a list of objects, depending on what the implementation requires.</p>\n<p>I appreciate I could create some inheritance/implementation hierarchy to define the kinds of objects of which T could encompass. My problem with both of those answers is that some use cases for Service involve me needing to return Lists of Java Standard Lib types - types I would rather not inherit/extend/implement for my own custom classes, which I would prefer be kept as lean as possible.</p>\n<pre><code>import java.util.List;\n\ninterface Service {\n    &lt;T&gt; List&lt;T&gt; list(String location, MyEnums.mediaType type );\n}\n\nclass MyEnums {\n    enum mediaType {\n        IMAGE, VIDEO, AUDIO\n    }\n}\n\nclass LocalService implements Service {\n    public List&lt;MyConcreteClass&gt; list(String location, MyEnums.mediaType type ) {\n        List&lt;MyConcreteClass&gt; list = null;\n        list.add(new MyConcreteClass(1, &quot;foo&quot;, new byte[0]));\n        return list;\n    }\n}\n\nclass MyConcreteClass implements Comparable&lt;MyConcreteClass&gt; {\n\n    private final long id;\n    private final String name;\n    private final byte[] data;\n\n    public MyConcreteClass(long id, String name, byte[] data) {\n        this.id = id;\n        this.name = name;\n        this.data = data;\n    }\n\n\n    @Override\n    public int compareTo(MyConcreteClass o) {\n        return this.name.compareTo(o.name);\n    }\n\n    // Other methods omitted for brevity\n}\n\n\n</code></pre>\n<p>The above code is only a simplified example of the actual app code - which compiles and runs without any (known) runtime bugs. However I get the compiler warning:</p>\n<blockquote>\n<p>Unchecked overriding: return type requires unchecked conversion.</p>\n</blockquote>\n<p>The presence of a warning makes sense to me - code consuming the Service interface/API could break at runtime if the return type requirement in the calling code is incompatible with the implementation, whereas the error would be caught at compile if I had a more specific List&lt;&gt; defined in the interface.</p>\n<p>This would, of course, not be an issue if I had to wire in a concrete implementation into the code consuming my service - however the joys of Spring!</p>\n<p><strong>What am I doing wrong? How can I fix this? Are generics the right way to achieve a polymorphic list() function in my case?</strong></p>\n","question_id":73376182,"tags":["java","generics","polymorphism"],"score":-1,"accepted_answer_id":73377291,"is_answered":true,"view_count":81,"last_edit_date":1660666967},{"owner":{"profile_image":"https://www.gravatar.com/avatar/14e71d13a04b8caaba5669e7b71d8ca6?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":10081294,"user_type":"registered","user_id":7451484,"link":"https://stackoverflow.com/users/7451484/mai65","reputation":93,"display_name":"Mai65"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/73363223/use-compareto-on-more-specific-comparables-in-java","last_activity_date":1660587123,"creation_date":1660577664,"answer_count":1,"title":"use compareTo on more specific Comparables in Java","body":"<p>I would like to have a more specific Comparable interface so that I can type return parameters better.  The interface currently looks like this:</p>\n<pre><code>public interface SpecialComparable&lt;T extends SpecialComparable&lt;T&gt;&gt; extends Comparable&lt;T&gt; {\n}\n</code></pre>\n<p>Now when I try to sort a list of these more specific Comparables as shown below, I get an error because b is of type 'SpecialComparable' not of type 'T'.</p>\n<pre><code>public class UserClass {\n    public &lt;T extends SpecialComparable&lt;T&gt;&gt; UserClass(List&lt;SpecialComparable&lt;T&gt;&gt; comparables) {\n        Collections.sort(comparables, (a, b) -&gt; a.compareTo(b));\n    }\n}\n</code></pre>\n<p>To solve this problem, I can implement a Self method as shown below. This would solve my problem, but it looks very ugly. I would be happy if someone could find a nicer solution to the problem.</p>\n<pre><code>public interface SpecialComparable&lt;T extends SpecialComparable&lt;T&gt;&gt; extends Comparable&lt;T&gt; {\n    T self();\n}\n\npublic class UserClass {\n    public &lt;T extends SpecialComparable&lt;T&gt;&gt; UserClass(List&lt;SpecialComparable&lt;T&gt;&gt; comparables) {\n        Collections.sort(comparables, (a, b) -&gt; a.compareTo(b.self()));\n    }\n}\n</code></pre>\n","question_id":73363223,"tags":["java","sorting","generics","comparable"],"score":0,"accepted_answer_id":73363594,"is_answered":true,"view_count":58,"last_edit_date":1660587123},{"owner":{"profile_image":"https://www.gravatar.com/avatar/918ebcd48bf76e73ecf214601dc183db?s=256&d=identicon&r=PG","account_id":2374678,"user_type":"registered","user_id":2078393,"link":"https://stackoverflow.com/users/2078393/snakybo","reputation":429,"display_name":"Snakybo","accept_rate":100},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/28921833/why-is-this-an-unchecked-cast-and-how-to-fix-it","last_activity_date":1660410228,"creation_date":1425775482,"answer_count":3,"title":"Why is this an unchecked cast? And how to fix it?","body":"<p>I have the following code:</p>\n\n<pre><code>public final &lt;T extends Component&gt; T getComponent(Class&lt;T&gt; type) {\n    Iterator&lt;Component&gt; it = components.iterator();\n\n    while(it.hasNext()) {\n        Component next = it.next();\n\n        if(type.isAssignableFrom(next.getClass()))\n            return (T)next; // Why is this an unchecked cast from Component to T?\n    }\n\n    return null;\n}\n</code></pre>\n\n<p>And for some reason, <code>return (T)next;</code> is an unchecked cast from Component to T.</p>\n\n<p>I'm not sure as to why this is, because T has to extend Component, it should be able to safely cast it to any subclasses of Component, right?</p>\n\n<p>If I manually do <code>return (TestComponent)next;</code> and change the return type to TestComponent it works fine, so why doesn't it work with T?</p>\n","question_id":28921833,"tags":["java","generics","iterator"],"score":8,"accepted_answer_id":28921986,"is_answered":true,"view_count":3341},{"owner":{"profile_image":"https://www.gravatar.com/avatar/14e2a483d62541485fb38b7dd3e028a1?s=256&d=identicon&r=PG","account_id":26054015,"user_type":"registered","user_id":19756689,"link":"https://stackoverflow.com/users/19756689/rashmi","reputation":230,"display_name":"rashmi"},"closed_date":1660394222,"link":"https://stackoverflow.com/questions/73344126/generics-in-java-at-method-level","last_activity_date":1660408185,"creation_date":1660392511,"answer_count":1,"title":"Generics in java at method level","body":"<p>I am new to java. I am trying to debug a code and not able to understand one line.</p>\n<pre><code>public interface CommandDispatcher {\n    &lt;T extends BaseCommand&gt; void registerHandler(Class&lt;T&gt; type, CommandHandlerMethod&lt;T&gt; handler);\n    void send(BaseCommand command);\n}\n</code></pre>\n<p>I know generics but not able to understand below line.</p>\n<pre><code> &lt;T extends BaseCommand&gt; void registerHandler(Class&lt;T&gt; type, CommandHandlerMethod&lt;T&gt;)\n</code></pre>\n<p>what is  <code>&lt;T extends BaseCommand&gt;</code> before <code>void</code> also I am not ablr to understand <code>Class&lt;T&gt;</code></p>\n<p>Can somebody explain me to understand the above line. Consider <code>BaseCommand</code> is an <code>interface.</code></p>\n","question_id":73344126,"tags":["java","spring","spring-boot","generics","backend"],"score":1,"accepted_answer_id":73344263,"closed_reason":"Duplicate","is_answered":true,"view_count":86},{"owner":{"profile_image":"https://lh3.googleusercontent.com/a/AATXAJwfEQk0w22FqXuWcsQa4e_Ss7SuNu22UEkyjjoA=k-s256","account_id":25708523,"user_type":"registered","user_id":19467443,"link":"https://stackoverflow.com/users/19467443/kevin-paul","reputation":11,"display_name":"Kevin Paul"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/73328558/how-to-specify-the-generic-type-of-a-collection","last_activity_date":1660278181,"creation_date":1660269902,"answer_count":1,"title":"How to specify the generic type of a collection?","body":"<p>I want to define a function which can convert a kind of Set to another, like convert HashSet to LinkedHashSet. Here is the function declaration. The sp is sharedpreferences.</p>\n<pre><code>public Set&lt;String&gt; decodeStringSet(String key, @Nullable Set&lt;String&gt; defaultValue, Class&lt;? extends Set&gt; cls){\n    Set&lt;String&gt; result = sp.getStringSet(key, defaultValue);\n    if(result == null){\n        return defaultValue;\n    }\n    else {\n        String[] array = result.toArray(new String[0]);\n        Set&lt;String&gt; a;\n        try {\n            a = cls.newInstance();\n        } catch (IllegalAccessException | InstantiationException var7) {\n            return defaultValue;\n        }\n\n        a.addAll(Arrays.asList(array));\n        return a;\n    }\n}\n</code></pre>\n<p>However, the compiler remind me that &quot;Unchecked assignment: '? extends java.util.Set' to 'java.util.Set&lt;java.lang.String&gt;'&quot; on &quot;a = cls.newInstance();&quot;. I don't know how to change cls to cls&lt;java.lang.String&gt;.</p>\n","question_id":73328558,"tags":["java","generics","reflection","collections"],"score":0,"is_answered":true,"view_count":193,"last_edit_date":1660278181},{"owner":{"profile_image":"https://www.gravatar.com/avatar/6bf361b5df317509cdfc813cb4297b56?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":12491593,"user_type":"registered","user_id":9092943,"link":"https://stackoverflow.com/users/9092943/lois2b","reputation":111,"display_name":"Lois2B"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/73319233/what-design-pattern-could-work-with-such-a-generic-type-in-java","last_activity_date":1660230348,"creation_date":1660214114,"answer_count":1,"title":"What design pattern could work with such a generic type in Java?","body":"<p>Consider having a generic type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface &lt;T&gt; Assigner {\n    &lt;S&gt; S assign(T type);\n}\n</code></pre>\n<p>Now, let's say I want to have different types of assigners that could assign an object of any type <code>T</code> to a group of any type <code>S</code>. Example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface PlayerAssigner extends Assigner&lt;Player&gt; {\n    &lt;S&gt; S assign(Player player);\n}\n\ninterface ManagerAssigner extends Assigner&lt;Manager&gt; {\n    &lt;S&gt; S assign(Manager manager);\n}\n\n...\n</code></pre>\n<p>I would also like to introduce a group-type-based assigner, but this is where I got stuck.\nI tried:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface CityBasedAssigner&lt;T&gt; extends Assigner&lt;T&gt; {\n    City assign(T type);\n}\n</code></pre>\n<p>, but this won't work, it says that both methods have the same erasure. I don't know whether it should be an abstract class or something different, or whether the whole concept could be simplified.\nWhat I want is to be able to instantiate different types of assigners from the combination of two type parameters, e.g. CityBasedPlayerAssigner, CountryBasedPlayerAssigner, CountryBasedManagerAssigner, etc., and this would have been the next step: combining the two extended interfaces and create many implementations based on these two.</p>\n<p>What am I missing here?</p>\n","question_id":73319233,"tags":["java","generics"],"score":0,"is_answered":true,"view_count":64,"last_edit_date":1660214292},{"owner":{"profile_image":"https://lh4.googleusercontent.com/--VSKUaB3mAg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdXAe7cOv3fQ7m26TMZh8Ei3fq6Gg/mo/photo.jpg?sz=256","account_id":15676985,"user_type":"registered","user_id":11312013,"link":"https://stackoverflow.com/users/11312013/konstantin-rezchikov","reputation":73,"display_name":"Konstantin Rezchikov"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/73313839/how-to-assign-mapstring-t-in-class-using-a-generic-function-without-casting","last_activity_date":1660176633,"creation_date":1660175016,"answer_count":1,"title":"How to assign Map&lt;String, T&gt; in class using a generic function without casting","body":"<p>I am working on some code.\nI have a class like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Document {\n\n//assume there are getters and setters\nMap&lt;String, Number&gt; idToRatings;\nMap&lt;String, String&gt; idToNames;\n\npublic &lt;T&gt; void setNewMapAttribute(Function&lt;Map&lt;String, T&gt;, Map&lt;String, T&gt;&gt; mapConsumer){\n        this.setIdToRatings((Map&lt;String, Number&gt;) mapConsumer.apply((Map&lt;String, T&gt;) this.idToRatings()));\n        this.idToNames((Map&lt;String, String&gt;) mapConsumer.apply((Map&lt;String, T&gt;) this.idToNames()));\n\n    }\n}\n</code></pre>\n<p>Then in an another class I have a function like this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private &lt;T&gt; Map&lt;String, T&gt; filterMapKeys(Map&lt;String, T&gt; givenMap) {\n        return givenMap\n                .entrySet()\n                .stream()\n                .filter(stringTEntry -&gt; attributeIds.contains(stringTEntry.getKey()))\n                .collect(Collectors.toMap(Entry::getKey, Entry::getValue));\n    }\n</code></pre>\n<p>This method would then be used like this ideally</p>\n<pre class=\"lang-java prettyprint-override\"><code>doucment.setNewMapAttribute(this::filterMapKeys);\n</code></pre>\n<p>I would like to create a way where I can filter any of properties in the class by a list of ids. Since the Maps in <code>Document</code> contain different key values, I need to use generics. The code in the end would take in a list of ids like <code>List.of(&quot;123&quot;, &quot;456&quot;)</code> and return a Document that only has the ids 123 and 456 in either of it's properties. However, intellij is requiring the casting in <code>setNewMapAttribute</code> which I would like to avoid.</p>\n<p>Is there anything I can do about this casting? Is there a different type of generic signature I can use to make the function work without the casting?</p>\n<p>It makes sense to me that if my function only uses the key type of the Map, then I should be able to filter on ids within all attributes without the casting seen in <code>setNewMapAttribute</code>. The type of the value in Maps, does not concern my filtering function.</p>\n","question_id":73313839,"tags":["java","generics"],"score":0,"accepted_answer_id":73313972,"is_answered":true,"view_count":476},{"owner":{"profile_image":"https://lh3.googleusercontent.com/-3wWO7Ba8qP4/AAAAAAAAAAI/AAAAAAAAHh0/igFyOazWEY0/photo.jpg?sz=256","account_id":7309932,"user_type":"registered","user_id":5569548,"link":"https://stackoverflow.com/users/5569548/ted-yavuzkurt","reputation":517,"display_name":"Ted Yavuzkurt","accept_rate":75},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/73298883/scala-function1t-u-becomes-function1object-object-in-java","last_activity_date":1660148049,"creation_date":1660085425,"answer_count":2,"title":"Scala Function1&lt;T,U&gt; becomes Function1&lt;Object,Object&gt; in Java","body":"<p>I am trying to use the Deequ library from Java, and am having issue using the following method:</p>\n<pre><code>  def hasCompleteness(\n      column: String,\n      assertion: Double =&gt; Boolean,\n      hint: Option[String] = None)\n    : CheckWithLastConstraintFilterable = {\n    addFilterableConstraint { filter =&gt; completenessConstraint(column, assertion, filter, hint) }\n  }\n</code></pre>\n<p>In particular, for the assertion, I need to pass in a <code>Function1&lt;Double, Boolean&gt;</code></p>\n<p>So I use the following code to create an assertion function in Java:</p>\n<pre><code>public static Function1&lt;Double, Boolean&gt; atLeast(double thresholdPercentage) {\n  return new scala.compat.java8.functionConverterImpls.FromJavaFunction&lt;&gt;((Double actualPercentage) -&gt; actualPercentage &gt;= thresholdPercentage);\n}\n</code></pre>\n<p>Simple enough, right?</p>\n<p>Only, my Java Class now won't compile because the signature of the <code>hasCompleteness</code> method, when viewed <em>from Java</em> is that the assertion parameter is a <code>Function1&lt;Object, Object&gt;</code>. Thus I see the following error:</p>\n<pre><code>Required type: Function1&lt;Object, Object&gt;\nProvided: Function1&lt;Double, Boolean&gt;\n</code></pre>\n<p>If I change my <code>atLeast</code> method to return an unparametrized <code>Function1</code> the issue goes away, but this feels like an ugly kludge.</p>\n<p>Am I condemned to losing the type params when using this method from Java? Or is there something perhaps wrong with my IntelliJ / Gradle setup causing this weird behavior?</p>\n","question_id":73298883,"tags":["java","scala","generics"],"score":2,"accepted_answer_id":73309330,"is_answered":true,"view_count":122},{"owner":{"profile_image":"https://www.gravatar.com/avatar/377c52029e629fa1880937105adf031b?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":3541643,"user_type":"registered","user_id":2958560,"link":"https://stackoverflow.com/users/2958560/dando18","reputation":47,"display_name":"Dando18","accept_rate":33},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/20819824/java-generic-type-number","last_activity_date":1660117318,"creation_date":1388267980,"answer_count":4,"title":"Java Generic Type Number","body":"<p>I have read several pages on generic methods and have some sort of grasp on them, but I still don't understand them. So say I have a method to multiply two numbers and return the product: </p>\n\n<pre><code>public double multiply(SomeNumberVariableType x, SomeNumberVariableType y){\n    return x * y;\n}\n</code></pre>\n\n<p>How can I use bounded generics to have only a number type permitted as parameters?</p>\n","question_id":20819824,"tags":["java","generics","numbers"],"score":3,"accepted_answer_id":20819856,"is_answered":true,"view_count":10238},{"owner":{"profile_image":"https://www.gravatar.com/avatar/40327553d4769efada9e2918d809f35d?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":17840072,"user_type":"registered","user_id":12958132,"link":"https://stackoverflow.com/users/12958132/woxihuanxiayua","reputation":107,"display_name":"woxihuanxiayua"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/73300740/spring-injects-a-list-with-generics-issue","last_activity_date":1660111090,"creation_date":1660106788,"answer_count":1,"title":"Spring injects a list with generics issue","body":"<p>Interface:</p>\n<pre><code>public interface PoiSearchDataProvider&lt;T extends AbstractPoiSearchData&gt; {\n\n    T fetch(PoiSearchRequest poiSearchRequest) throws Exception;\n\n}\n</code></pre>\n<p>If I use:</p>\n<pre><code>@Resource\nprivate List&lt;PoiSearchDataProvider&lt;AbstractPoiSearchData&gt;&gt; poiSearchDataProviders;\n</code></pre>\n<p>Application fails to start: <code>expected at least 1 bean which qualifies as autowire candidate.</code></p>\n<p>And it works:</p>\n<pre><code>@Resource\nprivate List&lt;PoiSearchDataProvider&lt;? extends AbstractPoiSearchData&gt;&gt; poiSearchDataProviders;\n</code></pre>\n<p>I want to know the reason behind...</p>\n","question_id":73300740,"tags":["java","spring","spring-boot","generics"],"score":0,"is_answered":false,"view_count":37},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e0971307b6d3fa7d038cc2b998554fea?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":11415665,"user_type":"registered","user_id":8368531,"link":"https://stackoverflow.com/users/8368531/j%c3%b6rg","reputation":214,"display_name":"J&#246;rg"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/70625495/generics-how-to-populate-a-map-from-arrays","last_activity_date":1641583272,"creation_date":1641579260,"answer_count":1,"title":"Generics: How to populate a map from arrays?","body":"<p>I tried to write a utility method which would populate a map from a key and a value array, no matter what the data type of key and value would be.</p>\n<pre><code>  public static &lt;K,V&gt; Map&lt;K,V&gt; fillMap(Map&lt;K,V&gt; map, K[] keys, V[] values) {\n    int l= keys.length;\n    for (int i=0; i&lt;l; i++)\n      map.put(keys[i], values[i]);\n    return map;\n  }\n</code></pre>\n<p>Then I called the method with</p>\n<pre><code>    HashMap&lt;Integer, String&gt; map= new HashMap&lt;&gt;();\n    Integer[] keys= IntStream.range(0, 12).boxed().toArray(Integer[]::new);\n    String[] values= new String[] {&quot;Jan&quot;,&quot;Feb&quot;,&quot;Mar&quot;,&quot;Apr&quot;,&quot;Mai&quot;,&quot;Jun&quot;,\n                   &quot;Jul&quot;,&quot;Aug&quot;,&quot;Sep&quot;,&quot;Okt&quot;,&quot;Nov&quot;,&quot;Dez&quot;};\n    map= MyUtil.fillMap(map, keys, values);\n</code></pre>\n<p>and received the error:<br>\n<strong>incompatible types: no instance(s) of type variable(s) K,V exist so that Map&lt;K,V&gt; conforms to HashMap&lt;Integer,String&gt;</strong><br>\nAll attempts to replace &lt;K,V&gt; by variations of &lt;? extends Object&gt; and the like failed so far.\nHow can this be fixed?</p>\n","question_id":70625495,"tags":["java","generics","collections"],"score":0,"accepted_answer_id":70625645,"is_answered":true,"view_count":101},{"owner":{"profile_image":"https://www.gravatar.com/avatar/8e42a02576022110de1313c58e111c70?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":7162105,"user_type":"registered","user_id":5472537,"link":"https://stackoverflow.com/users/5472537/michael-andr%c3%a9-slimz","reputation":67,"display_name":"Michael Andr&#233; Slimz"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/40877146/get-max-element-in-a-queue-java","last_activity_date":1641574705,"creation_date":1480459385,"answer_count":6,"title":"Get max element in a Queue | Java","body":"<p>Is there an alternative way to get the max element in a Queue (Java)? \n(Please provide alternative approaches )    </p>\n\n<pre><code>import java.util.*;\n\npublic class MaxQueueElement&lt;E extends Comparable&lt;E&gt;&gt; {\n\n    public MaxQueueElement(Queue&lt;E&gt; queue){\n        E max= queue.peek();   // initialize max with head of queue\n\n        for(E e : queue){\n            if(e.compareTo(max) &gt; 0){\n                max = e;\n            }\n        }\n\n    System.out.println(max);\n\n }\n}\n</code></pre>\n","question_id":40877146,"tags":["java","generics","queue"],"score":1,"is_answered":true,"view_count":11658,"last_edit_date":1480459463},{"owner":{"profile_image":"https://i.stack.imgur.com/wNNYd.jpg?s=256&g=1","account_id":1262646,"user_type":"registered","user_id":1220560,"link":"https://stackoverflow.com/users/1220560/morgwai","reputation":2597,"display_name":"morgwai"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/70433519/filtering-a-stream-changes-its-wildcard-bounds","last_activity_date":1641560322,"creation_date":1640080550,"answer_count":1,"title":"filtering a stream changes its wildcard bounds?","body":"<p>the below method compiles without problems:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static Stream&lt;Optional&lt;? extends Number&gt;&gt; getNumbers(Stream&lt;Number&gt; numbers) {\n    return numbers.map(Optional::of);\n}\n</code></pre>\n<p>yet if I add a simple filtering to it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>static Stream&lt;Optional&lt;? extends Number&gt;&gt; getNumbers2(Stream&lt;Number&gt; numbers) {\n    return numbers.map(Optional::of).filter(number -&gt; true);\n}\n</code></pre>\n<p>it generates the following error:</p>\n<blockquote>\n<p>incompatible types:<br />\njava.util.stream.Stream&lt;java.util.Optional&lt;java.lang.Number&gt;&gt; cannot be converted to<br />\njava.util.stream.Stream&lt;java.util.Optional&lt;? extends java.lang.Number&gt;&gt;</p>\n</blockquote>\n<p>tested on openJdk-11 and openJdk-17.</p>\n<p>I'd expect them both to do the same (either both compile ok or both generate the same compilation error), so I'm really puzzled by this: what is the general rule here that explains why the 1st method compiles ok yet the 2nd does not?\nThanks!</p>\n","question_id":70433519,"tags":["java","generics","java-stream","unbounded-wildcard"],"score":8,"accepted_answer_id":70433906,"is_answered":true,"view_count":356,"last_edit_date":1641560322},{"owner":{"profile_image":"https://www.gravatar.com/avatar/a8ed2d5ba8489bd3d09ffd3fc9d7d646?s=256&d=identicon&r=PG","account_id":878605,"user_type":"registered","user_id":48728,"link":"https://stackoverflow.com/users/48728/foryourowngood","reputation":39192,"display_name":"ForYourOwnGood","accept_rate":36},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/490091/java-generics-list-listobject-list","last_activity_date":1641544923,"creation_date":1233190593,"answer_count":13,"title":"Java Generics: List, List&lt;Object&gt;, List&lt;?&gt;","body":"<p>Can someone explained, as detailed as possible, the differences between the following types?</p>\n\n<pre><code>List\nList&lt;Object&gt;\nList&lt;?&gt;\n</code></pre>\n\n<p>Let me make this more specific. When would I want to use</p>\n\n<pre><code>// 1 \npublic void CanYouGiveMeAnAnswer(List l) { }\n\n// 2\npublic void CanYouGiveMeAnAnswer(List&lt;Object&gt; l) { }\n\n// 3\npublic void CanYouGiveMeAnAnswer(List&lt;?&gt; l) { }\n</code></pre>\n","question_id":490091,"tags":["java","generics"],"score":73,"is_answered":true,"view_count":51070,"last_edit_date":1485369310},{"owner":{"profile_image":"https://www.gravatar.com/avatar/b0615f9d8910677c053724488c8e5240?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":14529138,"user_type":"registered","user_id":14367481,"link":"https://stackoverflow.com/users/14367481/mr-proper","reputation":33,"display_name":"Mr. Proper"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/70607154/why-erasure-of-generic-types-prevents-overriding-in-this-case","last_activity_date":1641543284,"creation_date":1641472411,"answer_count":2,"title":"Why erasure of generic types prevents overriding in this case?","body":"<p>The code below doesn't compile on OpenjDK 11.\nIt seems to me that test1 in B should override test1 in A, because:</p>\n<ol>\n<li>The methods have same name.</li>\n<li>The methods have same parameter list.</li>\n<li>The methods have same visibility.</li>\n<li>The methods actually do not throw potentially incompatible checked exceptions.</li>\n<li>Their return types are covariant.</li>\n</ol>\n<p>I took a decompiler and decompiled each class separately. The compiled code actually worked as I would expect. It replaced U extends Number with Number, T extends Integer with Integer and so on. But when I try to compile the two classes together, I got and error on the second class that says the test in the second class does not override a method in the first one.</p>\n<p>I'm missing something big or small here. And it's probably related to 5. Maybe the types are not covariant. Can you help me?</p>\n<pre><code>class A {\n    &lt;U extends Number, T extends Number&gt; U test(T test) {\n        System.out.println(&quot;In A.test(T test)&quot;);\n        return null;\n    }\n    //Decompiler shows that the above method erases to \n    // Number test(Number test)\n    // Just like the method below.\n        \n    Number test2(Number test) {\n        return null;\n    }\n}\n\nclass B extends A {\n    //Unsuccessful override. Compiler error.\n    @Override  \n    &lt;U extends Integer, T extends Number&gt; U test(T test) {\n        System.out.println(&quot;In B.test(T tesT)&quot;);\n        return null;\n    }\n    //Decompiler shows that the above method erases to \n    //Integer test(Number test)\n    //Just like the method bellow.\n    \n    \n    //Successful override\n    @Override\n    Integer test2(Number test) {\n        return null;\n    }\n}\n</code></pre>\n","question_id":70607154,"tags":["java","generics","inheritance"],"score":3,"accepted_answer_id":70607642,"is_answered":true,"view_count":166},{"owner":{"profile_image":"https://www.gravatar.com/avatar/b41758959ba803e4aa6190487031110c?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":22697623,"user_type":"registered","user_id":16865504,"link":"https://stackoverflow.com/users/16865504/hwanguemyang","reputation":23,"display_name":"hwanguemyang"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/70572512/why-cant-i-create-generic-array-in-java","last_activity_date":1641524179,"creation_date":1641252384,"answer_count":1,"title":"Why can&#39;t I create generic array in Java?","body":"<p>I had a problem creating some arrays.</p>\n<p>Here is the code</p>\n<pre class=\"lang-java prettyprint-override\"><code>Predicate&lt;Integer[]&gt;[] endOfLine = {\n    curPoint -&gt; curPoint[0]==r2,\n    curPoint -&gt; curPoint[0]==c2,\n    curPoint -&gt; curPoint[0]==r1,\n    curPoint -&gt; curPoint[0]==c1\n};\nConsumer&lt;Integer[]&gt;[] move = {\n    curPoint -&gt; { curPoint[0]++; },\n    curPoint -&gt; { curPoint[1]++; },\n    curPoint -&gt; { curPoint[0]--; },\n    curPoint -&gt; { curPoint[1]--; }            \n};\n</code></pre>\n<p>and eclipse (maybe compiler?) said:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; java.lang.Error: Unresolved compilation problem: \n    Cannot create a generic array of Predicate&lt;Integer[]&gt;\n</code></pre>\n<p>I Googled, and found that generic type parameter array can't be made in Java.</p>\n<p>I read about compile time and runtime, and I thought it may be not my problem.</p>\n<p>I saw some code which compile compiled:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Integer&gt;[] arrayOfLists = new ArrayList[2];\nArrayList&lt;Integer[]&gt; lists =new ArrayList&lt;&gt;();\nArrayList&lt;Consumer []&gt; [] lists = new ArrayList[5];\n        \nPredicate&lt;Integer[]&gt;[] p = new Predicate[5];\np[0] = a -&gt; a[0] == 0;\n\nPredicate&lt;Integer[]&gt;[] pp = { a -&gt; a[0] == 0 }; //cant be compile\n</code></pre>\n<p>and I read oracle doc and found this:</p>\n<blockquote>\n<p>&quot;Cannot Create Arrays of Parameterized Types&quot;</p>\n</blockquote>\n<p>I concluded my shortcut syntax, {} is the problem. Shortcut syntax create code with parameterized type. Is this correct?</p>\n","question_id":70572512,"tags":["java","generics"],"score":2,"accepted_answer_id":70572715,"is_answered":true,"view_count":1526,"last_edit_date":1641268267},{"owner":{"profile_image":"https://lh3.googleusercontent.com/a-/AAuE7mAU1ZznEqxW3O1lOr6NSv5JUPJiOUHcglsLCpYgdw=k-s256","account_id":16634092,"user_type":"registered","user_id":12804925,"link":"https://stackoverflow.com/users/12804925/jakub-znamen%c3%a1%c4%8dek","reputation":798,"display_name":"Jakub Znamen&#225;ček"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/70610873/how-to-correctly-create-method-accepting-list-of-objects","last_activity_date":1641491487,"creation_date":1641488974,"answer_count":2,"title":"How to correctly create method accepting list of objects","body":"<p>Hi I would like to create method which accepts list of Object something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String formatList(List&lt;Object&gt; listToFormat,int indentationSize){\n        String indentation = Stream.generate(()-&gt;&quot;\\t&quot;).limit(indentationSize).collect(Collectors.joining());\n        String newIndentedLine = &quot;\\n&quot;+indentation;\n        return newIndentedLine+listToFormat.stream()\n                .map(Object::toString)\n                .collect(Collectors.joining(newIndentedLine));\n    }\n</code></pre>\n<p>but when I try to do something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Car&gt; cars = new ArrayList&lt;&gt;();\n...\nFormater.formatList(cars);\n</code></pre>\n<p>it is not allowed.</p>\n","question_id":70610873,"tags":["java","list","generics"],"score":1,"accepted_answer_id":70611427,"is_answered":true,"view_count":61},{"owner":{"profile_image":"https://www.gravatar.com/avatar/2a76d4174d0f059eed245367dd1ca097?s=256&d=identicon&r=PG","account_id":1295597,"user_type":"registered","user_id":1246746,"link":"https://stackoverflow.com/users/1246746/giozh","reputation":9908,"display_name":"giozh","accept_rate":51},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/21556925/constructor-with-different-arraylist-type-as-parameter","last_activity_date":1641477790,"creation_date":1391528826,"answer_count":3,"title":"Constructor with different ArrayList type as parameter","body":"<p>I't first time i've occourred in this \"strange\" situation. I need to create two different constructor for my class:</p>\n\n<pre><code>public OpponentListAdapter(Context c, ArrayList&lt;MyCustomObject&gt; l){}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>public OpponentListAdapter(Context c, ArrayList&lt;String&gt; l){}\n</code></pre>\n\n<p>because depending by type of generics of ArrayList, i need to perform different actions. \nBut i have this error:</p>\n\n<blockquote>\n  <p>Method OpponentListAdapter(Context, ArrayList) has the same erasure >OpponentListAdapter(Context, ArrayList) as another method in type OpponentListAdapter</p>\n</blockquote>\n\n<p>What's wrong?\nMaybe the solution it's simple, but for now, i can't find nothing good!</p>\n","question_id":21556925,"tags":["java","android","generics","arraylist"],"score":1,"accepted_answer_id":21557178,"is_answered":true,"view_count":2427},{"owner":{"profile_image":"https://www.gravatar.com/avatar/f54e86d83eea6143ecc70a485f4e6044?s=256&d=identicon&r=PG","account_id":1853886,"user_type":"registered","user_id":1679863,"link":"https://stackoverflow.com/users/1679863/rohit-jain","reputation":210617,"display_name":"Rohit Jain","accept_rate":77},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/22588518/lambda-expression-and-generic-defined-only-in-method","last_activity_date":1641472510,"creation_date":1395562680,"answer_count":5,"title":"Lambda Expression and generic defined only in method","body":"<p>Suppose I've a generic interface:</p>\n\n<pre><code>interface MyComparable&lt;T extends Comparable&lt;T&gt;&gt;  {\n    public int compare(T obj1, T obj2);\n}\n</code></pre>\n\n<p>And a method <code>sort</code>:</p>\n\n<pre><code>public static &lt;T extends Comparable&lt;T&gt;&gt; \n       void sort(List&lt;T&gt; list, MyComparable&lt;T&gt; comp) {\n    // sort the list\n}\n</code></pre>\n\n<p>I can invoke this method and pass a lambda expression as argument:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"a\", \"b\", \"c\");\nsort(list, (a, b) -&gt; a.compareTo(b));\n</code></pre>\n\n<p>That will work fine. </p>\n\n<p>But now if I make the interface non-generic, and the method generic:</p>\n\n<pre><code>interface MyComparable {\n    public &lt;T extends Comparable&lt;T&gt;&gt; int compare(T obj1, T obj2);\n}\n\npublic static &lt;T extends Comparable&lt;T&gt;&gt; \n       void sort(List&lt;T&gt; list, MyComparable comp) {\n}\n</code></pre>\n\n<p>And then invoke this like:</p>\n\n<pre><code>List&lt;String&gt; list = Arrays.asList(\"a\", \"b\", \"c\");\nsort(list, (a, b) -&gt; a.compareTo(b));\n</code></pre>\n\n<p>It doesn't compile. It shows error at lambda expression saying: </p>\n\n<blockquote>\n  <p>\"Target method is generic\"</p>\n</blockquote>\n\n<p>OK, when I compiled it using <code>javac</code>, it shows following error:</p>\n\n<pre><code>SO.java:20: error: incompatible types: cannot infer type-variable(s) T#1\n        sort(list, (a, b) -&gt; a.compareTo(b));\n            ^\n    (argument mismatch; invalid functional descriptor for lambda expression\n      method &lt;T#2&gt;(T#2,T#2)int in interface MyComparable is generic)\n  where T#1,T#2 are type-variables:\n    T#1 extends Comparable&lt;T#1&gt; declared in method &lt;T#1&gt;sort(List&lt;T#1&gt;,MyComparable)\n    T#2 extends Comparable&lt;T#2&gt; declared in method &lt;T#2&gt;compare(T#2,T#2)\n1 error\n</code></pre>\n\n<p>From this error message, it seems like compiler is not able to infer the type arguments. Is that the case? If yes, then why is it happening like this?</p>\n\n<p>I tried various ways, searched through the internet. Then I found <a href=\"http://www.javacodegeeks.com/2012/02/whats-cooking-in-java-8-project-lambda.html\">this JavaCodeGeeks article</a>, which shows a way, so I tried:</p>\n\n<pre><code>sort(list, &lt;T extends Comparable&lt;T&gt;&gt;(a, b) -&gt; a.compareTo(b));\n</code></pre>\n\n<p>which again doesn't work, contrary to what that article claims that it works. Might be possible that it used to work in some initial builds.</p>\n\n<p>So my question is: Is there any way to create lambda expression for a generic method? I can do this using a method reference though, by creating a method:</p>\n\n<pre><code>public static &lt;T extends Comparable&lt;T&gt;&gt; int compare(T obj1, T obj2) {\n    return obj1.compareTo(obj2);\n}\n</code></pre>\n\n<p>in some class say <code>SO</code>, and pass it as:</p>\n\n<pre><code>sort(list, SO::compare);\n</code></pre>\n","question_id":22588518,"tags":["java","generics","lambda","java-8"],"score":122,"accepted_answer_id":22588738,"is_answered":true,"view_count":92790,"last_edit_date":1637175489},{"owner":{"profile_image":"https://www.gravatar.com/avatar/b75136316e93a66545dd346297fad09e?s=256&d=identicon&r=PG","account_id":66899,"user_type":"registered","user_id":196032,"link":"https://stackoverflow.com/users/196032/alex-r","reputation":11449,"display_name":"Alex R","accept_rate":49},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67275241/how-to-apply-dynamodb-bean-annotations-to-a-different-projects-pojos-by-using-g","last_activity_date":1641443191,"creation_date":1619481759,"answer_count":1,"title":"How to apply DynamoDB Bean annotations to a different project&#39;s POJOs by using generics?","body":"<p>I'm trying to setup a micro-framework within my application to remove duplication of code (&quot;DRY&quot; principle). Specifically I have a need to use annotations from my project in conjunction with several POJO classes that are in a different project (those are the <code>&lt;T&gt;</code>'s below) and which do not share my dependencies.</p>\n<p>So I started with this:</p>\n<pre><code>public abstract class DynamoRepo&lt;T&gt; {\n\n    @DynamoDbBean\n    public static class Entity&lt;T&gt; {\n        private Number id;\n        private T bean;\n    \n        @DynamoDbPartitionKey\n        @DynamoDbConvertedBy(IdConverter.class)\n        public Number getId() {\n            return id;\n        }\n    \n        public void setId(Number id) {\n            this.id = id;\n        }\n    \n        @DynamoDbFlatten\n        public T getBean() {\n            return bean;\n        }\n    \n        public void setBean(T bean) {\n            this.bean = bean;\n        }\n        \n        ...\n</code></pre>\n<p>... the annotations are required at runtime for the code below</p>\n<pre><code>    private DynamoDbTable&lt;Entity&lt;?&gt;&gt; table;\n</code></pre>\n<p>... with a bit of setup in the constructor ...</p>\n<pre><code>    table = enhancedClient.table(tableName, TableSchema.fromBean(new Entity&lt;? extends T&gt;() {}.getClass()));\n</code></pre>\n<p>... I'd like to be able to accept a <code>&lt;T&gt;</code> which doesn't require the caller to know about <code>Entity</code>:</p>\n<pre><code>public void putItem(T item) {\n    table.putItem(new Entity&lt;T&gt;(item));\n}\n</code></pre>\n<p>Alas, this code doesn't compile. There are several problems here and any small tweaks lead to a different compile error.</p>\n<p>How can I possibly make this work without having to add <code>@DynamoDb</code> annotations to the underlying POJOs (which are not in my project and don't have DynamoDB as a dependency) or have to manually create subclasses that extend each of the POJOs (and throw DRY out the window by creating a whole parallel object hierarchy)?</p>\n<p>This question is about code clarity. Please don't worry about performance overhead.</p>\n","question_id":67275241,"tags":["java","generics","inheritance","java-annotations","amazon-dynamodb"],"score":0,"is_answered":false,"view_count":1985,"last_edit_date":1619482656},{"owner":{"profile_image":"https://lh5.googleusercontent.com/-OEZMwLaE2ME/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucnp0532DLDsbaaCx_rmeYViZLflLA/s96-c/photo.jpg?sz=256","account_id":20087876,"user_type":"registered","user_id":14729061,"link":"https://stackoverflow.com/users/14729061/elias-schlicht","reputation":23,"display_name":"Elias Schlicht"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68038527/reversing-a-stack-without-using-java-api","last_activity_date":1624035689,"creation_date":1624033355,"answer_count":2,"title":"Reversing a Stack without using Java API","body":"<p>i want to implement a reverse method that reverses a Stack. I think the solution is recursion. I tried my best, but it doesn't work. Can somebody tell me where my mistake is?</p>\n<pre><code>public class Stack&lt;E&gt; {\n\n    private final E value;\n    private final Stack&lt;E&gt; next;\n\n    private Stack(E value, Stack&lt;E&gt; next) {\n        this.value = value;\n        this.next = next;\n    }\n\n    public static &lt;E&gt; Stack&lt;E&gt; create() {\n        return null;\n    }\n    public static &lt;E&gt; Stack&lt;E&gt; push(Stack&lt;E&gt; a, E e) {\n        Stack&lt;E&gt; erg = new Stack&lt;E&gt;(e,a);\n        return erg;\n    }\n\n    public static &lt;E&gt; Stack&lt;E&gt; pop(Stack&lt;E&gt; a) { //pop(push(s,e) = s\n        if (a == null) {\n            return Stack.&lt;E&gt;create();\n        }\n        else if (a.value == null){\n            return Stack.&lt;E&gt;create();\n        }\n        else {\n            return a.next;\n        }\n    }\n    public static &lt;E&gt; E top(Stack&lt;E&gt; a) {\n        if (a == null) {\n            return null;\n        }\n        else if (a.value == null){\n            return null;\n        }\n        else {\n            return a.value;\n        }\n    }\n    public static &lt;E&gt; boolean isEmpty(Stack&lt;E&gt; a) {\n        if (a == null) {\n            return true;\n        }\n        else if (a.value == null) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    public static &lt;E&gt; Stack&lt;E&gt; reverse(Stack&lt;E&gt; s) {\n        Stack&lt;E&gt; top = Stack.&lt;E&gt;pop(s);\n        if (Stack.&lt;E&gt;isEmpty(s)) {\n            return top;\n        } else {\n            Stack&lt;E&gt; bottom = reverse(s);\n            Stack.&lt;E&gt;push(top, null);\n            return bottom;\n        }\n    }\n}\n\n</code></pre>\n<p>I'm not allowed to use classes of th Java API; i'm not allowed to add more classes or methods or attributes.</p>\n","question_id":68038527,"tags":["java","generics","recursion","linked-list","stack"],"score":0,"accepted_answer_id":68038541,"is_answered":true,"view_count":304},{"owner":{"profile_image":"https://graph.facebook.com/771397596401520/picture?type=large","account_id":12272391,"user_type":"registered","user_id":8957217,"link":"https://stackoverflow.com/users/8957217/blvck-mvgic-dot-exe","reputation":67,"display_name":"blvck_mvgic_dot_exe"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68022998/classsomeobject-is-not-a-superclass-of-classsomeobjectspecificobject","last_activity_date":1623949628,"creation_date":1623946398,"answer_count":0,"title":"Class&lt;SomeObject&lt;?&gt;&gt; is NOT a superclass of Class&lt;SomeObject&lt;SpecificObject&gt;&gt;?","body":"<p>EDIT 1: According to <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/inheritance.html\" rel=\"nofollow noreferrer\">this</a>, despite <code>SomeObject&lt;?&gt;</code> being indeed a superclass of <code>SomeObject&lt;Foo&gt;</code>, <code>Class&lt;SomeObject&lt;?&gt;&gt;</code> is NOT a superclass of <code>Class&lt;SomeObject&lt;Foo&gt;&gt;</code>. The question on how to tackle this specific problem still persists. (adding a method to the <code>Message&lt;T&gt;</code> class that returns <code>Class&lt;Message&lt;T&gt;&gt;</code>, perhaps?)</p>\n<p>Original question:</p>\n<p>So basically I have a generic <code>Message&lt;T&gt;</code> class that implements a well known design pattern called <a href=\"https://en.wikipedia.org/wiki/Command_pattern\" rel=\"nofollow noreferrer\">Command pattern</a> (with a twist: instead of building an object with a reference, the reference is passed as argument of the <code>execute(T objectToCallMethodsOn)</code>) and it looks something like this:</p>\n<pre><code>public abstract class Message&lt;T&gt; {\n    void execute(T obj); //e.g. DoSomethingOnFooMessage implements Message&lt;Foo&gt; to do something on a Foo object\n}\n</code></pre>\n<p>so that I can do something like:</p>\n<pre><code>public DoSomethingOnFooMessage implements Message&lt;Foo&gt; {\n    @Override\n    void execute(Foo obj) {\n        obj.doSomething(); //doSomething is a method of the Foo class\n    }\n}\n</code></pre>\n<p>Now, I also tried to make a MessageProcessor class with an internal map that maps (E is a type parameter) <code>Class&lt;Message&lt;E&gt;&gt;</code> to a object <code>E executableObject</code> (like Foo in the previous example) and with two methods: a handleMessage(Message&lt;?&gt; msg) that should do a dynamic instanceof of the Message (hence the need for the Class&lt;&gt; objects that let you do a dynamic instanceof and then a dynamic cast) and look for the right executableObject in the map to call the message's <code>execute(E obj)</code> on the right object (if it exists, otherwise the message is discarded), and a <code>addProcessor()</code> to add entries of e.g. <code>Class&lt;Message&lt;Foo&gt;&gt;, Foo</code> to the map:</p>\n<pre><code>public class MessageProcessor {\n    private final Map&lt;Class&lt;Message&lt;?&gt;&gt;, Object&gt; map;\n\n    public MessageProcessor() {\n        map = new HashMap&lt;&gt;();\n    }\n\n    public &lt;E&gt; void addProcessor(Class&lt;Message&lt;E&gt;&gt; messageClass, E executable) {\n        map.put(messageClass, executable);\n    }\n    ...\n}\n</code></pre>\n<p>So far that's what I wrote but the IDE complains that <code>Class&lt;Message&lt;E&gt;&gt;</code> was given but <code>Class&lt;Message&lt;?&gt;&gt;</code> was needed in <code>addProcessor()</code> and I don't know why; afaik, <code>SomeClass&lt;?&gt;</code> should be a superclass of any <code>SomeClass&lt;SpecificClass&gt;</code>, why isn't it the same for <code>Class&lt;SomeObject&lt;?&gt;&gt;</code> and <code>Class&lt;SomeObject&lt;SpecificObject&gt;&gt;</code>?</p>\n<p>Sorry for the verbose question, other than asking a thing about superclassing of generics, I am also asking you guys for (perhaps) a different, more elegant way to do what I'm trying to do, which is find the runtime class of the message so that I can call its <code>execute()</code> with the object that I registered with the <code>addProcessor()</code> as its input.</p>\n<p>Also, I reckon this could be easily solvable with raw types (ew)</p>\n","question_id":68022998,"tags":["java","generics"],"score":0,"is_answered":false,"view_count":41,"last_edit_date":1623949628},{"owner":{"profile_image":"https://www.gravatar.com/avatar/7686280776045b6d5250c0762c92ffd5?s=256&d=identicon&r=PG","account_id":135067,"user_type":"registered","user_id":337621,"link":"https://stackoverflow.com/users/337621/g%c3%a1bor-lipt%c3%a1k","reputation":9676,"display_name":"G&#225;bor Lipt&#225;k","accept_rate":70},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68014704/arraylist-does-not-satisfy-generic-serializable-list-type","last_activity_date":1623918736,"creation_date":1623914643,"answer_count":1,"title":"ArrayList does not satisfy generic serializable list type","body":"<p>Given the following java code:</p>\n<pre><code>public static &lt;I extends Serializable, L extends List&lt;I&gt; &amp; Serializable&gt; L getList() {\n    return new ArrayList&lt;I&gt;(); // &lt;-- Compile error\n}\n</code></pre>\n<p>Given that <code>ArrayList</code> do extend both <code>Serializable</code> and <code>List</code>, why does it produce a compile error?</p>\n<p><code>Incompatible types. Found: 'java.util.ArrayList&lt;I&gt;', required: 'L'</code></p>\n","question_id":68014704,"tags":["java","generics","java-5"],"score":0,"accepted_answer_id":68015730,"is_answered":true,"view_count":222,"last_edit_date":1623918728},{"owner":{"user_type":"does_not_exist","display_name":"user15554594"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68012208/implement-java-interface-to-arraylist","last_activity_date":1623914879,"creation_date":1623897799,"answer_count":2,"title":"Implement java interface to arraylist","body":"<p>I am writing a code that has an <code>ArrayList</code> of the names of dogs. An interface method allows the animals to make sounds (ex. <code>&quot;woof&quot;</code>). I have a for loop that goes through the entire array and determines if the animal says. What I am having trouble with is that the <code>obj.speak()</code> is not working. Whenever I run it, it would say the symbol is not found but I am confused as I already put it there. I am not sure how to counter this issue as I went on serval websites to find answers but they were no help. I assume that the <code>ArrayList</code> is being looped over as I put a for-loop to go through the entire thing.</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        ArrayList dogs= new ArrayList();\n        dogs.add(new Dog(&quot;Fred&quot;));\n        dogs.add(new Dog(&quot;Wanda&quot;));\n        for (Object e: dogs) {\n            e.speak();\n        }\n    }\n}\n</code></pre>\n<pre><code>interface Speak{\n    public void speak();\n}\n</code></pre>\n<pre><code>class Dog implements Speak {\n\n    private String name;\n    \n    public Dog(String name) {\n        this.name = name;\n    }\n    \n    public void speak() {\n        System.out.println(&quot;Woof&quot;);\n    }\n}\n</code></pre>\n","question_id":68012208,"tags":["java","for-loop","generics","arraylist","interface"],"score":1,"accepted_answer_id":68012279,"is_answered":true,"view_count":40,"last_edit_date":1623914879},{"owner":{"profile_image":"https://www.gravatar.com/avatar/ee963f3fa8a079129e92872cf0b25651?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":21935034,"user_type":"registered","user_id":16216427,"link":"https://stackoverflow.com/users/16216427/kumar","reputation":13,"display_name":"Kumar"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67961312/need-help-converting-javaobject-to-json-in-generic-pattern","last_activity_date":1623897988,"creation_date":1623607870,"answer_count":1,"title":"Need Help converting JavaObject To Json in Generic Pattern","body":"<p>I wrote a Generic method which works fine converting any Json object to Generic Object.</p>\n<pre><code>public &lt;T&gt; T convertJsontoObject    (String jsonObj, Class&lt;T&gt; any Type)\n             throws JsonMappingException, JsonProcessingException \n             {\n           ObjectMapper objectMap = new ObjectMapper();\n              return objectMap.readValue(jsonObj, any Type);\n\n              }   \n\n      \n</code></pre>\n<p>But has an issue while converting the Generic Object type to JSON format with the below code format. Would someone help me or guide me with related code.. I am not sure how to retain an Object from Generic class type as the method doesn't support for generic and I want to have a Generic method to perform the conversions....</p>\n<pre><code> public &lt;T&gt; String convertObjectToJson(Class&lt;T&gt; anyType) \n               { String jsonStringObj = &quot;&quot;; \n                try { jsonStringObj = new \n               ObjectMapper().writerWithDefaultPrettyPrinter().writeValueAsString(anyType);}\n                }\n\n\n\n\n             \n        \n</code></pre>\n","question_id":67961312,"tags":["java","json","algorithm","spring-boot","generics"],"score":1,"accepted_answer_id":68012167,"is_answered":true,"view_count":862},{"owner":{"profile_image":"https://www.gravatar.com/avatar/fe481db7f47e0d93d9f7ffddb7766921?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":8411714,"user_type":"registered","user_id":6313387,"link":"https://stackoverflow.com/users/6313387/student","reputation":25,"display_name":"student","accept_rate":75},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/38073420/java-instance-for-comparable","last_activity_date":1623840233,"creation_date":1467108983,"answer_count":2,"title":"Java instance for comparable","body":"<p>Why is it legal to create <code>new Box();</code> and  <code>new Box&lt;Integer&gt;();</code>? Is it because <code>Box</code> is comparable?</p>\n\n<pre><code>public class Box&lt;Comparable&gt; {\n  private boolean compareTo(Box b) {\n    return (this.y &gt; b.y);\n  }\n\n  double x=0;\n  double y=0;\n\n  public static void main (String[] args) {\n    Box a = new Box();\n    Box b = new Box&lt;Integer&gt;();\n    System.out.println(a.compareTo(b));\n  }\n}\n</code></pre>\n","question_id":38073420,"tags":["java","generics"],"score":1,"accepted_answer_id":38073499,"is_answered":true,"view_count":637,"last_edit_date":1467110237},{"owner":{"profile_image":"https://www.gravatar.com/avatar/170feed457b9f651106e6de3aed55401?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":4948185,"user_type":"registered","user_id":3983013,"link":"https://stackoverflow.com/users/3983013/piotr-michalczyk","reputation":248,"display_name":"Piotr Michalczyk","accept_rate":75},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67994018/how-parametrized-varags-functions-know-to-create-an-arrays-of-a-specific-type","last_activity_date":1623794630,"creation_date":1623794630,"answer_count":0,"title":"How parametrized varags functions know to create an arrays of a specific type","body":"<p>I am reading through Angelika Langer's JavaGenericsFAQ and I have a problem with understanding type erasure with varags function. In the FAQ the following example:</p>\n<pre><code>public static void main(String[] args) {\n    String[] strings = method_1(&quot;bad&quot;, &quot;karma&quot;); // ClassCastException\n}\n\nstatic &lt;T&gt; T[] method_1(T t1, T t2) {\n    return method_2(t1, t2);\n}\n\nstatic &lt;T&gt; T[] method_2(T... args) {\n    return args;\n}\n</code></pre>\n<p>could be roughly translated to the following after the type erasure:</p>\n<pre><code>public static void main(String[] args) {\n    String[] strings = (String[]) method_1(&quot;bad&quot;, &quot;karma&quot;);// ClassCastException\n}\n\nstatic Object[] method_1(Object t1, Object t2) {\n    return method_2(new Object[]{t1, t2});\n}\n\nstatic Object[] method_2(Object[] args) {\n    return args;\n}\n</code></pre>\n<p>This answers the question from FAQ why calling <em>method_1</em> is a bad idea (method one passes <em>T</em> type parameter which is non-reifiable and due to the type erasure the compiler does not create a <em>T[]</em>, but an <em>Object[]</em>) but that got me thinking: how Java is able to handle the following call:</p>\n<pre><code>String[] strings = method_2(&quot;good&quot;, &quot;karma&quot;);\n</code></pre>\n<p>How does <em>method_2</em> know to actually create a String[] array since type erasure took place?</p>\n","question_id":67994018,"tags":["java","generics"],"score":1,"is_answered":false,"view_count":29},{"owner":{"profile_image":"https://www.gravatar.com/avatar/2c265eecd2f7652374fe29d1d9f06fc2?s=256&d=identicon&r=PG","account_id":1535520,"user_type":"registered","user_id":1431685,"link":"https://stackoverflow.com/users/1431685/tpcordeiro","reputation":443,"display_name":"tpcordeiro","accept_rate":86},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67992546/the-method-valueofclasst-string-in-the-type-enum-is-not-applicable-for-the","last_activity_date":1623786523,"creation_date":1623786222,"answer_count":1,"title":"The method valueOf(Class&lt;T&gt;, String) in the type Enum is not applicable for the arguments (Class&lt;Enum&lt;T&gt;&gt;, String)","body":"<p>I dont know what am I doing wrong... In constructor, I wanna receive a Class of an enum, and I want to return the correct enum, when a value passed as parameter to convert().</p>\n<pre><code>public final class EnumSimplesConverter&lt;T extends Enum&lt;T&gt;&gt; {\n    private final Class&lt;Enum&lt;T&gt;&gt; enumClass;\n\n    public EnumSimplesConverter(Class&lt;Enum&lt;T&gt;&gt; enumClass) {\n        this.enumClass = enumClass;\n    }\n\n    public Enum&lt;T&gt; convert(String value) throws TypeConverterException {\n        return Enum.valueOf(this.enumClass, value);\n    }\n}\n</code></pre>\n<p>But its gives me the error on &quot;valuesOf()&quot;:<br />\n&quot;The method valueOf(Class, String) in the type Enum is not applicable for the arguments (Class&lt;Enum&gt;, String)&quot;</p>\n","question_id":67992546,"tags":["java","class","generics","enums"],"score":1,"accepted_answer_id":67992612,"is_answered":true,"view_count":761},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e68c10dd04b871753f4b58b855c15515?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":21044045,"user_type":"registered","user_id":16234460,"link":"https://stackoverflow.com/users/16234460/iamyourfaja","reputation":39,"display_name":"IamYourFaja"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67988538/java-8-lists-containing-generics-of-mixed-but-inheritance-related-types","last_activity_date":1623785809,"creation_date":1623768416,"answer_count":1,"title":"Java 8 lists containing generics of mixed (but inheritance-related) types","body":"<p>Java 8 here, seeing inexplicable compiler errors regarding generics.</p>\n<p>I have <code>RunnableRule</code>:</p>\n<pre><code>public interface RunnableRule&lt;INPUT,OUTPUT&gt; {\n    OUTPUT execute(INPUT input, OUTPUT previousOutput);\n}\n</code></pre>\n<p>And then <code>AbstractRuleRunner</code>:</p>\n<pre><code>public abstract class AbstractBaseRuleRunner&lt;INPUT,OUTPUT&gt; {\n\n    private List&lt;RunnableRule&lt;INPUT,OUTPUT&gt;&gt; rules;\n\n    public AbstractBaseRuleRunner(List&lt;RunnableRule&lt;INPUT, OUTPUT&gt;&gt; rules) {\n        this.rules = rules;\n    }\n\n    protected abstract OUTPUT initOutput();\n\n    public OUTPUT runRules(INPUT input) {\n\n        OUTPUT output = null;\n        for (RunnableRule&lt;INPUT,OUTPUT&gt; rule : rules) {\n\n            if (output == null) {\n                output = initOutput();\n            }\n\n            output = rule.execute(input, output);\n\n        }\n\n        return output;\n\n    }\n\n\n}\n</code></pre>\n<p>Then some beans:</p>\n<pre><code>public interface HasPlaintextPassword {\n    String getPlaintextPassword();\n}\n\n@Data\npublic class SignUpRequest implements HasPlaintextPassword {\n\n    @NotNull\n    private String email;\n\n    @NotNull\n    private String password;\n\n    @NotNull\n    private String appRefId;\n\n    private boolean ackTerms;\n\n    @Override\n    public String getPlaintextPassword() {\n        return getPassword();\n    }\n\n}\n</code></pre>\n<p>Finally a concrete implementation of my rules runner:</p>\n<pre><code>public class SignUpValidationRulesRunner extends AbstractBaseRuleRunner&lt;HasPlaintextPassword, ValidationReport&gt; {\n\n    public SignUpValidationRulesRunner(List&lt;RunnableRule&lt;HasPlaintextPassword, ValidationReport&gt;&gt; runnableRules) {\n        super(runnableRules);\n    }\n\n    @Override\n    protected ValidationReport initOutput() {\n        return new ValidationReport();\n    }\n\n}\n</code></pre>\n<p>A concrete runnable rule:</p>\n<pre><code>public class AcksTermsSignUpRule implements RunnableRule&lt;SignUpRequest, ValidationReport&gt;, RuleConstants {\n\n    @Override\n    public ValidationReport execute(SignUpRequest signUpRequest, ValidationReport previousOutput) {\n\n        if (!signUpRequest.isAckTerms()) {\n            previousOutput.getErrors().add(MUST_ACK_TERMS_ERROR);\n        }\n\n        return previousOutput;\n\n    }\n\n}\n</code></pre>\n<p>Some rules will accept <code>SignupRequest</code> as input because they need to use certain properties that are on a <code>SignUpRequest</code>, and some rules just need to accept a <code>HasPlaintextPassword</code> as input because they are just inspecting the password property.</p>\n<p>And finally some glue to stick it all together:</p>\n<pre><code>List&lt;RunnableRule&lt;HasPlaintextPassword, ValidationReport&gt;&gt; signUpValidationRules = new ArrayList&lt;&gt;();\nAcksTermsSignUpRule acksTermsSignUpRule = new AcksTermsSignUpRule();\n\nsignUpValidationRules.add(acksTermsSignUpRule);\n</code></pre>\n<p>Here I get a compiler error on <code>signUpValidationRules.add(acksTermsSignUpRule)</code> stating that the required type is <code>RunnableRule</code> but only a <code>AcksTermsSignUpRule</code> is provided.</p>\n<p>What can I do to make it so that my list of rules accepts either <code>HasPlaintextPassword</code> or <code>SignUpRequest</code> as the input generic parameter? Because I need to combine rules of either input type inside the same list.</p>\n","question_id":67988538,"tags":["java","generics","java-8"],"score":2,"accepted_answer_id":67992459,"is_answered":true,"view_count":70,"last_edit_date":1623772725},{"owner":{"profile_image":"https://www.gravatar.com/avatar/f1bd69cebf66ea4f3adda4dc2ad7eaf2?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":21743842,"user_type":"registered","user_id":16050820,"link":"https://stackoverflow.com/users/16050820/eternalapprentice","reputation":1,"display_name":"EternalApprentice"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/67984247/how-to-assign-a-method-as-an-attribute-to-use-it-later-on-any-compatible-object","last_activity_date":1623751908,"creation_date":1623751772,"answer_count":0,"title":"How to assign a method as an attribute to use it later on any compatible object?","body":"<p>I am trying to create a generic menu over an arbitrary type <code>T</code> implementing a <code>Menuable</code> interface:</p>\n<pre><code>public interface Procedure {\n    void invoke();\n}\n\npublic class Menu&lt;T extends Menuable&gt; implements Menuable {\n    List&lt;T&gt; items; //The items of the menu\n    List&lt;String&gt; itemsDisplay; //A list of String specifying how to display each of the above items\n    Procedure procedure; //A method to be performed on the elements of items\n\n    public Menu(List&lt;T&gt; items, List&lt;String&gt; itemsDisplay) {\n        this.items = items;\n        this.itemsDisplay = itemsDisplay;\n    }\n\n    //Returns a String display of the menu\n    //Each item is numbered and displayed as specified by the list itemsDisplay\n    public String menuDisplay() {\n\n        String s = &quot;&quot;;\n        \n        int i;\n        for (i = 1; i &lt;= this.itemsDisplay.size(); i++) {\n            s = s + i + &quot;\\t&quot; + this.itemsDisplay.get(i-1) + &quot;\\n&quot;;\n        }\n  \n    return s;\n    }\n    ...\n}\n</code></pre>\n<p>The menu will be printed on a terminal, and when the user chooses an item, I would like the menu to be able to perform any instance method on this item. Basically, here is what I would like to do:</p>\n<pre><code>public Menu(List&lt;T&gt; items, List&lt;String&gt; itemsDisplay, Procedure procedure) {\n    this.items = items;\n    this.itemsDisplay = itemsDisplay;\n    Here I would like to assign a method to this.procedure for later use,\n    but without specifying on which object to use it yet.\n}\n\npublic void waitForAction() throws IOException {\n        \n    //Display the menu to the user\n    System.out.println(this.menuDisplay());\n    \n    BufferedReader inputs = new BufferedReader(new InputStreamReader(System.in));\n\n    int choice = 0;\n    //Read inputs until the user enters a valid choice\n    while(!(1 &lt;= choice &amp;&amp; choice &lt;= this.items.size())) {\n\n        try {\n            choice = Integer.parseInt(inputs.readLine());\n        } catch(NumberFormatException e) {\n        }\n    }\n\n    //The item selected is at index (choice - 1) in the list this.items\n    Here I would like to use my method on this.items.get(choice - 1).\n}\n</code></pre>\n<p>I am new to the idea of using methods as variables / arguments and I don't know how to do that. I heard about lambda expressions and method references in Java, but from what I understood, when using them you have to specify the method you want to use and its instance / parameters at the same time, which is awkward. Am I missing something ?</p>\n","question_id":67984247,"tags":["java","generics","method-reference"],"score":0,"is_answered":false,"view_count":138,"last_edit_date":1623751908},{"owner":{"profile_image":"https://www.gravatar.com/avatar/ac076b43fde824115ca0651c302440cc?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":20379636,"user_type":"registered","user_id":14950030,"link":"https://stackoverflow.com/users/14950030/nhnkrpzoglu","reputation":13,"display_name":"nhnkrpzoglu"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/65592052/sending-a-generic-class-object-to-a-generic-method-java","last_activity_date":1609920890,"creation_date":1609919629,"answer_count":1,"title":"sending a generic class object to a generic method (java)","body":"<p>I have a class named <code>InstanceClass</code> as follows:</p>\n<pre><code>package trials;\n\npublic class InstanceClass&lt;T&gt;  {\n\n    private T num;\n\n    public void calculate() {\n        System.out.printf(&quot;%s&quot;, num);\n    }\n    public T getNum() {\n        return num;\n    }\n\n    public void setNum(T num) {\n        this.num = num;\n    }\n\n    public InstanceClass(T num) {\n        super();\n        this.num = num;\n    }\n}\n</code></pre>\n<p>and <code>Trial</code> class in which the main method located as follows:</p>\n<pre><code>package trials;\n\npublic class TrialClass {\n\n    public static void main(String[] args) {\n\n        InstanceClass&lt;Integer&gt; my=new InstanceClass&lt;&gt;(2);\n        InstanceClass&lt;InstanceClass&lt;Integer&gt;&gt; x=new InstanceClass&lt;&gt;(my);\n        prt(x.getNum());\n    }\n    \n    public static &lt;T extends InstanceClass&lt;Integer&gt;&gt; void prt(T q) {\n        System.out.printf(&quot;%s%n&quot;,q.getNum());\n        q.calculate();\n    }\n}\n</code></pre>\n<p>So, I want to know why can't we simply use &lt;T&gt; instead of &lt;T extends InstanceClass&lt;Integer&gt;&gt; in the method prt's declaration.</p>\n","question_id":65592052,"tags":["java","generics","type-parameter","generic-method"],"score":1,"accepted_answer_id":65592093,"is_answered":true,"view_count":269,"last_edit_date":1609920890},{"owner":{"profile_image":"https://www.gravatar.com/avatar/9cfd9fa0ebca794a68bbba7ee3a794b0?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":3959431,"user_type":"registered","user_id":3266941,"link":"https://stackoverflow.com/users/3266941/milton","reputation":46,"display_name":"Milton"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/65589741/is-it-possible-to-obtain-the-generic-type-of-an-interface","last_activity_date":1609904070,"creation_date":1609903135,"answer_count":1,"title":"Is it possible to obtain the generic type of an interface?","body":"<p>Given the interface:</p>\n<pre><code>interface GenericInterface&lt;T&gt; {\n  Class&lt;T&gt; getGenericType();\n}\n</code></pre>\n<p>and the following implementation &quot;skeletons&quot;:</p>\n<pre><code>class GenericInterfaceImpl&lt;T&gt; implements GenericInterface&lt;T&gt; { /* impl */ }\n\nclass TypedInterfaceImpl implements GenericInterface&lt;String&gt; { /* impl */ }\n</code></pre>\n<p>define an implementation for <code>getGenericType</code> in a manner that it would pass the following assertions:</p>\n<pre><code>assertEquals(new GenericInterfaceImpl&lt;String&gt;().getGenericType(), String.class, &quot;Type should resolve to String.class&quot;);\n\nassertEquals(new TypedInterfaceImpl().getGenericType(), String.class, &quot;Type should resolve to String.class&quot;);\n</code></pre>\n<p>I'm perfectly aware of a good implementation that solves this problem on the <code>TypedInterfaceImpl</code> &quot;scenario&quot;. The following code passes the assertion for the second case:</p>\n<pre><code>@Override\n@SuppressWarnings(&quot;unchecked&quot;)\nClass&lt;T&gt; getGenericType() {\n    Type t = this.getClass().getGenericInterfaces()[0];\n    ParameterizedType pt = (ParameterizedType) t;\n\n    return (Class&lt;T&gt;) pt.getActualTypeArguments()[0];\n}\n</code></pre>\n<p>But I can't find a way to get the same result if I'm working with the <code>GenericInterfaceImpl</code> version of this problem. When using the above implementation with <code>GenericInterfaceImpl</code>, the &quot;type argument&quot; resolves to a <code>sun.reflect.generics.reflectiveObjects.TypeVariableImpl</code> instead of <code>java.lang.String</code> like it does when handling <code>TypedInterfaceImpl</code>.</p>\n<p>The Javadocs for <code>getGenericInterfaces</code> explicitly states that it will not resolve type parameters if it's not defined in the source code (for reference: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getGenericInterfaces--\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#getGenericInterfaces--</a> I'm using Java 11 in my particular case but it's the same nonetheless), so by definition, I understand that this particular method can't solve this problem.</p>\n<p>Is there a way to solve this problem at all or is this a &quot;core limitation&quot; of the Java language?</p>\n","question_id":65589741,"tags":["java","generics","reflection"],"score":2,"is_answered":true,"view_count":108},{"owner":{"profile_image":"https://lh3.googleusercontent.com/-E5SknTsb36Q/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3red2UnQtyNjNwQo0PJLdB2QG4_zmQ/photo.jpg?sz=256","account_id":17027980,"user_type":"registered","user_id":14735870,"link":"https://stackoverflow.com/users/14735870/manikandan-kk","reputation":1,"display_name":"Manikandan kk"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/65583228/return-type-of-get-class-method-is-different-from-actual-returntype","last_activity_date":1609867103,"creation_date":1609865715,"answer_count":2,"title":"Return type of get Class method is different from actual returntype","body":"<p>When I created a instance of a class A and tried to access its getClass() method, its return type is different than what is mentioned in java Object class.</p>\n<pre><code>A a = new A() ;\nClass&lt;? extends A&gt; clazz = a.getClass();\n</code></pre>\n<p>Even when I access the getClass method as mentioned above in Intellij, it says its return type is <code>Class&lt;? extends A&gt; </code>and even the java doc says it returns wildcard extends  upper bound. I can totally accept it. Because I can create instance of B and reference to A and access getClass method.</p>\n<p>But why does the return type of the getClass method is just<code>Class&lt;?&gt;</code> in the Object class</p>\n<p>Edit 1 (After the comment from Andy Turner)</p>\n<pre><code>Class A {\n   List&lt;?&gt; returningNullList() {\n     return null;\n   } \n} \n</code></pre>\n<p>When I create a instance of A , and tried to access returningNullList () method, it didn't give me return type as <code>List&lt;? extends A&gt;</code>. But when I tried to access getClass method it says return type is <code>Class&lt;? extends A&gt;</code> although the actual hard-coded return type is <code>Class&lt;? &gt;</code> in Object.java file</p>\n<p>Is the getClass method is treated specially by compiler?</p>\n","question_id":65583228,"tags":["java","object","generics","wildcard","return-type"],"score":-2,"accepted_answer_id":65583567,"is_answered":true,"view_count":105,"last_edit_date":1609866266},{"owner":{"profile_image":"https://www.gravatar.com/avatar/7bcc5c9f9afbddfb706ddffde17145f0?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":5851066,"user_type":"registered","user_id":4609725,"link":"https://stackoverflow.com/users/4609725/robyp7","reputation":479,"display_name":"robyp7","accept_rate":43},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/65505831/quarkus-illegalstateexception-unable-to-construct-the-type-handle-for-class-be","last_activity_date":1609864514,"creation_date":1609325758,"answer_count":1,"title":"Quarkus: IllegalStateException: Unable to construct the type handle for CLASS bean","body":"<p>I am running the quarkus application using <code>mvn compile quarkus:dev</code> and getting below error:</p>\n<pre><code>Caused by: java.lang.IllegalStateException: Unable to construct the type handle for CLASS bean [types=[org.acme.dao.DaoManager&lt;T extends org.acme.entities.IEntity, I extends java.io.Serializable&gt;, java.lang.Object, org.acme.dao.IDao&lt;T extends org.acme.entities.IEntity, I extends java.io.Serializable&gt;], qualifiers=[@Default, @Any], target=org.acme.dao.DaoManager]: Unsupported bean type: UNRESOLVED_TYPE_VARIABLE, I\n</code></pre>\n<p>I have made a generic DAO class that implements a generic Interface IDAO, IDAO accepts only JPA entity marked with T extends IEntity\n(note: I extends Serializable!)\nBean is marked with ApplicationScoped because include @Inject EntityManager\n:</p>\n<pre><code>import org.acme.entities.IEntity;\nimport javax.enterprise.context.ApplicationScoped;\nimport javax.inject.Inject;\nimport javax.persistence.EntityManager;\nimport java.io.Serializable;\n\n@ApplicationScoped\npublic class DaoManager&lt;T extends IEntity&lt;I&gt;, I extends Serializable&gt; implements IDao&lt;T,I&gt; {\n\n    @Inject\n    private EntityManager entityManager;\n\n\n    public &lt;T&gt; void save(T entity){\n        entityManager.persist(entity);\n    }\n}\n\npublic interface IEntity&lt;I extends Serializable&gt; extends Serializable {\n}\n\npublic interface IDao&lt;T extends IEntity&lt;I&gt;, I extends Serializable&gt; {\n\n    &lt;T&gt; void save(T entity);\n\n}\n</code></pre>\n<p>Please suggest.</p>\n","question_id":65505831,"tags":["java","jpa","generics","quarkus"],"score":0,"is_answered":false,"view_count":372,"last_edit_date":1609340893},{"owner":{"profile_image":"https://i.stack.imgur.com/eR09c.jpg?s=256&g=1","account_id":13177411,"user_type":"registered","user_id":9517937,"link":"https://stackoverflow.com/users/9517937/sdindiver","reputation":501,"display_name":"sdindiver"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/65414023/why-is-there-generic-mismatch-for-input-arguments-of-two-api-of-collections","last_activity_date":1609843174,"creation_date":1608661967,"answer_count":3,"title":"Why is there Generic mismatch for input arguments of two API of collections","body":"<p>I was looking at generic methods of Collections class</p>\n<pre><code>public static &lt;T&gt; void sort(List&lt;T&gt; list, Comparator&lt;? super T&gt; c) {\n        list.sort(c);\n}\n</code></pre>\n<p>and other method is</p>\n<pre><code> public static &lt;T&gt; int binarySearch(List&lt;? extends T&gt; list, T key, Comparator&lt;? super T&gt; c) {\n        if (c==null)\n            return binarySearch((List&lt;? extends Comparable&lt;? super T&gt;&gt;) list, key);\n\n        if (list instanceof RandomAccess || list.size()&lt;BINARYSEARCH_THRESHOLD)\n            return Collections.indexedBinarySearch(list, key, c);\n        else\n            return Collections.iteratorBinarySearch(list, key, c);\n    }\n</code></pre>\n<p>My question is why sort method is design only for <code>List&lt;T&gt;</code> not for <code>List&lt;? extends T&gt;</code> as binary search is designed for  <code>List&lt;? extends T&gt;</code>?</p>\n","question_id":65414023,"tags":["java","generics"],"score":0,"is_answered":true,"view_count":79,"last_edit_date":1609843161},{"owner":{"profile_image":"https://www.gravatar.com/avatar/8bcbc65f858cabe730be56b548264741?s=256&d=identicon&r=PG","account_id":1648985,"user_type":"registered","user_id":1519924,"link":"https://stackoverflow.com/users/1519924/beau-johnny-bekkestad","reputation":381,"display_name":"Beau Johnny Bekkestad","accept_rate":64},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/18267714/variable-length-generic-types","last_activity_date":1609779027,"creation_date":1376636916,"answer_count":3,"title":"variable length generic types","body":"<p>i want to do something like this, anyone done something similar?\nI have one solution map that has two keys, i am using it for geolocation, but i would like to make it with n number of keys instead.</p>\n\n<pre><code>import java.util.Collection;\nimport java.util.Set;\n\npublic interface NKeyMap&lt;K..., V&gt; {\n    public void clear();\n    public boolean containsKey(K...);\n    public boolean containsValue(V value);\n    public V get(K...);\n    public boolean isEmpty();\n    public V put(K..., V value);\n    public V removeK..., V value);\n    public int size();\n    public Collection&lt;V&gt; values();\n    public Set&lt;K...&gt; keys();\n}\n</code></pre>\n","question_id":18267714,"tags":["java","generics"],"score":3,"accepted_answer_id":18267879,"is_answered":true,"view_count":2646},{"owner":{"profile_image":"https://i.stack.imgur.com/GWEWt.gif?s=256&g=1","account_id":173557,"user_type":"registered","user_id":402322,"link":"https://stackoverflow.com/users/402322/ceving","reputation":22258,"display_name":"ceving","accept_rate":67},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/19051021/how-to-test-for-equivalence-in-a-generic-class","last_activity_date":1609743949,"creation_date":1380285624,"answer_count":1,"title":"How to test for equivalence in a generic class?","body":"<p><a href=\"https://en.wikipedia.org/wiki/Scheme_%28programming_language%29\" rel=\"nofollow noreferrer\">Scheme</a> knows three different equivalence operators: <code>eq?</code>, <code>eqv?</code>, <code>equal?</code>. Sere <a href=\"https://stackoverflow.com/q/16299246/402322\">here</a> for details. In short: <code>eq?</code> tests references, <code>eqv?</code> tests values and <code>equal?</code> recursively tests the values of lists. I would like to write a Java generic which needs the functionality of Scheme´s <code>equal?</code>.</p>\n\n<p>I tried to use Java´s <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals%28java.lang.Object%29\" rel=\"nofollow noreferrer\">equals()</a> method, because I thought it does a value comparison, because for a reference comparison the <code>==</code> operator exists and there is no need for <code>equals</code> to do the same. But this assumption is completely wrong, because <code>equals</code> in Java is completely unreliable. Sometimes it does a value comparison and sometimes it does a reference comparison. And one can not be sure which class does a reference comparison and which class does a value comparison.</p>\n\n<p>This means that <code>equals</code> can not be used in a generic, because the generic would not do the same for all types. And it is also not possible to restrict the generic type in a way that only types are acceptable which implement the correct value comparison.</p>\n\n<p>So the question is: how to do a reliable value comparison in a generic? Do I have to write it on my own from scratch?</p>\n\n<p>By the way: I think Java´s equal failure does not start with <a href=\"https://stackoverflow.com/a/8777266/402322\">Array</a>. It starts already with Object. I think it is wrong that <code>equals</code> for two objects returns <code>false</code>. It must return <code>true</code>, because if you do a value comparison of something which does not have a value the values can not differ and therefor they must be the same. Scheme does it in that way and it is perfectly reasonable: <code>(equal? (vector) (vector)) -&gt; #t</code>.</p>\n","question_id":19051021,"tags":["java","generics","scheme","equality"],"score":0,"is_answered":false,"view_count":467,"last_edit_date":1495535137},{"owner":{"profile_image":"https://graph.facebook.com/2006365462920236/picture?type=large","account_id":13055145,"user_type":"registered","user_id":9434244,"link":"https://stackoverflow.com/users/9434244/martin-clever","reputation":147,"display_name":"Martin Clever"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/65548166/static-variables-within-abstract-generic-class","last_activity_date":1609686639,"creation_date":1609664811,"answer_count":0,"title":"Static variables within abstract generic class","body":"<p>I want to implement a variable which is static for each implementation of an abstract, generic class.\nFor example, I have the class...</p>\n<pre><code>public abstract class A&lt;T&gt;{\n   ...\n}\n</code></pre>\n<p>...and some implementations of A...</p>\n<pre><code>public class Imp1 extends A&lt;Imp1&gt;{\n   static Imp1 myVar;\n   ...\n}\npublic class Imp2 extends A&lt;Imp2&gt;{\n   static Imp2 myVar;\n   ...\n}\n...\n</code></pre>\n<p>Is there any Keyword to implement myVar of Typ T in the abstract Class A? If I implement it as a static variable, it would give a TypeError since statics can't have the type T in abstract classes. If I implement it as an abstract, I can't call it from a static context like Imp1.myVar ... I don't think this is a duplicate of <a href=\"https://stackoverflow.com/questions/8198443/static-variable-in-an-abstract-generic-class\">this Question</a>, though I have to admit I did not quite understand it.</p>\n<p>--EDIT--<br />\nSince it has been pointed out that this might be an XY-Problem and the answer seems to be that my approach can not be implemented, I'll try to describe the problem as a whole and try to work out how it should have been solved. Maybe this will help people restructure their code if they run into the same problem.<br />\nI wrote a class for my own datatype &quot;Polynom&quot; (mostly for practice and fun) with a couple of methods (add, multiply, divide, etc.). It is mainly based on a coefficient-list of doubles. Now, I wanted to change it, so a generic datatype could be used. I implemented an abstract class with all the required methods (adding, comparing, multiplying, calculating inverse, etc.). One of these is, that the datatype has a &quot;neutral element&quot;, an element which has no effect on addition/multiplication. For example, if you implement real numbers, the neutral element should be 1 and 0. And this was the point I struggled with. At the moment I implemented the neural Element as a parameter for the polynomial-class, but I want to write other datatypes which also use generics and don't want to add them every time as parameter since they don't really belong there. I hope this was somewhat understandable, I'm happy to update the question further if it isn't.</p>\n","question_id":65548166,"tags":["java","generics","abstract-class"],"score":0,"is_answered":false,"view_count":308,"last_edit_date":1609686639},{"owner":{"profile_image":"https://graph.facebook.com/2006365462920236/picture?type=large","account_id":13055145,"user_type":"registered","user_id":9434244,"link":"https://stackoverflow.com/users/9434244/martin-clever","reputation":147,"display_name":"Martin Clever"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/65541924/how-can-a-generic-type-within-a-generic-type-be-accessed","last_activity_date":1609665056,"creation_date":1609607969,"answer_count":1,"title":"How can a generic type within a generic type be accessed?","body":"<p>Say I have an abstract class A</p>\n<pre><code>public abstract class A&lt;T extends SomeClass, R extends SomeClass&gt; {\n...\n}\n</code></pre>\n<p>And I have another class B</p>\n<pre><code>public class B&lt;S extends A&gt; {\n...\n}\n</code></pre>\n<p>How can I access T and R within B?\nWhen I try</p>\n<pre><code>public class B&lt;F,G,S extends A&lt;F,G&gt;&gt; {\n</code></pre>\n<p>It gives the Error</p>\n<pre><code>error: type argument K#1 is not within bounds of type-variable K#2\npublic class B&lt;F,G,S extends A&lt;F,G&gt;&gt; {\n                                    ^\nwhere K#1,K#2 are type-variables:\nK#1 extends Object declared in class B\nK#2 extends SomeClass declared in class A\n</code></pre>\n","question_id":65541924,"tags":["java","generics","extends"],"score":0,"accepted_answer_id":65548194,"is_answered":true,"view_count":66,"last_edit_date":1609608738},{"owner":{"profile_image":"https://www.gravatar.com/avatar/8f8f46ffe77e26a50b157c6aad9201f9?s=256&d=identicon&r=PG","account_id":1684128,"user_type":"registered","user_id":2103678,"link":"https://stackoverflow.com/users/2103678/skiaddict1","reputation":525,"display_name":"skiaddict1","accept_rate":83},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64888934/java-generics-how-to-solve-warning-on-call-to-jcombobox-setrenderer","last_activity_date":1609634511,"creation_date":1605685409,"answer_count":1,"title":"Java Generics: how to solve warning on call to JComboBox.setRenderer","body":"<p>Coming back to Java after a multi-year hiatus, and partway through adding some code to an inhouse library.  The class in question is an extension of JComboBox, which ensures that disabled items are greyed out and unselectable.  Some of the code is based on that found at <a href=\"https://www.algosome.com/articles/enable-disable-jcombobox.html\" rel=\"nofollow noreferrer\">https://www.algosome.com/articles/enable-disable-jcombobox.html</a>.  The idea is that we have (1) a data model which ensures that only enabled items may be selected, and (2) a custom renderer which shows disabled items greyed out:</p>\n<p><a href=\"https://i.stack.imgur.com/IlCT0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IlCT0.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/J0ZmN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J0ZmN.png\" alt=\"enter image description here\" /></a></p>\n<p>The code is working, but the compiler isn't completely happy with my generics.  I'd really rather have a happy compiler, but I'm out of ideas as to how to achieve that in this case.  Below is an SSCCE, which produces the above combo box.  My apologies for the length; this really is the shortest I could get it.  The outer class contains several inner classes; all the classes that will live in the library have <code>Lib</code> prepended to their names; <code>MyComboBox</code> is simply there to demonstrate the code.</p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport javax.swing.plaf.basic.BasicComboBoxRenderer;\n\npublic class SSCCE extends JPanel\n{\n    //--------------------LIB CB ITEM--------------------------------------------------\n    private class LibCBItem extends JMenuItem\n    {\n        private LibCB myComboBox;\n\n        LibCBItem(String title, LibCB parent)\n        {\n            super(title);\n            myComboBox = parent;\n        }\n\n        public void setEnabled(boolean b)\n        {\n            boolean changeSelection = false;\n\n            if (!b &amp;&amp; isEnabled() &amp;&amp; this.equals(myComboBox.getSelectedItem())) {\n                int enabledCount = myComboBox.getEnabledItemCount();\n                if (enabledCount == 2)\n                    changeSelection = true;\n                else if (enabledCount == 1)\n                    System.out.println(&quot;setEnabled(FALSE) on final remaining enabled item&quot;);\n                else\n                    System.out.println(&quot;setEnabled(FALSE) of selected item with &quot; + enabledCount + &quot; enabled items: must change selection before disabling&quot;);\n            }\n\n            super.setEnabled(b);\n\n            if (changeSelection)\n                myComboBox.selectEnabledItem();\n        }\n\n        public String toString()\n        {\n            return getText();\n        }\n    }\n\n    //--------------------LIB CB DATA MODEL--------------------------------------------------\n    private class LibCBDataModel&lt;T extends LibCBItem&gt; extends DefaultComboBoxModel&lt;T&gt;\n    {\n        public void setSelectedItem(Object o)\n        {\n            LibCBItem item = (LibCBItem) o;\n            if (item != null) {\n                if (item.isEnabled())\n                    super.setSelectedItem(item);\n            }\n            else {\n                super.setSelectedItem(null);\n            }\n        }\n    }\n\n    //--------------------LIB CB RENDERER--------------------------------------------------\n    private class LibCBRenderer extends BasicComboBoxRenderer\n    {\n        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus)\n        {\n            JLabel c = (JLabel) super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);\n            LibCBItem item = (LibCBItem) value;\n            if (item.isEnabled()) {\n                c.setBackground(super.getBackground());\n                c.setForeground(super.getForeground());\n                if (isSelected) // is the mouse over it?\n                    c.setText(&quot;√ &quot; + c.getText());\n                else\n                    c.setText(&quot;    &quot; + c.getText());\n            }\n            else {\n                if (isSelected) // is the mouse over it?\n                    c.setBackground(UIManager.getColor(&quot;ComboBox.background&quot;));\n                else\n                    c.setBackground(super.getBackground());\n\n                c.setForeground(Color.lightGray);\n\n                c.setText(&quot;    &quot; + c.getText());\n            }\n            return c;\n        }\n    }\n\n    //--------------------LIB CB--------------------------------------------------\n    private class LibCB&lt;T extends LibCBItem&gt; extends JComboBox&lt;T&gt;\n    {\n        LibCB()\n        {\n            super();\n            setModel(new LibCBDataModel&lt;&gt;());\n            setRenderer(new LibCBRenderer());\n            //Warning:(127, 36) java: unchecked method invocation: method setRenderer in class javax.swing.JComboBox is applied to given types\n            //  required:\n            //    javax.swing.ListCellRenderer&lt;? super E&gt;\n            //  found:\n            //    SSCCE.LibCBRenderer\n            //Warning:(127, 37) java: unchecked conversion\n            //  required:\n            //    javax.swing.ListCellRenderer&lt;? super E&gt;\n            //  found:\n            //    SSCCE.LibCBRenderer\n        }\n\n        int getEnabledItemCount()\n        {\n            int returnVal = 0;\n            for (int i = 0; i &lt; getItemCount(); i++) {\n                if (getItemAt(i).isEnabled())\n                    returnVal++;\n            }\n            return returnVal;\n        }\n\n        void selectEnabledItem()\n        {\n            boolean selectedOne = false;\n            for (int i = 0; i &lt; getItemCount(); i++) {\n                if (getItemAt(i).isEnabled()) {\n                    setSelectedIndex(i);\n                    selectedOne = true;\n                    break;\n                }\n            }\n            if (!selectedOne)\n                System.out.println(&quot;selectEnabledItem() with 0 enabled items in combo box&quot;);\n        }\n    }\n\n    //--------------------MY COMBO BOX--------------------------------------------------\n    private class MyComboBox extends LibCB&lt;LibCBItem&gt;\n    {\n        MyComboBox()\n        {\n            LibCBItem item1 = new LibCBItem(&quot;1st&quot;, this);\n            addItem(item1);\n            LibCBItem item2 = new LibCBItem(&quot;2nd&quot;, this);\n            addItem(item2);\n            LibCBItem item3 = new LibCBItem(&quot;3rd&quot;, this);\n            addItem(item3);\n\n            item2.setEnabled(false);\n        }\n    }\n\n    //--------------------SSCCE--------------------------------------------------\n    SSCCE()\n    {\n        JFrame frame = new JFrame(&quot;SSCCE&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        setOpaque(true);\n        frame.setContentPane(this);\n        frame.add(new MyComboBox());\n        frame.pack();\n        frame.setVisible(true);\n    }\n\n    public static void main(String[] args)\n    {\n        javax.swing.SwingUtilities.invokeLater(() -&gt; new SSCCE());\n    }\n}\n</code></pre>\n<p>The compiler is giving me two warnings on the same line, in <code>LibCB()</code> where it calls <code>JComboBox.setRenderer()</code>.  I've pasted the text of the warnings inline.  Here it is for ease of reference:</p>\n<pre><code>Warning:(127, 36) java: unchecked method invocation: method setRenderer in class javax.swing.JComboBox is applied to given types\n  required:\n    javax.swing.ListCellRenderer&lt;? super E&gt;\n  found:\n    SSCCE.LibCBRenderer\nWarning:(127, 37) java: unchecked conversion\n  required:\n    javax.swing.ListCellRenderer&lt;? super E&gt;\n  found:\n    SSCCE.LibCBRenderer\n</code></pre>\n<p>Is someone able to point me in the direction of resolving these and getting the compiler happy?  Java 8, in case it makes a difference.  Many thanks!</p>\n","question_id":64888934,"tags":["java","generics","compiler-warnings"],"score":0,"is_answered":false,"view_count":216},{"owner":{"profile_image":"https://i.stack.imgur.com/QYKmT.png?s=256&g=1","account_id":16084612,"user_type":"registered","user_id":11834812,"link":"https://stackoverflow.com/users/11834812/ombrelin","reputation":567,"display_name":"Ombrelin"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59335819/in-java-how-to-let-child-class-decide-of-which-type-parameter-class-use-as-over","last_activity_date":1597626703,"creation_date":1576332089,"answer_count":1,"title":"In Java, how to let child class decide of which type parameter class use as overridden method argument?","body":"<p>I have an abstract class in which I want to have an abstract method taking in argument a Consumer functional interface and let the child class decide which type should parameterize the consumer.</p>\n<p>I tried it that way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void show(Consumer&lt;?&gt; validationHandler) {\n    this.validationHandler = validationHandler;\n    stage.show();\n}\n</code></pre>\n<p>But in the child class, it says that it isn't a correct override:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void show(Consumer&lt;Protection&gt; validationHandler) {\n    super.show(validationHandler);\n}\n</code></pre>\n<p>My goal is to be able to call this method on a child instance and having the correct type provided in my consumer lambda that I will pass.</p>\n<p>Do you have any idea how to proceed?</p>\n","question_id":59335819,"tags":["java","generics","inheritance","overriding","functional-interface"],"score":0,"accepted_answer_id":59335900,"is_answered":true,"view_count":666,"last_edit_date":1597626703},{"owner":{"profile_image":"https://www.gravatar.com/avatar/546961777c8d655b9c8b30c81d51249b?s=256&d=identicon&r=PG","account_id":668913,"user_type":"unregistered","user_id":520685,"link":"https://stackoverflow.com/users/520685/alexs","reputation":635,"display_name":"Alexs"},"content_license":"CC BY-SA 2.5","link":"https://stackoverflow.com/questions/4288084/how-to-convert-liststring-to-listobject","last_activity_date":1597606010,"creation_date":1290799963,"answer_count":7,"title":"How to Convert List&lt;String&gt; to List&lt;Object&gt;","body":"<p>I want to convert <code>List&lt;String&gt;</code> to <code>List&lt;Object&gt;</code>.</p>\n\n<p>One of the existing methods is returning <code>List&lt;String&gt;</code> and I want to convert it to <code>List&lt;Object&gt;</code>.\nIs there a direct way in Java other then iterating over and converting element by element?</p>\n","question_id":4288084,"tags":["java","generics"],"score":57,"accepted_answer_id":4288124,"is_answered":true,"view_count":141992,"last_edit_date":1290800481},{"owner":{"profile_image":"https://www.gravatar.com/avatar/76116ff479b812a6532252da086f2ebe?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":2360496,"user_type":"registered","user_id":2067264,"link":"https://stackoverflow.com/users/2067264/drunken-daddy","reputation":7506,"display_name":"Drunken Daddy","accept_rate":67},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63437899/how-to-get-type-and-generic-type-from-javax-lang-model-variableelement","last_activity_date":1597600350,"creation_date":1597587074,"answer_count":1,"title":"How to get type and generic type from javax.lang.model.VariableElement?","body":"<p>I'm using annotation processing and javapoet library to generate some source code.</p>\n<p>Say, I've a</p>\n<pre><code>VariableElement fieldElement\n</code></pre>\n<p>and if</p>\n<pre><code>System.out.println(&quot;type:- &quot; + fieldElement.asType().toString());\n</code></pre>\n<p>prints</p>\n<blockquote>\n<p>type:- java.util.Set&lt;com.example.demo.test.model.User&gt;</p>\n</blockquote>\n<p>How do I get the Set class and User class so I can do something like this with javapoet?</p>\n<pre><code>ClassName user = ClassName.get(&quot;com.example.demo.test.model&quot;, &quot;User&quot;);\nClassName set = ClassName.get(&quot;java.util&quot;, &quot;Set&quot;);\nTypeName setOfUsers = ParameterizedTypeName.get(set, user);\n</code></pre>\n<p>Some string comparison would get the job done, but doesn't seem like the ideal approach.</p>\n","question_id":63437899,"tags":["java","generics","annotation-processing","javapoet"],"score":3,"accepted_answer_id":63439432,"is_answered":true,"view_count":577,"last_edit_date":1597596976},{"owner":{"profile_image":"https://www.gravatar.com/avatar/8721cceea739c81708ef4dc74f74d1b8?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":19301788,"user_type":"registered","user_id":14109501,"link":"https://stackoverflow.com/users/14109501/questw","reputation":43,"display_name":"Questw"},"closed_date":1597486419,"link":"https://stackoverflow.com/questions/63424789/how-java-allows-to-set-string-where-is-expected-integer-in-generic-class","last_activity_date":1597485755,"creation_date":1597485755,"answer_count":0,"title":"How java allows to set String where is expected Integer, in generic class","body":"<pre><code>public class GenericHolder&lt;T&gt; {\n    private T object;\n    \n    public T get(){\n        return object;\n    }\n   \n    public void set(T obj){\n        this.object = obj;\n    }\n\n\n    public static void main(String args[]){\n         GenericHolder holder = new GenericHolder&lt;Integer&gt;();\n         holder.set(&quot;10&quot;); \n        \n    }\n\n\n}\n</code></pre>\n<p>I understand that holder (non parameterized) can reference parameterized type (with Integer)... But why Java allows to set String, when it is expected Integer...</p>\n","question_id":63424789,"tags":["java","generic-programming"],"score":0,"closed_reason":"Duplicate","is_answered":false,"view_count":24},{"owner":{"profile_image":"https://www.gravatar.com/avatar/a87fc3c228284ce1fc334430746922ba?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":6249392,"user_type":"registered","user_id":4860035,"link":"https://stackoverflow.com/users/4860035/podo","reputation":709,"display_name":"Podo","accept_rate":70},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63419194/use-generic-interface-as-method-argument-in-java","last_activity_date":1597435712,"creation_date":1597434413,"answer_count":2,"title":"Use generic interface as method argument in Java","body":"<p>Lets say I have the following interface <code>Foo</code></p>\n<pre><code>abstract public interface Foo {\n\n    abstract String getFoo();\n}\n</code></pre>\n<p>and two classes that extend <code>Foo</code>, <code>Bar1</code> and <code>Bar2</code></p>\n<pre><code>public class Bar1 extends Foo{\n\n    String foo = &quot;foobar&quot;;\n    public String getFoo(){\n        return foo;\n    }\n}\n//repeat for class Bar2 \n</code></pre>\n<p>I want to create a translator class that had a method that a client can call, which takes any object thats extending Foo as an argument (like <code>Bar1</code> or <code>Bar2</code> and translate the string to some other string. I did some digging and feel like generics are going to be the best way to do so, however I'm unable to properly modify either the method signature or the class signatures (not sure which, perhaps both?) to allow for this behavior.</p>\n<pre><code>public class TranslateBar{\n    \n//I have tried the following signatures, but clearly I'm missing something    \n\n    public String translateBar(Foo&lt;? extends Foo&gt; pojo&gt;{\n        //return translated string\n    }\n    \n    /*\n    I read that Object is the supertype for all Java classes, so I thought maybe having it \n    take an Object in the parameters and then doing the wildcard would work, but no luck\n    */\n\n    public String translateBar(Object&lt;? extends Foo&gt; pojo&gt;{\n        //return translated string\n    }\n</code></pre>\n<p>In all cases, it gives me an error in the generic saying <code>Type 'java.lang.Object'(or Foo) does not have type parameters</code>. The two options it gives me to fix are <code>create a field for pojo</code> which still doesn't solve the <code>&lt;? extends Points2&gt;</code> error.</p>\n<p>How can I get my <code>translateBar</code> method to allow the client to pass any subclass of <code>Foo</code>?</p>\n","question_id":63419194,"tags":["java","generics","interface"],"score":-1,"accepted_answer_id":63419297,"is_answered":true,"view_count":400},{"owner":{"profile_image":"https://i.stack.imgur.com/fYFFP.jpg?s=256&g=1","account_id":3306670,"user_type":"registered","user_id":2781271,"link":"https://stackoverflow.com/users/2781271/crosp","reputation":4539,"display_name":"CROSP","accept_rate":58},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/33754844/how-generify-class-with-t-and-listt","last_activity_date":1597434093,"creation_date":1447756828,"answer_count":1,"title":"How generify class with T and List&lt;T&gt;","body":"<p>I am trying to generify my class structure.<br>\nI will show my real structure to be more specific. </p>\n\n<p>I am writing application with offline mode support, so I decided to implement my ETag cache mechanism in using <strong>Robospice</strong> and  <strong>GreenDao ORM</strong>.    </p>\n\n<p>I need to cache only <strong>GET</strong> requests. </p>\n\n<p>Firstly my requests should extend base request(not mine), in my case <code>RetrofitSpiceRequest&lt;T, V&gt;</code> </p>\n\n<pre><code>T is type of return data   \nV is service type, in my case I am  using Retrofit.\n</code></pre>\n\n<p>The problem is that return type is not <code>List of T</code> types by default and I need to create subclass that extends array of T objects and that use it as return type.   </p>\n\n<p>Something like this    </p>\n\n<pre><code>public class City {\n....\n....\n....\n    public static class List extends ArrayList&lt;City&gt; {\n    .....\n    .....\n    }\n\n}\n</code></pre>\n\n<p>And use City.List as return type.         </p>\n\n<p>But I have my DAO declared as following </p>\n\n<pre><code>public class CityDao extends AbstractDao&lt;City, Long&gt; {\n\n}\n</code></pre>\n\n<p>In each request (GET) I need to have specific DAO as a member in order to cache data if it differs from the server data. Or load data from the local database if there is no connection.    </p>\n\n<p>The problem here is that request generified by T type which is mostly list, City.List in my case, of some objects, but my dao is generified by, for example E type which is City in my case.     </p>\n\n<p>I want to create method like this    </p>\n\n<pre><code>public AbastractDao&lt;T,Long&gt; getRequestDao() {\n\n}\n</code></pre>\n\n<p>But as far as my Request returns City.List, I have no idea how to generify this class, I feel that it is possible, but now no ideas.<br>\nIn case of non generic dao method, I have to duplicate code like this</p>\n\n<pre><code> @Override\n    public void insertReceivedData(City.List received) {\n        mCityDao.insertOrReplaceInTx(received);\n    }\n\n @Override\n    public City.List getCachedData() {\n        if (mFilterMap != null &amp;&amp; mFilterMap.size() &gt; 0) {\n            return (City.List) mCityDao.loadAll();\n        } else {\n            WhereCondition[] whereConditions = QueryUtils.convertPropertyMapToConditionalArray(mFilterMap);\n            return (City.List) mCityDao.queryBuilder().where(whereConditions[0], Arrays.copyOfRange(whereConditions, 1, whereConditions.length)).list();\n        }\n    }\n</code></pre>\n\n<p>In each request</p>\n\n<p>Please share your ideas.</p>\n\n<p>Thanks.</p>\n","question_id":33754844,"tags":["java","android","generics","caching","robospice"],"score":5,"accepted_answer_id":34090759,"is_answered":true,"view_count":8965},{"owner":{"profile_image":"https://www.gravatar.com/avatar/bc96638735979fc803ab6bb3515f9086?s=256&d=identicon&r=PG","account_id":1558697,"user_type":"registered","user_id":1449105,"link":"https://stackoverflow.com/users/1449105/marcio-lucca","reputation":370,"display_name":"Marcio Lucca"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63384914/type-inference-with-method-reference-and-primitive-types","last_activity_date":1597421664,"creation_date":1597267523,"answer_count":3,"title":"Type inference with method reference and primitive types","body":"<p>Is there a way to tell Java to NOT try to infer a type from a method reference that uses primitive types?</p>\n<p>Here is a method that I wrote, the reason for this is irrelevant right now:</p>\n<pre><code>    public static &lt;F, T&gt; Predicate&lt;F&gt; isEquals(\n            Function&lt;F, T&gt; aInMapFunction, T aInExpectedValue)\n    {\n        return aInActual -&gt; Objects.equals(\n                aInMapFunction.apply(aInActual), aInExpectedValue);\n    }\n</code></pre>\n<p>Now, what if you pass a method reference to &quot;isEquals&quot; that returns a primitive type?</p>\n<pre><code>Predicate&lt;String&gt; lLengthIs20 = isEquals(String::length, 20);\n</code></pre>\n<p>This is all fine and dandy, except that Java will also accept this strange usage:</p>\n<pre><code>Predicate&lt;String&gt; lLengthIs20 = isEquals(String::length, &quot;what the heck?!?!?&quot;);\n</code></pre>\n<p>This is because the compiler will infer type parameter T as &quot;<code>Serializable &amp; Comparable&lt;? extends Serializable &amp; Comparable&lt;?&gt;&gt;</code>&quot;, which will accept both Integer and String types.</p>\n<p>This is undesirable, in my case, as I would like a compilation error rather than Java figuring out some crazy type argument. For my thing, I can also explicitly override method &quot;isEquals&quot; to take specific primitive types. For example:</p>\n<pre><code>    public static &lt;F&gt; Predicate&lt;F&gt; isEquals(\n            ToIntFunction&lt;F&gt; aInMapFunction, int aInExpectedValue)\n    {\n        return aInActual -&gt;\n                aInMapFunction.applyAsInt(aInActual) == aInExpectedValue;\n    }\n</code></pre>\n<p>This works fine, this method is invoked rather than the Object one when I pass in a method that returns a primitive int. The problem is that I still need the Object method, I cannot remove it, which will still cause the compiler to accept the weird invocation I listed above.</p>\n<p>So the question is: is there a way for me to tell Java to not use the Object version of isEquals when the method reference returns a primitive type? I couldn't find anything, I'm feeling I'm out of luck in this one.</p>\n<p>(NOTE: the actual implementation of the object version of isEquals works fine and should be safe. This is because Object.equals and Object<strong>s</strong>.equals accept Object parameters and a String object will never be equals to an Integer object. Semantically, however, this looks weird)</p>\n<p>EDIT: after the comment from &quot;paranoidAndroid&quot;, one idea that I just had is to wrap the method reference the following way:</p>\n<pre><code>    public static &lt;T&gt; Function&lt;T, Integer&gt; wrap(ToIntFunction&lt;T&gt; aInFunction)\n    {\n        return aInFunction::applyAsInt;\n    }\n</code></pre>\n<p>And now,</p>\n<pre><code>Predicate&lt;String&gt; lLengthIs20 = isEquals(wrap(String::length), &quot;what the heck?!?!?&quot;);\n</code></pre>\n<p>... generates a compilation error. Still not great though, maybe there is a better way. At least this is better than passing the type in explicitly, which kind of beats the purpose.</p>\n<p>EDIT 2: I'm in Java 8 right now. Java 11 might behave differently here, I didn't test.</p>\n<p>EDIT 3: I'm thinking there is nothing we can do here, this is just an implication of how type inference works in Java. Here is another example:</p>\n<pre><code>    public static &lt;T&gt; boolean isEquals(T t1, T t2) {\n        return Objects.equals(t1, t2);\n    }\n</code></pre>\n<p>with this method, the following expression is perfectly valid:</p>\n<pre><code>System.out.println(isEquals(10, &quot;20&quot;));\n</code></pre>\n<p>This works because Java will try to resolve the type for T based on a common upper bound. It just happens that both Integer and String share the same upper bound <code>Serializable &amp; Comparable&lt;? extends Serializable &amp; Comparable&lt;?&gt;&gt;</code></p>\n","question_id":63384914,"tags":["java","generics","type-inference"],"score":8,"is_answered":true,"view_count":585,"last_edit_date":1597361783},{"owner":{"profile_image":"https://i.stack.imgur.com/Mo0at.jpg?s=256&g=1","account_id":1135699,"user_type":"registered","user_id":1120793,"link":"https://stackoverflow.com/users/1120793/darshan-mehta","reputation":30287,"display_name":"Darshan Mehta","accept_rate":35},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63411281/convert-generic-types-to-objects","last_activity_date":1597411987,"creation_date":1597402005,"answer_count":2,"title":"Convert Generic Types to Objects","body":"<p>I am writing a transformer to convert <code>String</code> input to output of custom type. Here's how the <code>interface</code> looks like:</p>\n<pre><code>public interface Transformer&lt;T&gt; {\n    public T transform(String input);\n}\n</code></pre>\n<p>There will multiple implementations of it (i.e. <code>IntegerTransformer</code>, <code>ByteTransformer</code> etc). I have written a factory that returns these transformers, e.g.:</p>\n<pre><code>public class TransformerFactory {\n    public &lt;T&gt; Transformer&lt;T&gt; getTransformer(final SomeEnum enum, final T type) {\n        switch(enum) {\n        case FOO:\n            return new IntegerTransformer();\n        case BAR:\n            return new ByteTransformer();\n            default:\n                throw new Exception(&quot;blah&quot;);\n        }\n    }\n}\n</code></pre>\n<p>In my <code>main</code> class, I am doing this:</p>\n<pre><code>factory.getTransformer(foo, Integer.class).transform(input);\n</code></pre>\n<p>This results in the following error:</p>\n<pre><code>Type mismatch: cannot convert from Class&lt;Integer&gt; to Integer\n</code></pre>\n<p>So, I somehow need to convert <code>Type</code> literal to <code>Object</code>. Is there any way I can do that without modifying the generic structure of interface and factory?</p>\n","question_id":63411281,"tags":["java","generics","transform","factory"],"score":0,"accepted_answer_id":63413798,"is_answered":true,"view_count":153},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e1927a513875cef7a1c2877fdb6b45ae?s=256&d=identicon&r=PG","account_id":1810904,"user_type":"registered","user_id":1646996,"link":"https://stackoverflow.com/users/1646996/qqibrow","reputation":2972,"display_name":"qqibrow","accept_rate":84},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/39889498/trouble-initialize-listobject-using-arrays-aslist","last_activity_date":1597392756,"creation_date":1475737163,"answer_count":7,"title":"trouble initialize List&lt;Object[]&gt; Using Arrays.asList","body":"<p>When I initialize List, I am able to do this:</p>\n\n<pre><code>List&lt;Object[]&gt; foo = new ArrayList&lt;&gt;();\nfoo.add(new Object[]{816, \"foo\", 2.6});\n</code></pre>\n\n<p>But when I want to simplify it using <code>Arrays.asList</code>:</p>\n\n<pre><code>List&lt;Object[]&gt; bar = Arrays.asList(new Object[]{\"bar\", 286});\n</code></pre>\n\n<p>It cannot compile with error:</p>\n\n<pre><code>incompatible types: inference variable T has incompatible bounds\nequality constraints: java.lang.Object[]\nlower bounds: java.lang.Object\n</code></pre>\n\n<p>Why it cannot do the type inference right and how to fix this?</p>\n","question_id":39889498,"tags":["java","list","generics"],"score":14,"accepted_answer_id":39890475,"is_answered":true,"view_count":6516,"last_edit_date":1475755195},{"owner":{"profile_image":"https://lh5.googleusercontent.com/-Coo1HnLxk0w/AAAAAAAAAAI/AAAAAAAABj8/zsay9km3XP0/photo.jpg?sz=256","account_id":5199414,"user_type":"registered","user_id":4159389,"link":"https://stackoverflow.com/users/4159389/rahul-vedpathak","reputation":1366,"display_name":"Rahul Vedpathak","accept_rate":0},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/63393807/optional-generic-type-argument","last_activity_date":1597386166,"creation_date":1597316775,"answer_count":3,"title":"Optional generic type argument","body":"<p>I want to declare a generic class that will work on triplets - <code>key</code>, <code>value</code> and <code>metadata</code>.</p>\n<p>The <code>key</code> and <code>value</code> fields are mandatory but the <code>metadata</code> field is optional.</p>\n<pre><code>class Triplet&lt;K,V,M&gt;{\n    K key;\n    V value;\n    M metadata;\n    //setters and getters\n}\n</code></pre>\n<p>While using the above class I have to initialize it like below -</p>\n<pre><code>Triplet&lt;Integer, String, String&gt; t1 = new Triplet&lt;&gt;();\n// Setters\n</code></pre>\n<p>But for some use cases <code>metadata</code> is optional. So when I use <code>null</code> as the 3rd type argument, the compiler gives an error -</p>\n<pre><code>Triplet&lt;Integer, String, null&gt; t2 = new Triplet&lt;&gt;();\n</code></pre>\n<p>How should I correctly instantiate a parameterized type that works for multiple types, where one of the type arguments specified at the use-site is optional?</p>\n","question_id":63393807,"tags":["java","generics","java-8"],"score":9,"is_answered":true,"view_count":1634,"last_edit_date":1597386166},{"owner":{"profile_image":"https://www.gravatar.com/avatar/6ca4eb89fd8c3b43bb118c8bf1f468ee?s=256&d=identicon&r=PG","account_id":1338329,"user_type":"registered","user_id":1280547,"link":"https://stackoverflow.com/users/1280547/docjones","reputation":649,"display_name":"DocJones"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56913027/converting-a-java-listt-into-a-stream-usable-with-iomicrometers-multigauge","last_activity_date":1594244570,"creation_date":1562407163,"answer_count":1,"title":"Converting a java-List&lt;T&gt; into a stream usable with iomicrometer&#39;s MultiGauge","body":"<p>from my springboot app i receive a list of results <code>List&lt;T&gt;</code> with 100 Elements read from a database table using </p>\n\n<p><code>T</code> contains the fields</p>\n\n<ul>\n<li>unique identifier</li>\n<li>longitude</li>\n<li>latitude</li>\n<li>value</li>\n</ul>\n\n<p>i want to turn this into multiple micrometer-gauges like</p>\n\n<pre><code>object{id=&lt;unique identifier&gt;,longitude=&lt;longitude&gt;,latitude=&lt;latitude&gt;} &lt;value&gt;\nobject{id=&lt;unique identifier&gt;,longitude=&lt;longitude&gt;,latitude=&lt;latitude&gt;} &lt;value&gt;\nobject{id=&lt;unique identifier&gt;,longitude=&lt;longitude&gt;,latitude=&lt;latitude&gt;} &lt;value&gt;\n...\n</code></pre>\n\n<p>The metrics shall be scraped by prometheus and then visualized using <a href=\"https://www.robustperception.io/using-geohashes-with-the-worldmap-panel-and-prometheus\" rel=\"nofollow noreferrer\">grafana/worldmap\n</a>\ni am building my multi-gauge using\n<code>MultiGauge l100 = MultiGauge.builder(\"metric-last100\").register(registry);</code></p>\n\n<p>and terribly failing at converting that <code>List&lt;T&gt;</code> into a stream to feed <code>l100.register(...)</code> as shown <a href=\"https://github.com/micrometer-metrics/micrometer/issues/807#issuecomment-429111036\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<pre><code>// SELECT count(*) from job group by status WHERE job = 'dirty'     \nMultiGauge statuses = MultiGauge.builder(\"statuses\")\n        .tag(\"job\", \"dirty\")\n        .description(\"The number of widgets in various statuses\")\n        .baseUnit(\"widgets\")\n        .register(registry);\n\n...\n\n// run this periodically whenever you re-run your query     \nstatuses.register(\n  resultSet.stream().map(result -&gt; \n    Row.of(Tags.of(\"status\", result.getAsString(\"status\")),     \n    result.getAsInt(\"count\")))\n)\n</code></pre>\n\n<p>Here is my actual code:</p>\n\n<pre><code>private MultiGauge l100;\n...\nl100 = MultiGauge.builder(\"ids-metric-last100\").register(registry);\n...   \npublic void updateMetricLast100Deliveries() {\n  List&lt;C3MpGeodataDOM&gt; last100 = c3MpGeodataDAO.getlast100();\n\n  l100.register(\n    last100.stream().map(\n        res -&gt; Row.of(\n            Tags.of(\n                \"sdgnr\", res.getMpPK().getSdgnr(),\n                \"latitude\", \"\" + res.getGeo_latitude(),\n                \"longitude\", \"\" + res.getGeo_longitude()),\n            1)));\n}\n</code></pre>\n\n<p>Please forgive me my dumbness, can someone please help?</p>\n\n<p>thanks</p>\n\n<p>/M</p>\n","question_id":56913027,"tags":["java","stream","grafana","prometheus","micrometer"],"score":4,"accepted_answer_id":57700129,"is_answered":true,"view_count":2581,"last_edit_date":1563368343},{"owner":{"profile_image":"https://lh6.googleusercontent.com/-lBu2zXF4zZA/AAAAAAAAAAI/AAAAAAAAAAA/AMZuuclG9eBOieyH1P1A0-4FoDEkCWVRuA/photo.jpg?sz=256","account_id":18983313,"user_type":"registered","user_id":13854263,"link":"https://stackoverflow.com/users/13854263/stack-overflow","reputation":71,"display_name":"stack overflow"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62699892/how-can-a-close-method-invoked-from-stream-point-to-the-implementation-of-the","last_activity_date":1594132403,"creation_date":1593703773,"answer_count":1,"title":"How can a close() method invoked from Stream point to the implementation of the close() method in the AbstractPipeline abstract class?","body":"<p>I just started learning Java Streams, and I have a question. Something that confuses me a lot is the following:</p>\n<ol>\n<li><p>I just checked out the AutoCloseable interface and it holds the close() method.</p>\n</li>\n<li><p>The BaseStream interface extends the AutoCloseable interface, and the rule of inheritance supplies, meaning that the close() method can be used from the BaseStream interface.</p>\n</li>\n<li><p>The Stream interface extends the BaseStream interface, and the rule of inheritance supplies, meaning that the close() method can be used from the Stream interface.</p>\n</li>\n<li><p>Also, the abstract class AbstractPipeline implements the BaseStream interface and it provides an implementation of the close() method.</p>\n</li>\n</ol>\n<p>This is the <a href=\"https://i.stack.imgur.com/cp1MS.png\" rel=\"noreferrer\">diagram</a> of the previously described.</p>\n<pre><code>List&lt;String&gt; stringList = new ArrayList&lt;&gt;();\nStream&lt;String&gt; stringStream = stringList.stream();\nstringStream.close();\n</code></pre>\n<p>When I hold the Ctrl keyboard button and click left click on the mouse it points me to the abstraction of the close() method in the BaseStream interface, but when I press Ctrl+Alt+B it points me to the implementation of the method in the AbstractPipeline abstract class.</p>\n<p>The question is:</p>\n<p>How can a close() method that is invoked of Stream point me to the implementation of the close() method in the AbstractPipeline abstract class, when Stream and AbstractPipeline do not interact and their main connection is the BaseStream?</p>\n<p>Is this some kind of object oriented concept that i'm not aware of?</p>\n<p>Thank you.</p>\n<p>Update:</p>\n<p>I'm using IntelliJ IDEA 2020.1.2 (Ultimate edition) and JDK 1.8 but I've also tried it with JDK 14 and Eclipse IDE for Enterprise Java Developers version 2019-06 (4.12.0) and it is the same.</p>\n","question_id":62699892,"tags":["java","oop","stream","java-stream"],"score":6,"accepted_answer_id":62777661,"is_answered":true,"view_count":108,"last_edit_date":1593708546},{"owner":{"profile_image":"https://i.stack.imgur.com/YXi45.jpg?s=256&g=1","account_id":1968522,"user_type":"registered","user_id":1768130,"link":"https://stackoverflow.com/users/1768130/t3az0r","reputation":449,"display_name":"t3az0r"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/13029295/got-permission-denied-connect-while-opening-stream","last_activity_date":1594126926,"creation_date":1350991163,"answer_count":0,"title":"Got Permission denied: connect while opening stream","body":"<p>I have a strange behaviour with a java client that uses webservice stubs generated by wsimport.</p>\n\n<p>The client says sth about</p>\n\n<pre><code>Got Permission denied: connect while opening stream from http://dev:8080/LicenseServer/services/ServerImpl?wsdl\n</code></pre>\n\n<p>But I can open the URL in my webbrowser and the wsdl shows up correctly. Also I can control the Soap11Binding/HttpSoap11Endpoint from my browser.</p>\n\n<p>A hint maybe is that the hostname \"dev\" is resolved by C:\\Windows\\System32\\driver\\etc\\hosts.</p>\n\n<p>Running the java-client from within the same network as the server makes no trouble.</p>\n\n<p>Maybe the stub's initialization process relies on a \"real\" DNS resolution of the hostname?</p>\n","question_id":13029295,"tags":["java","stream","wsdl","jax-ws"],"score":2,"is_answered":false,"view_count":1128,"last_edit_date":1594126926},{"owner":{"profile_image":"https://www.gravatar.com/avatar/96c8fe29293823140ab661d9ae7b8899?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":5057851,"user_type":"registered","user_id":8517455,"link":"https://stackoverflow.com/users/8517455/akshay-venkatesh","reputation":21,"display_name":"Akshay Venkatesh"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62662513/why-inputstream-does-not-take-more-memory","last_activity_date":1593695293,"creation_date":1593536361,"answer_count":1,"title":"Why InputStream does not take more memory?","body":"<p>I have a case in which i need to get an api details as payload for an api,whose purpose is to invoke the payload api. Before invoking the api, we performs 2 operations in application layer.</p>\n<ol>\n<li>we need to replace an environmental variables(if the user specifies).</li>\n<li>And with the replaced data, we construct a json string(the input format) to give this as an input to another api.</li>\n</ol>\n<p>While performing the above sequence of options i am getting Heap memory error for large payload.</p>\n<p>So i tried streaming for replacing the environment variables.\nPlease refer below link which i have used for streaming.\n<a href=\"http://tutorials.jenkov.com/java-howto/replace-strings-in-streams-arrays-files.html\" rel=\"nofollow noreferrer\">http://tutorials.jenkov.com/java-howto/replace-strings-in-streams-arrays-files.html</a></p>\n<p>Questions :</p>\n<ol>\n<li>why i was getting heap memory error while using String.replace() ?</li>\n<li>Why inputStream doesnt take more in memory ?</li>\n<li>How the streams are stored in memory ?</li>\n</ol>\n<p>PS : If i try to convert to string i am getting heap memory error.</p>\n<p>Thanks</p>\n","question_id":62662513,"tags":["java","performance","stream","heap-memory","httpsurlconnection"],"score":0,"is_answered":false,"view_count":75,"last_edit_date":1593536664},{"owner":{"profile_image":"https://www.gravatar.com/avatar/8c81968a630691c03d4d9e657770f527?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":5871770,"user_type":"registered","user_id":4623892,"link":"https://stackoverflow.com/users/4623892/dr-click","reputation":449,"display_name":"Dr_Click","accept_rate":58},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62413763/streaming-raw-sound-with-ffmpeg","last_activity_date":1593542514,"creation_date":1592326666,"answer_count":1,"title":"Streaming raw sound with FFMPEG","body":"<p>I'm using the ffmpeg library to decode / encode audio in JAVA, using the Process objets. The aim is to got the raw datas decoded by ffmpeg in my JAVA code and then, to send them back to ffmpeg to generate a stream or create a file.</p>\n\n<p>As JAVA sounds only allow wav audio datas, I made a first try with this command line :</p>\n\n<pre><code>ffmpeg -i http://199.180.75.118:80 -acodec pcm_s16le -ar 44100 -ac 2 \"/home/dr_click/montest.wav\"\n</code></pre>\n\n<p>It works. But, my goal is to get the frames on the fly and not a file. I thought about using a pipe but it seems it will work only with Linux and not with Windows (and no idea for MacOS)\nSo, I'd prefer to stream locally a wav file and to catch it with JAVA into a AudioInputStream.</p>\n\n<p>I wrote this command :</p>\n\n<pre><code>ffmpeg -re -i http://199.180.75.118:80 -acodec pcm_s16le -ar 44100 -ac 2 -f rtp rtp://127.0.0.1:1234\n</code></pre>\n\n<p>It semms to work on the server side. But, when I enter the below command line on the server side :</p>\n\n<pre><code>ffplay rtp://127.0.0.1:1234\n</code></pre>\n\n<p>It doesn't work at all. I got this error :</p>\n\n<ul>\n<li>[rtp @ 0x7f29c8000b80] Unable to receive RTP payload type 97 without an SDP file describing it</li>\n</ul>\n\n<p>If I try the couple :</p>\n\n<pre><code>ffmpeg -i http://199.180.75.118:80 -acodec pcm_s16le -ar 44100 -ac 2 -f rtp -sdp_file /home/dr_click/audio.sdp rtp://127.0.1.1:1234\n</code></pre>\n\n<p>and</p>\n\n<pre><code>ffplay /home/dr_click/audio.sdp\n</code></pre>\n\n<p>I got the following error :</p>\n\n<ul>\n<li>[rtp @ 0x7f7d00008040] Protocol 'rtp' not on whitelist 'file,crypto'! if</li>\n</ul>\n\n<p>And if I finally try :</p>\n\n<pre><code>fmpeg -protocol_whitelist file,http,rtp,tcp -i http://199.180.75.118:80 -acodec pcm_s16le -ar 44100 -ac 2 -f rtp -sdp_file /home/dr_click/audio.sdp rtp://127.0.1.1:1234\n</code></pre>\n\n<p>I still get the same error.</p>\n\n<p>Which point do I miss to stream locally some raw datas and catch them back in the AudioInputStream ?</p>\n\n<p>Thank you for all your replies.</p>\n","question_id":62413763,"tags":["java","audio","ffmpeg","stream"],"score":3,"accepted_answer_id":62664154,"is_answered":true,"view_count":3751},{"owner":{"profile_image":"https://www.gravatar.com/avatar/8ebb1003c592aa596183b62d2fc06884?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":4685339,"user_type":"registered","user_id":3792889,"link":"https://stackoverflow.com/users/3792889/user3792889","reputation":79,"display_name":"user3792889"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62612461/spring-cloud-data-flow-kinesis-demo-is-not-working","last_activity_date":1593274462,"creation_date":1593274462,"answer_count":0,"title":"Spring Cloud Data Flow Kinesis Demo is not working","body":"<p>I am using the Spring Cloud Dataflow Sample: <a href=\"https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/master/dataflow-website/recipes/kinesisdemo\" rel=\"nofollow noreferrer\">https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/master/dataflow-website/recipes/kinesisdemo</a></p>\n<p>Producer and Consumer are running without any error and the Kinesis stream is also created but the consumer is not printing any output however producer printing After/Before Sysouts. Anybody faced like this? Is this Sample Application working for anyone? How to fix this, if I am missing anything?</p>\n<p>Consumer Console is like below:</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.1.6.RELEASE)\n\n2020-06-27 21:34:58.397  INFO 14668 --- [           main] c.e.k.KinesisConsumerApplication         : Starting KinesisConsumerApplication on INBAN7C156Y2 with PID 14668 (C:\\01_MAHESH_SPACE\\SPRING_DATA_FLOW_RUNTIME_&amp;_EXAMPLES\\SAMPLES\\spring-cloud-dataflow-samples\\dataflow-website\\recipes\\kinesisdemo\\kinesisconsumer\\target\\classes started by nampoom in C:\\01_MAHESH_SPACE\\SPRING_DATA_FLOW_RUNTIME_&amp;_EXAMPLES\\SAMPLES\\spring-cloud-dataflow-samples\\dataflow-website\\recipes\\kinesisdemo\\kinesisconsumer)\n2020-06-27 21:34:58.400  INFO 14668 --- [           main] c.e.k.KinesisConsumerApplication         : No active profile set, falling back to default profiles: default\n2020-06-27 21:35:02.199  INFO 14668 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'errorChannel' has been explicitly defined. Therefore, a default PublishSubscribeChannel will be created.\n2020-06-27 21:35:02.204  INFO 14668 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'taskScheduler' has been explicitly defined. Therefore, a default ThreadPoolTaskScheduler will be created.\n2020-06-27 21:35:02.208  INFO 14668 --- [           main] faultConfiguringBeanFactoryPostProcessor : No bean named 'integrationHeaderChannelRegistry' has been explicitly defined. Therefore, a default DefaultHeaderChannelRegistry will be created.\n2020-06-27 21:35:02.230  INFO 14668 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean '(inner bean)#7397c6' of type [com.amazonaws.auth.profile.ProfileCredentialsProvider] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2020-06-27 21:35:02.231  INFO 14668 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'credentialsProvider' of type [org.springframework.cloud.aws.core.credentials.CredentialsProviderFactoryBean] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2020-06-27 21:35:02.232  INFO 14668 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'credentialsProvider' of type [com.amazonaws.auth.AWSCredentialsProviderChain] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2020-06-27 21:35:02.250  INFO 14668 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'integrationDisposableAutoCreatedBeans' of type [org.springframework.integration.config.annotation.Disposables] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2020-06-27 21:35:02.260  INFO 14668 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.integration.config.IntegrationManagementConfiguration' of type [org.springframework.integration.config.IntegrationManagementConfiguration$$EnhancerBySpringCGLIB$$3e2a3a55] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2020-06-27 21:35:02.268  INFO 14668 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration$IntegrationJmxConfiguration' of type [org.springframework.boot.autoconfigure.integration.IntegrationAutoConfiguration$IntegrationJmxConfiguration$$EnhancerBySpringCGLIB$$19bc4575] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2020-06-27 21:35:02.274  INFO 14668 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration' of type [org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration$$EnhancerBySpringCGLIB$$52a3ee42] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2020-06-27 21:35:02.278  INFO 14668 --- [           main] trationDelegate$BeanPostProcessorChecker : Bean 'mbeanServer' of type [com.sun.jmx.mbeanserver.JmxMBeanServer] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)\n2020-06-27 21:35:02.599  INFO 14668 --- [           main] o.s.s.c.ThreadPoolTaskScheduler          : Initializing ExecutorService 'taskScheduler'\n2020-06-27 21:35:03.368  INFO 14668 --- [           main] o.s.c.s.m.DirectWithAttributesChannel    : Channel 'application.input' has 1 subscriber(s).\n2020-06-27 21:35:03.415  INFO 14668 --- [           main] o.s.i.monitor.IntegrationMBeanExporter   : Registering MessageChannel input\n2020-06-27 21:35:03.465  INFO 14668 --- [           main] o.s.i.monitor.IntegrationMBeanExporter   : Registering MessageChannel nullChannel\n2020-06-27 21:35:03.476  INFO 14668 --- [           main] o.s.i.monitor.IntegrationMBeanExporter   : Registering MessageChannel errorChannel\n2020-06-27 21:35:03.502  INFO 14668 --- [           main] o.s.i.monitor.IntegrationMBeanExporter   : Registering MessageHandler org.springframework.cloud.stream.binding.StreamListenerMessageHandler@204d9edf\n2020-06-27 21:35:03.540  INFO 14668 --- [           main] o.s.i.monitor.IntegrationMBeanExporter   : Registering MessageHandler errorLogger\n2020-06-27 21:35:03.562  INFO 14668 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : Adding {logging-channel-adapter:_org.springframework.integration.errorLogger} as a subscriber to the 'errorChannel' channel\n2020-06-27 21:35:03.562  INFO 14668 --- [           main] o.s.i.channel.PublishSubscribeChannel    : Channel 'application.errorChannel' has 1 subscriber(s).\n2020-06-27 21:35:03.562  INFO 14668 --- [           main] o.s.i.endpoint.EventDrivenConsumer       : started _org.springframework.integration.errorLogger\n2020-06-27 21:35:05.421  INFO 14668 --- [           main] o.s.c.s.b.k.p.KinesisStreamProvisioner   : Using Kinesis stream for inbound: test-kinesis-stream\n2020-06-27 21:35:06.752  INFO 14668 --- [           main] o.s.i.monitor.IntegrationMBeanExporter   : Registering MessageChannel test-kinesis-stream.test-kinesis-stream-group.errors\n2020-06-27 21:35:06.815  INFO 14668 --- [           main] o.s.c.stream.binder.BinderErrorChannel   : Channel 'application.test-kinesis-stream.test-kinesis-stream-group.errors' has 1 subscriber(s).\n2020-06-27 21:35:06.816  INFO 14668 --- [           main] o.s.c.stream.binder.BinderErrorChannel   : Channel 'application.test-kinesis-stream.test-kinesis-stream-group.errors' has 0 subscriber(s).\n2020-06-27 21:35:06.816  INFO 14668 --- [           main] o.s.c.stream.binder.BinderErrorChannel   : Channel 'application.test-kinesis-stream.test-kinesis-stream-group.errors' has 1 subscriber(s).\n2020-06-27 21:35:06.816  INFO 14668 --- [           main] o.s.c.stream.binder.BinderErrorChannel   : Channel 'application.test-kinesis-stream.test-kinesis-stream-group.errors' has 2 subscriber(s).\n2020-06-27 21:35:07.110  INFO 14668 --- [           main] a.i.k.KinesisMessageDrivenChannelAdapter : started KinesisMessageDrivenChannelAdapter{shardOffsets=[KinesisShardOffset{iteratorType=TRIM_HORIZON, sequenceNumber='null', timestamp=null, stream='test-kinesis-stream', shard='shardId-000000000000', reset=false}], consumerGroup='test-kinesis-stream-group'}\n2020-06-27 21:35:07.134  INFO 14668 --- [           main] c.e.k.KinesisConsumerApplication         : Started KinesisConsumerApplication in 9.119 seconds (JVM running for 10.455)\n2020-06-27 21:35:08.111  INFO 14668 --- [esis-consumer-1] a.i.k.KinesisMessageDrivenChannelAdapter : The [ShardConsumer{shardOffset=KinesisShardOffset{iteratorType=TRIM_HORIZON, sequenceNumber='null', timestamp=null, stream='test-kinesis-stream', shard='shardId-000000000000', reset=false}, state=NEW}] has been started.\n</code></pre>\n","question_id":62612461,"tags":["java","stream","spring-cloud-stream","amazon-kinesis","spring-data-flow"],"score":1,"is_answered":false,"view_count":163},{"owner":{"profile_image":"https://www.gravatar.com/avatar/1a287f537db55a647bda0003781e317e?s=256&d=identicon&r=PG","account_id":5604285,"user_type":"registered","user_id":4439471,"link":"https://stackoverflow.com/users/4439471/adarsh-verma","reputation":25,"display_name":"Adarsh Verma"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62586403/data-leak-while-using-stax-with-okhttp3-for-parsing-large-soap-responses","last_activity_date":1593201834,"creation_date":1593132860,"answer_count":1,"title":"Data leak while using StAX with OkHttp3 for parsing large SOAP responses","body":"<p>I'm trying to parse multiple large XML SOAP responses with StAX parser using the following code (tracker is a simple stack for keeping a track of the current XPATH):</p>\n<pre class=\"lang-java prettyprint-override\"><code>XMLInputFactory factory = XMLInputFactory.newInstance()\n\nwhile (true) {\n    /*\n     * &lt;-- Request code --&gt;\n     */\n\n    Response response = client.newCall(request).execute();\n    InputStream responseReader = response.body().byteStream();\n    XMLEventReader eventReader = factory.createXMLEventReader(responseReader);\n\n    while (eventReader.hasNext()) {\n        XMLEvent event = eventReader.nextEvent();\n\n        if (event.getEventType() == XMLStreamConstants.START_ELEMENT) {\n            StartElement startElement = event.asStartElement();\n            String elementBuffer = startElement.getName().getLocalPart();\n            tracker.push(elementBuffer);\n            String currentXPath = tracker.getXPath(); //Joins all elements in the stack with '/' as delimiter.\n\n            if (eventReader.peek().getEventType() == XMLStreamConstants.CHARACTERS) {\n                String data = eventReader.nextEvent().asCharacters().getData().replace('\\n', ' ');\n\n                if (currentXPath.equals(&quot;/ABC/DEF/GHI&quot;))\n                    // Do something\n                if (currentXPath.equals(&quot;/JKL/MNO/PQR&quot;))\n                    // Do something\n\n                /*\n                 * Remaining operations\n                 */\n            }\n        } else if (event.getEventType() == XMLStreamConstants.END_ELEMENT) {\n            tracker.pop();\n        }\n    }\n\n    eventReader.close();\n    responseReader.close();\n    response.close();\n}\n</code></pre>\n<p><strong>Problem:</strong> The <code>data</code> String is getting truncated from the end and I'm randomly losing data.</p>\n<p>Example:\n<code>944aa679441c818d80bd8c7d7001229e</code> would randomly get truncated to <code>944aa679441c818d80bd8c7</code>\nand\n<code>100000000</code> will trim down to <code>10000</code>.</p>\n<p>Can anyone please point out what's wrong with this code? I tried going through StAX &amp; OkHttp documentation but found nothing.</p>\n<p>Thanks!</p>\n","question_id":62586403,"tags":["java","xml","stream","okhttp","stax"],"score":0,"accepted_answer_id":62602098,"is_answered":true,"view_count":58,"last_edit_date":1593136494},{"owner":{"user_type":"does_not_exist","display_name":"user2889419"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/20168089/is-it-possible-to-reopen-the-default-system-in-stream","last_activity_date":1593192097,"creation_date":1385242046,"answer_count":1,"title":"is it possible to reopen the default System.in stream?","body":"<p>I have a very simple and weird question.<br/>\nconsider the following</p>\n\n<pre><code>void close(InputStream is){\n   is.close();\n}\n</code></pre>\n\n<p>and assume we pass the default <code>System.in</code>(keyboard) stream to it to close.</p>\n\n<p>The question is, once we close the <code>System.in</code>, is it possible to reopen it again?! is there any class that represents the <code>System.in</code> directive?</p>\n\n<p>and another question is, what if <code>System.in</code> gets closed?!</p>\n\n<p>and the last question, why can't we close the <code>System.in</code> while another thread is reading from it? is it kinda locking? or what?</p>\n\n<p>thanks in advanced.</p>\n","question_id":20168089,"tags":["java","networking","io","stream"],"score":0,"is_answered":false,"view_count":48,"last_edit_date":1593192097},{"owner":{"profile_image":"https://www.gravatar.com/avatar/3666449a1709834e34846cddb4a54c7d?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":17063626,"user_type":"registered","user_id":12346425,"link":"https://stackoverflow.com/users/12346425/jawad-dev","reputation":294,"display_name":"Jawad-Dev"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/62579505/reading-outbound-messages-from-http-streaming-connection-in-java","last_activity_date":1593101005,"creation_date":1593100808,"answer_count":0,"title":"Reading Outbound messages from HTTP Streaming Connection in JAVA","body":"<p>I am implementing an integration client which will be connected to an <strong>API Gateway</strong> and send requests to the gateway. In short, I am the consumer of the API.</p>\n<p>Now, the architecture the opposite party has built that I have to open a http streaming connection and read the outbound messages sent by the system.</p>\n<p>In case of http streaming connection, it will be automatically closed if kept on idle state for a while so we have to send continuous heart-beat request to the system so that the stream connection shall stay alive.</p>\n<p>Now I have following queries:</p>\n<ol>\n<li><p>Do I have to use <code>URLConnection.openConnection</code> to open streaming channel?</p>\n</li>\n<li><p>How can I keep the stream open by sending requests? Do I have to open a separate thread for achieving this?</p>\n</li>\n<li><p>What are Outbound messages? Is the term refers to the responses I receive from the API?</p>\n</li>\n<li><p>How can I test it before getting actual testing setup? is there any dummy test case available on the internet where I can open stream and read data? if yes, please suggest any link?</p>\n</li>\n</ol>\n<p><strong>I have to read JSON Data.</strong></p>\n<p><strong>I have been provided with following Example Code for HTTP Streaming</strong></p>\n<pre><code>import java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.lang.invoke.MethodHandles;\nimport java.net.URL;\nimport java.net.URLConnection;\nimport java.net.URLDecoder;\n\nimport javax.ws.rs.core.HttpHeaders;\n\nimport org.apache.commons.lang.StringUtils;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport com.google.gson.Gson;\n\n/** * Sample on Java * Open stream and start StreamReader to read stream in separate thread */\n\n/** * Sample of stream processing */\n\npublic class StreamReader implements Runnable {\n\n    private static final Logger log = LoggerFactory.getLogger(MethodHandles.lookup().lookupClass());\n    final private BufferedReader in;\n    final private boolean toConsole;\n    final private String serviceName;\n\n    private final Crypto crypto;\n\n    StreamReader(BufferedReader in, boolean toConsole, String serviceName, Crypto crypto) {\n        this.in = in;\n        this.toConsole = toConsole;\n        this.serviceName = serviceName;\n        this.crypto = crypto;\n    }\n\n    @Override \n    public void run() { \n        String inputLine; \n        try { \n            stop: \n                while (!Thread.currentThread().isInterrupted()) { \n                    try { \n                        while (!StringUtils.isEmpty(inputLine = in.readLine())) { \n                            \n                            if ( inputLine.startsWith( serviceName + &quot;:&quot; ) ) { \n                                log.info(&quot;Stream message (outgoing from IPS):&quot;); \n                            \n                                if (toConsole) \n                                System.out.println(&quot;Stream message (outgoing from IPS):&quot;); \n                            \n                                String[] s = inputLine.split(&quot;:&quot;); \n                            \n                            if (s.length &gt;= 2) { \n                                log.debug(&quot;Encoded:&quot;); \n                                log.debug(inputLine); \n                                log.trace(&quot;Decoded:&quot;);\n                                String decoded = URLDecoder.decode(s[1], &quot;UTF-8&quot;); \n                                log.trace(decoded); \n                                \n                                NReply n = Gson.fromJson(decoded, NReply.class); \n                                log.info(&quot;Readable:&quot;); \n                                log.info(n.o.toString()); \n                                \n                                if (toConsole) { \n                                    System.out.println(&quot;Readable:&quot;); \n                                    System.out.println(n.o.toString()); \n                                } \n                                \n                                if (s.length &gt; 2) { \n                                \n                                    int lastSemicolon = inputLine.lastIndexOf(':'); \n                                    log.debug(&quot;Signed data:&quot;); \n                                    final String signedData = inputLine.substring(0, lastSemicolon); \n                                    log.debug(signedData); \n                                    log.debug(&quot;base64 encoded signature:&quot;); \n                                    log.debug(s[2]); \n                                    \n                                    try { \n                                        //crypto.checkSignSep(signedData, s[2]); \n                                    } \n                                    catch (Exception e) { \n                                        log.error(e.getMessage(), e); \n                                        } \n                                    }       \n                                } \n                            else { \n                                    log.error(&quot;Invalid stream message:&quot;); \n                                    log.error(inputLine);\n                                    if (toConsole) { \n                                        System.out.println(&quot;Invalid stream message:&quot;); \n                                        System.out.println(inputLine); \n                                    } \n                                } \n                        } \n                            else { \n                                log.debug(&quot;View's info:&quot;); \n                                log.debug(inputLine); \n                            }\n                            if (&quot;CLOSED&quot;.equals(inputLine)) { \n                                Thread.currentThread().interrupt(); \n                                break stop; \n                                } \n                            } \n                            Thread.sleep(1000L); \n                            }\n                        \n                        catch (InterruptedException e) { \n                            log.error(e.getMessage(), e); \n                            Thread.currentThread().interrupt(); \n                            break; \n                        } \n                        catch (Exception e) { \n                            log.error(e.getMessage(), e); \n                            break; \n                        } \n                    } \n                    log.info(&quot;polling has been stopped&quot;); \n                    } \n        finally { \n            try {\n                in.close(); \n            } \n            catch (IOException e) { \n                log.error(e.getMessage(), e); \n                } \n            } \n        } \n    \n    public void openStream(boolean toConsole) throws IOException\n    {\n        //final URL stream = new URL (hostName+&quot;/stream&quot;); \n        final URL stream = new URL (&quot;url&quot;);\n        final URLConnection uc = stream.openConnection();\n        //uc.setRequestProperty(HttpHeaders.COOKIE, &quot;JSESSIONID=&quot; + heartBeat.getSessionId() );\n        uc.setRequestProperty(HttpHeaders.COOKIE, &quot;JSESSIONID=&quot; + &quot;SessionIDFROMSERVICE&quot; );\n        final BufferedReader in =new BufferedReader(new InputStreamReader(uc.getInputStream()));\n        StreamReader reader=new StreamReader(in,toConsole,serviceName,crypto);\n        Thread thread=new Thread(reader);\n        thread.setDaemon(true);\n        thread.start();\n    }\n\n}\n</code></pre>\n<p>Any sort of help is appreciated.. :).</p>\n","question_id":62579505,"tags":["java","http","stream"],"score":0,"is_answered":false,"view_count":107,"last_edit_date":1593101005},{"owner":{"profile_image":"https://i.stack.imgur.com/MlqFo.png?s=256&g=1","account_id":405591,"user_type":"registered","user_id":774575,"link":"https://stackoverflow.com/users/774575/mins","reputation":6670,"display_name":"mins","accept_rate":78},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/23848081/pushbackinputstream-and-mark-reset","last_activity_date":1593004674,"creation_date":1400953987,"answer_count":3,"title":"PushbackInputStream and mark/reset","body":"<p>I use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/io/PushbackInputStream.html\" rel=\"nofollow\"><code>PushbackInputStream</code></a> to look ahead the next byte in a stream (<code>bufferedIn</code> which is a <code>BufferedInputStream</code>) because I want to <code>mark()</code> <strong>before</strong> some value, and later to rewind <strong>prior</strong> to it using <code>reset()</code>. </p>\n\n<pre><code>// Wrap input stream into a push back stream\nPushbackInputStream pbBufferedIn = new PushbackInputStream(bufferedIn, 20);\nboolean markDone = false; // Flag for mark\nboolean resetDone = false; // Flag for reset\n\n// Read each byte in the stream (some twice)\nfor (int i = pbBufferedIn.read(); i != -1; i = pbBufferedIn.read()) {\n    // Convert to byte\n    byte b = (byte) i;\n    // Check for marking before value -1\n    if (!markDone) {\n        if (b == -1) {\n            // Push character back\n            pbBufferedIn.unread(i);\n            // Mark for later rewind\n            pbBufferedIn.mark(20);\n            markDone = true;\n            System.out.print(\"[mark] \");                    \n            // Re-read\n            pbBufferedIn.read();\n        }\n    }\n\n    // Print the current byte\n    System.out.print(b + \" \");\n\n    // Check for rewind after value 1\n    if (markDone &amp;&amp; !resetDone &amp;&amp; b == 1) {\n        pbBufferedIn.reset(); // &lt;------ mark/reset not supported!\n        resetDone = true;\n        System.out.print(\"[reset] \");\n    }\n}\n</code></pre>\n\n<p>Ironically <code>PushbackInputStream</code> doesn't support mark/reset... on the other hand <code>BufferedInputStream</code> that supports mark/reset don't have a push-back mechanism... How can I do?</p>\n","question_id":23848081,"tags":["java","stream","reset","push-back"],"score":2,"accepted_answer_id":62555759,"is_answered":true,"view_count":1333,"last_edit_date":1459166328},{"owner":{"profile_image":"https://www.gravatar.com/avatar/724815fcb668181454703ac7e6a686be?s=256&d=identicon&r=PG","account_id":13990462,"user_type":"registered","user_id":10104545,"link":"https://stackoverflow.com/users/10104545/p-maestro","reputation":91,"display_name":"P.Maestro"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51519160/spring-download-file-from-rest-controller","last_activity_date":1532528076,"creation_date":1532522490,"answer_count":2,"title":"Spring : Download file from REST controller","body":"<p>I work on a Spring project to make a web app so there is a Tomcat server which permit me to lunch my web app.<br>\nI've got 2 functionalities on this web app, the first permit me to upload a file on a Postgresql Database (it's works correctly). But after that, i want to be able to download this file.  </p>\n\n<p>This is my method on my service.</p>\n\n<pre><code>public byte[] download(Integer id){\n    Line line = getById(Line.class, id);\n    int blobLenght;\n    byte[] fileToReturn = null;\n    Blob file = line.getFile();\n    blobLenght = (int)file.length();\n    fileToReturn = file.getBytes(1,blobLenght);\n    return fileToReturn;\n}\n</code></pre>\n\n<p>On my RestController, i have a method with annotation @RequestMapping.\nAnd this method return a ResponseEntity. On the method after, lineService is inject (@Autowired) on the top of my class.</p>\n\n<pre><code>@RequestMapping(value = \"/download\", method = RequestMethod.GET)\npublic ResponseEntity&lt;?&gt; download(@RequestParam(\"id\" Integer id)\n{\n    byte[] fileToDownload = lineService.download(id);\n    return new ResponseEntity&lt;byte[]&gt;(fileToDownload,HttpStatus.OK);\n}\n</code></pre>\n\n<p>I have made an effort to simplify as much as possible the method.</p>\n\n<p>This is my problem. Indeed, I realize a method which works when i make some requests one by one. But, the server must be able to support receiving a lot of requests at the same time. And for now, when I test with many request in same time, i've got an OutOfMemoryError : Java heap space.<br>\nI tried to implement Stream on the method 'download' but I get the same error. My implementation of the streams could not be well done.\nI  tried many solution found on internet and this is the last that I implement :</p>\n\n<pre><code>public ResponseEntity&lt;byte[]&gt; download(Integer id){\n    Line line = getById(Line.class, id);\n    HttpHeaders headers = new HttpHeaders();\n    InputStream is = line.getFile().getBinaryStream;\n    byte[] fileToReturn = IOUtils.toByteArray(is);\n    headers.setCacheControl(CacheControl.noCache().getHeaderValue());\n    ResponseEntity&lt;byte[]&gt; responseEntity = new ResponseEntity&lt;byte[]&gt;(fileToDownload,HttpStatus.OK);\n    return responseEntity;\n}\n</code></pre>\n\n<p>Do you know how i can update my program to answer at the requirement of the project, please ?<br>\nAnd if i'm on the good way could you tell my where is my mistake or if you have some suggestions, please ?  </p>\n\n<p>Thanks you for your help ! </p>\n\n<p>PM.</p>\n","question_id":51519160,"tags":["java","spring","postgresql","stream","blob"],"score":3,"accepted_answer_id":51521151,"is_answered":true,"view_count":18475},{"owner":{"profile_image":"https://www.gravatar.com/avatar/f87adfa661b69addb76e0196fe974f8c?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":4761031,"user_type":"registered","user_id":3848411,"link":"https://stackoverflow.com/users/3848411/joker","reputation":11006,"display_name":"Joker","accept_rate":60},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/43818630/difference-between-bytearrayoutputstream-and-bufferedoutputstream","last_activity_date":1532497927,"creation_date":1494061361,"answer_count":3,"title":"Difference between ByteArrayOutputStream and BufferedOutputStream","body":"<p>Both  <code>ByteArrayOutputStream</code>  and  <code>BufferedOutputStream</code> do buffering by placing data in an array in memory. So my questions are</p>\n\n<ol>\n<li>what are the differences between these two.</li>\n<li>When to use <code>ByteArrayOutputStream</code> and when to use <code>BufferedOutputStream</code></li>\n</ol>\n\n<p>Can some one help me in above two questions as i am confused on this. </p>\n","question_id":43818630,"tags":["java","stream"],"score":7,"accepted_answer_id":43818755,"is_answered":true,"view_count":10696,"last_edit_date":1494062413},{"owner":{"profile_image":"https://www.gravatar.com/avatar/19efaaa3092cc5dde108589853bb34e0?s=256&d=identicon&r=PG","account_id":400684,"user_type":"registered","user_id":766789,"link":"https://stackoverflow.com/users/766789/ss","reputation":829,"display_name":"SS&#39;","accept_rate":91},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51505884/adding-a-log-when-encounter-null-object-in-parallel-stream","last_activity_date":1532460606,"creation_date":1532459118,"answer_count":3,"title":"Adding a log when encounter null object in parallel stream","body":"<p>Not sure about the syntax here, new to lambda expressions and the sort.</p>\n\n<pre><code>            itemStream.parallel().filter(Objects::nonNull).forEach( \n                (item) -&gt; randomMethod(item));\n</code></pre>\n\n<p>What I had previously in a for loop was a check for null and then a warning if encountered a null item</p>\n\n<pre><code>                    log.warn(\"Skipping a null item!\");\n</code></pre>\n\n<p>How do I log when it encounters a null object (while still filtering) with the stream based approach?</p>\n","question_id":51505884,"tags":["java","filter","java-8","stream","java-stream"],"score":3,"accepted_answer_id":51506083,"is_answered":true,"view_count":798},{"owner":{"profile_image":"https://www.gravatar.com/avatar/b6b01980e705f057bec7132b86e36331?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":13814580,"user_type":"registered","user_id":9971473,"link":"https://stackoverflow.com/users/9971473/brrusev","reputation":535,"display_name":"BRRusev"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51493859/how-to-get-random-objects-from-a-stream-and-return-it","last_activity_date":1532424162,"creation_date":1532420588,"answer_count":2,"title":"How to get random objects from a stream and return it","body":"<p>I have List with some users from google and now in stream I say for every google user make new HRVacationUser ( witch is model ) and give me ( their email, some random date, some random date ) which random date is for random holiday. But in that case i set each user is on vacantion. How can I take random user from google users and set random date for holiday, so I can make a request in the database - give me this user which is in holiday?</p>\n\n<p>My List /GoogleUser> is with size for example 80, and I want to set only for random users vacantion date, and then to make request if(user is in vacantion return 'user') and in database to do request give me holiday users </p>\n\n<pre><code>public List&lt;HRVacationUser&gt; listVacationGoogleUsers(List&lt;GoogleUser&gt; allGoogleUsers){\n        LocalDate date = LocalDate.now();\n        List&lt;HRVacationUser&gt; collectHRUser = allGoogleUsers.stream()\n                .map(user -&gt;\n                        new HRVacationUser(user.getPrimaryEmail(), date.minusDays(ThreadLocalRandom.current().nextInt(1,5)), date.plusDays(ThreadLocalRandom.current().nextInt(1, 5))))\n                .collect(toList());\n        return collectHRUser;\n    }\n</code></pre>\n","question_id":51493859,"tags":["java","random","stream"],"score":0,"is_answered":false,"view_count":502,"last_edit_date":1532422028},{"owner":{"profile_image":"https://i.stack.imgur.com/CXHwy.png?s=256&g=1","account_id":11868306,"user_type":"registered","user_id":8685240,"link":"https://stackoverflow.com/users/8685240/j-money","reputation":509,"display_name":"j-money"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51419529/apache-camel-out-of-memory-exception","last_activity_date":1531998009,"creation_date":1531993942,"answer_count":1,"title":"Apache Camel out of memory exception","body":"<p>I have a <code>.csv</code> file that is <code>25Gb</code> total size. I am attempting to read it in (line by line for now) however I keep running into an <code>OutOfMemoryError: Java heap space</code> and I can't figure out why. After googling around for a while, I have come up with the following code</p>\n\n<pre><code>from(\"file:/home/justin/data/?fileName=in.csv&amp;noop=true\")//.streamCaching()\n    .split().tokenize(\"\\n\", 10000000).streaming()\n    .unmarshal(csv)\n    .process(new CsvParserProcess())\n    .marshal(csv)\n    .to(\"file:/home/justin/data/?fileName=out.csv\").log(\"Finished Transformation\").end();\n</code></pre>\n\n<p>after 5 seconds of running is when I run into the <code>OutOfMemoryError</code></p>\n\n<p>my intuiton would tell me \"Oh when you reach near complete memory saturation, flush out old unused contents\" however I am unsure of how to do this in the context of ApacheCamel (or really manually in java for that matter I've been migrating from C) </p>\n\n<p>My other solution was a very expensive brute force option of just piping (?) the file into a stream one line at a time from camel's stream endpoint, which works maybe? I just haven't wanted to sit around and wait for it to finish.</p>\n\n<pre><code>from(\"stream:file?fileName=/home/justin/data/in.csv\")\n    .streamCaching().split().tokenize(\"\\n\")\n    .unmarshal(csv)\n    .process(new CsvParserProcess())\n    .marshal(csv)\n    .to(\"file:/home/justin/data/?fileName=out.csv&amp;fileExist=Append\").log(\"done\").end();\n</code></pre>\n\n<p>Does anyone have any ideas of how I can avoid the MemoryError?</p>\n\n<p>Edit: I forgot that my \"improved\" code had <code>.streaming()</code> after I tokenized the file. It still however results in the same error :(</p>\n","question_id":51419529,"tags":["java","file","stream","apache-camel","out-of-memory"],"score":2,"is_answered":true,"view_count":2360,"last_edit_date":1531994269},{"owner":{"profile_image":"https://www.gravatar.com/avatar/a2c58f76d7b96b612e5da39a6c0cf74d?s=256&d=identicon&r=PG","account_id":1900921,"user_type":"registered","user_id":1716803,"link":"https://stackoverflow.com/users/1716803/luis-matos","reputation":347,"display_name":"Luis Matos","accept_rate":100},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/48625326/outpuf-pdf-as-a-stream-for-calling-process","last_activity_date":1531927470,"creation_date":1517842671,"answer_count":1,"title":"Outpuf PDF as a stream for calling process","body":"<p>I'm using jasperstarter (a java program, open source) to generate reports that I define in iReports. This runs in windows and I need the output PDF generated to be directly read by the calling process which is a C# program.</p>\n\n<p>Jasperstarter has lots of options like viewing the PDF generated directly, or generating the PDF as a file, sending it to printer, but no option to stream the result PDF to the calling process.</p>\n\n<p>Is this possible at all, even if I have to change jasperstarter's open source code? How?\nIs this possible in some other way that doesn't imply changing the jasperstarter's code? How?</p>\n","question_id":48625326,"tags":["java","c#","pdf","stream","jasperstarter"],"score":0,"accepted_answer_id":48660088,"is_answered":true,"view_count":68,"last_edit_date":1531927470},{"owner":{"user_type":"does_not_exist","display_name":"user5436283"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51378453/java-stream-list-of-maps-to-a-reduced-list-of-maps","last_activity_date":1531834603,"creation_date":1531821511,"answer_count":2,"title":"Java stream - List of Maps to a reduced List of Maps","body":"<p>I'm looking to convert a List of Maps to another List of Maps which is grouped.</p>\n\n<p>So I have the below list of maps -</p>\n\n<pre><code>List&lt;Map&lt;String, Object&gt;\n\n[{\n\"accId\":\"1\",\n\"accName\":\"TestAcc1\",\n\"accNumber\":\"101\",\n\"currency\":\"USD\",\n\"amount\":\"1000\"\n},\n{\n\"accId\":\"1\",\n\"accName\":\"TestAcc1\",\n\"accNumber\":\"101\",\n\"currency\":\"GBP\",\n\"amount\":\"800\"\n},\n{\n\"accId\":\"1\",\n\"accName\":\"TestAcc1\",\n\"accNumber\":\"101\",\n\"currency\":\"EUR\",\n\"amount\":\"900\"\n},\n{\n\"accId\":\"2\",\n\"accName\":\"TestAcc2\",\n\"accNumber\":\"102\",\n\"currency\":\"USD\",\n\"amount\":\"9000\"\n},\n{\n\"accId\":\"2\",\n\"accName\":\"TestAcc2\",\n\"accNumber\":\"102\",\n\"currency\":\"GBP\",\n\"amount\":\"8000\"\n},\n{\n\"accId\":\"2\",\n\"accName\":\"TestAcc2\",\n\"accNumber\":\"102\",\n\"currency\":\"EUR\",\n\"amount\":\"9500\"\n}\n]\n</code></pre>\n\n<p>Data table for reference:</p>\n\n<pre><code>accId   accName     accNumber   currency    amount\n1       TestAcc1    101         USD         1000\n1       TestAcc1    101         GBP         800\n1       TestAcc1    101         EUR         900\n2       TestAcc2    102         USD         9000\n2       TestAcc2    102         GBP         8000\n2       TestAcc2    102         EUR         9500\n</code></pre>\n\n<p>I'd like to group the currency + amount for the accounts to something like below:</p>\n\n<pre><code>List&lt;Map&lt;String, Object&gt;\n\n[{\n\"accId\":\"1\",\n\"accName\":\"TestAcc1\",\n\"accNumber\":\"101\",\n\"currencies\":\n{\n\"USD\":\"1000\",\n\"GBP\":\"800\",\n\"EUR\",\"900\"\n}\n},\n{\n\"accId\":\"2\",\n\"accName\":\"TestAcc2\",\n\"accNumber\":\"102\",\n\"currencies\":\n{\n\"USD\":\"9000\",\n\"GBP\":\"8000\",\n\"EUR\",\"9500\"\n}\n}\n]\n</code></pre>\n\n<p>I was wondering how to go about doing this. Can somebody please help me out here?</p>\n","question_id":51378453,"tags":["java","java-8","stream","java-stream"],"score":0,"is_answered":true,"view_count":200,"last_edit_date":1531826530},{"owner":{"profile_image":"https://lh3.googleusercontent.com/-UUvglId7ROg/AAAAAAAAAAI/AAAAAAAACDY/8nEhPIFCxtU/photo.jpg?sz=256","account_id":11643394,"user_type":"registered","user_id":8527109,"link":"https://stackoverflow.com/users/8527109/l%c3%a1szl%c3%b3-stahorszki","reputation":1124,"display_name":"L&#225;szl&#243; Stahorszki"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51349384/java-streams-put-new-element-through-existing-stream","last_activity_date":1531723834,"creation_date":1531665257,"answer_count":2,"title":"Java Streams: put new element through existing stream","body":"<p>I have a usecase, where I have a source of data, let's say: every second, a new string is coming from that data source.</p>\n\n<p>I want to create a pipeline, where if a new string arrives, it's pushed through that pipeline for processing.</p>\n\n<p>I'd guess the Java 8 introduced Stream API could do exactly that, since it has convenient functions for processing data of an arbitrary collection, however I'd like to skip the part where I collect my data to a separate collection and dispatch the arriving data straight to the Stream I just created.</p>\n\n<p>Is there any way to do that?</p>\n","question_id":51349384,"tags":["java","java-8","stream","java-stream"],"score":2,"accepted_answer_id":51351549,"is_answered":true,"view_count":327},{"owner":{"profile_image":"https://www.gravatar.com/avatar/1c999807f518efc5170bf8ad5e7fe4d8?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":8301006,"user_type":"registered","user_id":6239632,"link":"https://stackoverflow.com/users/6239632/m-gea","reputation":27,"display_name":"M.Gea"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51304559/itext-exceptionconverter-java-io-ioexception-stream-closed","last_activity_date":1531488802,"creation_date":1531395091,"answer_count":1,"title":"iText - ExceptionConverter: java.io.IOException: Stream Closed","body":"<p>i'm trying to resize a pdf document, and then put a Stamp in each page.</p>\n\n<p>I'm using Document for the resize and PdfStamper for the Stamp.</p>\n\n<pre><code>PdfStamper stamp = new PdfStamper(reader, output);\nDocument document = new Document();\n</code></pre>\n\n<p>The problem is when i close twice:  document.close() and stamp.close()\ni'm getting the <strong>ExceptionConverter: java.io.IOException: Stream Closed</strong></p>\n\n<p>I know that this is because i'm closing both, document and stamp, but if i only close one, just the Object closed will work.</p>\n\n<p>I don't know how to handle this.</p>\n\n<p>Any ideas??\nThanks!</p>\n\n<p><strong>EDIT - This is all the code i have for now:</strong></p>\n\n<pre><code>public void generateReducedPdf() throws Exception {\n\n    //lectura del pdf a copiar\n    PdfReader reader = new PdfReader(\"C:/Users/X30261GE/Downloads/ES_O00012741_2018_000000000000000000000000000153.pdf\");\n    int numberOfPages = reader.getNumberOfPages();\n\n    Document document = new Document();\n\n    //creación del nuevo pdf, junto con su ruta y nombre.\n\n    FileOutputStream output = new FileOutputStream(\"C:/Users/X30261GE/Downloads/pdfReducido.pdf\");\n    PdfWriter writer = PdfWriter.getInstance(document,  output);\n\n    //PDF TIPO PDF/A1-b\n    writer.setPDFXConformance(com.lowagie.text.pdf.PdfWriter.PDFA1B);\n\n    document.open();\n    document.setPageSize(PageSize.A4);\n\n    PdfDictionary outi = new PdfDictionary(PdfName.OUTPUTINTENT);\n    outi.put(PdfName.OUTPUTCONDITIONIDENTIFIER, new PdfString(\"sRGB IEC61966-2.1\"));\n    outi.put(PdfName.INFO, new PdfString(\"sRGB IEC61966-2.1\"));\n    outi.put(PdfName.S, PdfName.GTS_PDFA1);\n\n    InputStream inst = ActionSignPdf.class.getClassLoader().getResourceAsStream(\"resources/sRGB.profile\");          \n    com.itextpdf.text.pdf.ICC_Profile icc = ICC_Profile.getInstance(inst);\n\n    PdfICCBased ib = new PdfICCBased(icc);\n    ib.remove(PdfName.ALTERNATE);\n    outi.put(PdfName.DESTOUTPUTPROFILE, writer.addToBody(ib).getIndirectReference());\n    writer.getExtraCatalog().put(PdfName.OUTPUTINTENTS, new PdfArray(outi));\n\n    PdfContentByte pdfContent = writer.getDirectContent();\n\n\n\n    for (int i = 1; i &lt;= numberOfPages; i++) {\n\n        document.newPage();\n        PdfImportedPage page = writer.getImportedPage(reader, i);\n        // Reducir las paginas al 80%\n        pdfContent.addTemplate(page, .85f, 0, 0, .85f, 70, 110);\n\n\n\n    }\n\n    writer.createXmpMetadata();\n    document.close();\n    writer.close();\n\n\n    //AHORA StAMP time\n    //PRUEBA DE STAMP AQUI\n    PdfStamper stamp = new PdfStamper(reader, output);\n    PdfContentByte over;\n    FontFactory.defaultEmbedding = true;\n    FontFactory.register(ActionSignPdf.class.getResource(\"\").getPath() + \"Helvetica.ttf\", ActionSignPdf.class.getResource(\"\").getPath() + \"Helvetica.ttf\"); \n    BaseFont bf = BaseFont.createFont(ActionSignPdf.class.getResource(\"\").getPath() + \"Helvetica.ttf\", BaseFont.WINANSI, BaseFont.EMBEDDED);\n    BaseFont bfNegrita = BaseFont.createFont(BaseFont.TIMES_BOLD, BaseFont.WINANSI, BaseFont.EMBEDDED);\n\n\n    // mete el for\n    for (int i = 1; i &lt;= numberOfPages; i++) {\n    //PRUEBA DEL StAMP AQUI\n\n        over = stamp.getOverContent(i);\n        over.beginText();\n\n        //set fuente negrita\n        over.setFontAndSize(bfNegrita,8);\n\n        //Primera linea\n        //Coloco la primera parte en negrita\n        int posLineaXNegrita = 150;\n\n        over.showTextAligned(0, RegistroKeys.KEY_DIRECCION , posLineaXNegrita, 50, 0);\n        //segunda parte\n\n        //set fuente sin negrita\n        over.setFontAndSize(bf,7);\n        //posicion x donde colocare la segunda parte sin negrita\n\n        int posLineaX = RegistroKeys.KEY_DIRECCION.length() + posLineaXNegrita + 108;\n        over.setLineWidth(0);\n        over.showTextAligned(0, RegistroKeys.KEY_DIRECCION_URL , posLineaX, 50, 0);\n\n        //Siguiente linea\n        //set fuente negrita\n        over.setFontAndSize(bfNegrita,8);\n        //primera parte en negrita\n        posLineaXNegrita = 200;\n\n        over.showTextAligned(Element.ALIGN_CENTER, RegistroKeys.KEY_CODIGO_SEGURO_DESCARGA, posLineaXNegrita, 40, 0);\n\n        //segunda parte\n        //set fuente sin negrita\n        over.setFontAndSize(bf,7);\n        //posicion x donde colocare la segunda parte sin negrita\n        posLineaX = RegistroKeys.KEY_CODIGO_SEGURO_DESCARGA.length() + posLineaXNegrita + 105;\n        String codigo =  \"#002#9B4ECE66-A34D-3C0A-A6FA-6D67C31C9550\";\n        over.showTextAligned(Element.ALIGN_CENTER, codigo, posLineaX, 40, 0);\n        over.endText();                 \n        over.stroke(); \n    }\n    stamp.close();\n}\n</code></pre>\n\n<p>Like you say in comments, i'm trying to work with the stamp and the document in the same PDF, and that won't work. </p>\n\n<p>I have to work first with document, and then with stamper.\nAny ideas? thanks!</p>\n","question_id":51304559,"tags":["java","exception","stream","itext"],"score":-1,"is_answered":false,"view_count":1661,"last_edit_date":1531483885},{"owner":{"profile_image":"https://i.stack.imgur.com/o1tCa.jpg?s=256&g=1","account_id":1043654,"user_type":"registered","user_id":1049096,"link":"https://stackoverflow.com/users/1049096/ankit-kumar","reputation":1443,"display_name":"Ankit Kumar","accept_rate":64},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51302774/grpc-how-to-wait-for-the-headers-from-streamingserver-on-client-side","last_activity_date":1531408730,"creation_date":1531389944,"answer_count":1,"title":"gRPC How to wait for the headers from StreamingServer on client side","body":"<p>For a simple gRPC service defined by proto file:</p>\n\n<pre><code>service HelloService {\n    rpc sayHello() returns (stream string)\n}\n</code></pre>\n\n<p>How can i wait on the client side to first wait for the headers to arrive before i start to process the response from server? I tried using ClientInterceptor and override the onHeaders() method but it gets called after the call to sayHello() is completed already. How can i validate for a specific header inside the sayHello client and proceed with the call based on the validity of the header?</p>\n\n<pre><code>public class SomeHeaderInterceptor implements ClientInterceptor {\nprivate static final String FULL_METHOD_NAME = \"sayHello\";\npublic static CallOptions.Key&lt;String&gt; someHeader = CallOptions.Key.of(\"some_header_active\", \"false\");\n\n@Override\npublic &lt;ReqT, RespT&gt; ClientCall&lt;ReqT, RespT&gt; interceptCall(MethodDescriptor&lt;ReqT, RespT&gt; methodDescriptor,\n                                                           CallOptions callOptions, Channel channel) {\n    return new ForwardingClientCall.SimpleForwardingClientCall&lt;ReqT, RespT&gt;(channel.newCall(methodDescriptor, callOptions)) {\n\n        @Override\n        public void start(Listener&lt;RespT&gt; responseListener, Metadata headers) {\n            super.start(new ForwardingClientCallListener.SimpleForwardingClientCallListener&lt;RespT&gt;(responseListener) {\n                @Override\n                public void onHeaders(Metadata headers) {\n                    Metadata.Key&lt;String&gt; SAYHELLO_ACTIVE_HEADER = Metadata.Key.of(\"some_header_active\",\n                            Metadata.ASCII_STRING_MARSHALLER);\n                    if (methodDescriptor.getFullMethodName().equals(FULL_METHOD_NAME)) {\n                        if (!headers.containsKey(SAYHELLO_ACTIVE_HEADER)) {\n                            LOGGER.logError(\"some_header activation missing from header: \" + headers);\n                        } else {\n                            callOptions.withOption(someHeader, \"true\");\n                            Context.current().withValue(Context.key(\"test\"), \"testvalue\");\n                        }\n                    }\n\n                    super.onHeaders(headers);\n                }\n            }, headers);\n        }\n    };\n}\n</code></pre>\n\n<p>And the code for sayHello is as follows:</p>\n\n<pre><code>public Iterator&lt;String&gt; sayHello() {\nIterator&lt;String&gt; stream = blockingStub.sayHello();\n\n// wait for the sayhello active header \nboolean isActive = Boolean.parseBoolean(blockingStub.getCallOptions().getOption(SomeHeaderInterceptor. someHeader));\nSystem.out.println(\"the some_header header value is: \" + isActive);\nSystem.out.println(\"the context key : \" + Context.key(\"test\").get(Context.current()));\n\nreturn stream;\n}\n</code></pre>\n\n<p>In the sayHello() code above, it doesn't wait for the headers to arrive and context to be set in the onHeaders(). how can i do that? I only want to return the stream back to the client caller after i validate the presence of the some_header in the stream sent by the server.</p>\n","question_id":51302774,"tags":["java","stream","rpc","grpc"],"score":3,"is_answered":true,"view_count":1907},{"owner":{"profile_image":"https://www.gravatar.com/avatar/d8f34b07df369e3c65131dd24b04ffe6?s=256&d=identicon&r=PG","account_id":55779,"user_type":"registered","user_id":167114,"link":"https://stackoverflow.com/users/167114/i2ijeya","reputation":16052,"display_name":"i2ijeya","accept_rate":85},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/1721387/how-java-io-buffer-stream-differs-from-normal-streams","last_activity_date":1471519647,"creation_date":1258022736,"answer_count":5,"title":"How java.io.Buffer* stream differs from normal streams?","body":"<p>1) How does buffered streams work in background, how do they differ from normal streams and what are the advantage(s) of using them?</p>\n\n<p>2) <code>DataInputStream</code> is also <em>Byte</em> based. But it is having methods to <code>readLine()</code>. What's the point in here?</p>\n","question_id":1721387,"tags":["java","stream","bufferedreader","java-io","bufferedinputstream"],"score":11,"accepted_answer_id":1721400,"is_answered":true,"view_count":8405,"last_edit_date":1471519647},{"owner":{"profile_image":"https://www.gravatar.com/avatar/016e2dfcb286a141533cdd2008e031e2?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":7298458,"user_type":"registered","user_id":5562262,"link":"https://stackoverflow.com/users/5562262/psychosupreme","reputation":63,"display_name":"Psychosupreme","accept_rate":50},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/39003958/web-service-to-display-a-pdf-deleting-the-file-once-displayed","last_activity_date":1471468480,"creation_date":1471458789,"answer_count":1,"title":"Web Service to Display a PDF, deleting the file once displayed","body":"<p>I am attempting to display PDFs to the user in their browser using a web service.  Once they pass in the URL containing the variables needed.  My program first downloads the PDF to local storage then proceeds to copy it to the stream and displays it.  Once the viewer is able to view the PDF we wish to delete the file locally so that we do not wind up storing every file searched for.  I have managed to accomplish most of this task however I am having issues deleting the file once it is displayed to the user.</p>\n\n<p>Even when I attempt to manually delete the file I receive the \"Currently in use in the Java SE Binary\" message</p>\n\n<p>Code below:</p>\n\n<pre><code>File testFile = new File(\"C:\\\\Users\\\\stebela\\\\workspace\\\\my-app\\\\invoice\"+invNum+\".pdf\");\n\ntry\n{\n    ServletOutputStream os = res.raw().getOutputStream();\n    FileInputStream inputStr = new FileInputStream(testFile);\n    IOUtils.copy(inputStr, os);\n\n    os.close();\n    inputStr.close();\n\n    //finished settings\n    res.status(200);\n    testFile.delete();\n} catch (IOException e)\n{\n    System.out.println(e.getMessage());\n}\n</code></pre>\n","question_id":39003958,"tags":["java","pdf","stream"],"score":0,"is_answered":false,"view_count":58,"last_edit_date":1471460324},{"owner":{"profile_image":"https://i.stack.imgur.com/DPLTU.jpg?s=256&g=1","account_id":245216,"user_type":"registered","user_id":518587,"link":"https://stackoverflow.com/users/518587/morja","reputation":8352,"display_name":"morja","accept_rate":91},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/10333257/java-io-ioexception-premature-eof-while-downloading-pdf-over-https","last_activity_date":1471306836,"creation_date":1335442771,"answer_count":2,"title":"java.io.IOException: Premature EOF while downloading pdf over https","body":"<p>I get an error when trying to download a pdf with java. I know there are similar questions, but not as specific as mine.</p>\n\n<p>My code snippet:</p>\n\n<pre><code>URL url = new URL(\"https://.../abc.pdf\");\nHttpURLConnection conn = (HttpURLConnection) url.openConnection();\n... \nInputStream in= conn.getInputStream();\nByteArrayOutputStream out = new ByteArrayOutputStream(4096);\nbyte[] buf = new byte[4096];\nint bytesRead = 0;\nwhile ((bytesRead = in.read(buf)) != -1) {\n    out.write(buf, 0, bytesRead);\n}\n</code></pre>\n\n<p>Ther servers response header:</p>\n\n<pre><code> X-AspNet-Version:2.0.50727\n Transfer-Encoding:chunked\n Date:Thu 26 Apr 2012 12:07:59 GMT\n Content-Disposition:attachment; filename=abc.pdf\n Set-Cookie:Language=en-gb; path=/\n Connection:Keep-Alive\n Content-Type:application/octet-stream\n Server:Microsoft-IIS/6.0\n X-Powered-By:ASP.NET\n Cache-Control:private\n</code></pre>\n\n<p>The exception (at <code>in.read(buf)</code>):</p>\n\n<pre><code>Exception in thread \"main\" java.io.IOException: Premature EOF\n    at sun.net.www.http.ChunkedInputStream.readAheadBlocking(ChunkedInputStream.java:556)\n    at sun.net.www.http.ChunkedInputStream.readAhead(ChunkedInputStream.java:600)\n    at sun.net.www.http.ChunkedInputStream.read(ChunkedInputStream.java:687)\n    at java.io.FilterInputStream.read(FilterInputStream.java:133)\n    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2959)\n    at sun.net.www.protocol.http.HttpURLConnection$HttpInputStream.read(HttpURLConnection.java:2953)\n</code></pre>\n\n<p>The code works for almost all cases and had been used thousands of times. But in very rare cases I get this exception. But I can download the pdf with the browser. Also if I put the pdf on my own server I can download it with my code. So it must have something todo with the way the server serves this pdf.</p>\n\n<p>Maybe it has something to do with the <code>Transfer-Encoding:chunked</code>?</p>\n\n<p>Has anybody an idea, what I can try to get this fixed?</p>\n","question_id":10333257,"tags":["java","http","io","stream"],"score":1,"accepted_answer_id":10333621,"is_answered":true,"view_count":5790},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e01618347bd158e35c34cce5bc006a92?s=256&d=identicon&r=PG","account_id":136531,"user_type":"registered","user_id":340088,"link":"https://stackoverflow.com/users/340088/jbx","reputation":21531,"display_name":"jbx","accept_rate":68},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/38866078/how-to-look-up-and-update-the-state-of-a-record-from-a-database-in-apache-flink","last_activity_date":1471277758,"creation_date":1470811500,"answer_count":1,"title":"How to look up and update the state of a record from a database in Apache Flink?","body":"<p>I am working on a data streaming application and I am investigating the possibility of using Apache Flink for this project. The main reason for this is that it supports nice high-level streaming constructs, very similar to Java 8's Stream API. </p>\n\n<p>I will be receiving events which correspond to a specific record in a database, and I want to be able to process these events (coming from a message broker such as RabbitMQ or Kafka) and eventually update the records in the database and push the processed/transformed events to another sink (probably another message broker).</p>\n\n<p>Events related to a specific record will ideally need to be processed in FIFO ordering (although there will be a timestamp which helps detect out of order events too), but events related to different records can be processed in parallel. I was planning to use the <code>keyBy()</code> construct to partition the stream by record. </p>\n\n<p>The processing that needs to be done depends on the current information in the database about the record. However, I am unable to find an example or recommended approach to query a database for such records to enrich the event that it is being processed with the additional information I need to process it. </p>\n\n<p>The pipeline I have in mind is as follows:</p>\n\n<p>-> keyBy() on the id received -> retrieve the record from the database corresponding to the id -> perform processing steps on the record -> push the processed event to an external queue and update the database record </p>\n\n<p>The database record will need to be updated because another application will be querying the data. </p>\n\n<p>There might be additional optimisations one could do after this pipeline is achieved. For example one could cache the (updated) record in a managed state so that the next event on the same record will not need another database query. However, if the application does not know about a specific record it will need to retrieve it from the database. </p>\n\n<p>What is the best approach to use for this kind of scenario in Apache Flink?</p>\n","question_id":38866078,"tags":["java","stream","apache-flink"],"score":15,"accepted_answer_id":38958843,"is_answered":true,"view_count":2909},{"owner":{"profile_image":"https://i.stack.imgur.com/5zg1E.jpg?s=256&g=1","account_id":7338176,"user_type":"registered","user_id":5588779,"link":"https://stackoverflow.com/users/5588779/bondye","reputation":31,"display_name":"Bondye"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/38807544/stream-closed-and-not-reopened-java","last_activity_date":1471015437,"creation_date":1470508416,"answer_count":2,"title":"Stream closed and not reopened - Java","body":"<p>I have an easy 'homework' to do, but I have found a little problem with the closure of the input stream.\nTo put it simply, I have to make a contact 'list' application in Java, just to use the polymorphism in the correct way. So I have a class Contact and a subclass Private (contact). In both class there is a modify method to change the value of the variables. </p>\n\n<pre><code>public void modify() throws IOException {\n    System.out.println(\"Previously name: \" + name);\n    System.out.println(\"Insert new name\");\n    try(InputStreamReader ir = new InputStreamReader(System.in);    \n    BufferedReader in = new BufferedReader(ir) ) {  \n        name= in.readLine();\n        System.out.println(\"You've changed the name to: \"+ name);                       \n    System.out.println(\"Previously surname: \" + surname);\n    System.out.println(\"Insert new surname\");\n        surname= in.readLine();\n        System.out.println(\"You've changed the surname to: \"+ surname);                         \n    System.out.println(\"Previously e-mail: \" + email);\n    System.out.println(\"Insert new e-mail\");\n        email = in.readLine();\n        System.out.println(\"You've changed the e-mail to: \"+ email);    }                   \n}\n</code></pre>\n\n<p>This is the Contact method that doesn't create problem</p>\n\n<pre><code>@Override \npublic void modify() throws IOException {\n    super.modifica();\n    System.out.println(\"Numero di cellulare precedente: \" + cell);\n    System.out.println(\"Inserire nuovo numero\");\n    try (InputStreamReader ir = new InputStreamReader(System.in);   \n    BufferedReader in = new BufferedReader(ir)) {\n        cell = in.readLine();\n        System.out.println(\"Hai cambiato il numero in: \"+ cell);                        \n    System.out.println(\"Contatto skype precedente: \" + skype);\n    System.out.println(\"Inserire nuovo contatto\");\n        skype = in.readLine();\n        System.out.println(\"Hai cambiato il contatto in: \"+ skype);                         \n}   \n}\n</code></pre>\n\n<p>Instead, this is the override of the method in Private.\nIn the main, I create a Private object and I call the modify method. I can insert name, surname and e-mail without problem, then the method throws an IO exception because the stream is closed.\nI can't understand why I have this kind of problem. I think that the stream is closed by try with resources in the first code, but then it is opened in the second code by another try with resources. Probably something in my idea is wrong.</p>\n","question_id":38807544,"tags":["java","stream","overriding","try-with-resources"],"score":1,"accepted_answer_id":38807746,"is_answered":true,"view_count":407},{"owner":{"profile_image":"https://i.stack.imgur.com/SKLCk.gif?s=256&g=1","account_id":3231299,"user_type":"registered","user_id":2726496,"link":"https://stackoverflow.com/users/2726496/sugeesh","reputation":506,"display_name":"sugeesh","accept_rate":25},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/38895357/xml-stream-xpath-processor-algorithm","last_activity_date":1470995243,"creation_date":1470915616,"answer_count":1,"title":"XML Stream XPath Processor Algorithm","body":"<p>I am developing XML Stream XPath Processor in java, What i am expecting to do is </p>\n\n<p>1.) Split the Xpath into elements and store the elements in a queue.</p>\n\n<p>2.) Go through the XML file by SAX and in it's startElement() method check the current element is in the queue.</p>\n\n<p>3.) If it is in the queue, then store the element data in characters(...) method.</p>\n\n<p>Is my approach correct? I am stuck in first step because, it is hard to check all the xPath commands to divide the elements. Is there is any easy way to implement first step?</p>\n","question_id":38895357,"tags":["java","xml","xpath","stream","sax"],"score":3,"accepted_answer_id":38901571,"is_answered":true,"view_count":276,"last_edit_date":1470995243},{"owner":{"profile_image":"https://www.gravatar.com/avatar/ef52b1532b7b3f7ac57c9d01201d8f15?s=256&d=identicon&r=PG","account_id":426066,"user_type":"registered","user_id":807064,"link":"https://stackoverflow.com/users/807064/daveaglick","reputation":3650,"display_name":"daveaglick","accept_rate":90},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/6587713/java-and-net-streams-interoperability-through-ikvm","last_activity_date":1470756089,"creation_date":1309893429,"answer_count":1,"title":"Java and .NET Streams Interoperability Through IKVM","body":"<p>In my current project I use IKVM to cross-compile several Java libraries that deal with various aspects of XML. These libraries are then integrated with several .NET libraries and my mainline code. Everything works fine, but I suspect that there are several inefficiencies, especially in the area of stream-based data access.</p>\n\n<p>Many of the Java libraries can accept streaming SAX classes or other streaming objects such as OutputStream, etc. In some cases I can wrap the appropriate Java class in a coorisponding .NET subclass to bridge the gap and provide seamless streaming between the two languages. For example, creating a class that derives from both the .NET MemoryStream and the Java OutputStream. In most cases however, the interface is challenging and I am left passing whole strings around - even though I have streams available on the .NET side and the Java side accepts (different) stream classes (and vice versa).</p>\n\n<p>In general my question is if anyone has encountered similar problems passing data to/from IKVM compiled libraries using streams and how were they solved or mitigated? Do any third-party solutions exist to help bridge this gap? For example, code that provides Java SAX wrappers for .NET XmlReader and/or XmlWriter would be very useful.</p>\n","question_id":6587713,"tags":["c#","java","xml","stream","ikvm"],"score":4,"accepted_answer_id":6598731,"is_answered":true,"view_count":1696},{"owner":{"profile_image":"https://www.gravatar.com/avatar/4a343862500a83a4c22ae50171faa942?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":6143195,"user_type":"registered","user_id":4789933,"link":"https://stackoverflow.com/users/4789933/lanour","reputation":123,"display_name":"lanour"},"closed_date":1434171140,"link":"https://stackoverflow.com/questions/30798089/java-write-a-string-prefixed-with-the-7-bit-encoded-length","last_activity_date":1470592701,"creation_date":1434095865,"answer_count":0,"title":"Java - Write a string prefixed with the 7 bit encoded length","body":"<p>I am trying to recreate C#'s BinaryWriter's Write function on a string in Java.<br>\nThe C# method writes a string's length encoded in 7-bit format, and then the string. Is there any way I can implement this in Java?<br>\nI've tried implementing it like so, to no success:  </p>\n\n<pre><code>long v = value &amp; 0x00000000ffffffffL;\nwhile (v &gt;= 0x80) {\n  writeByte((byte) (v | 0x80));\n  v &gt;&gt;= 7;\n}\nwriteByte((byte) v);\n</code></pre>\n","question_id":30798089,"tags":["java","c#","serialization","stream","binarywriter"],"score":2,"closed_reason":"Duplicate","is_answered":false,"view_count":75,"last_edit_date":1470592701},{"owner":{"profile_image":"https://www.gravatar.com/avatar/0d3fd370e56f7d959792da5347e90e96?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":4744030,"user_type":"registered","user_id":3835815,"link":"https://stackoverflow.com/users/3835815/malteser","reputation":485,"display_name":"malteser","accept_rate":85},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/38742468/error-403-when-trying-to-read-from-public-stream","last_activity_date":1470225144,"creation_date":1470224207,"answer_count":1,"title":"Error 403 when trying to read from Public Stream","body":"<p>I'm trying to retrieve the data of this stream from Meetup - <a href=\"http://stream.meetup.com/2/open_events\" rel=\"nofollow\">http://stream.meetup.com/2/open_events</a></p>\n\n<p>but I keep getting error 403 using the code below</p>\n\n<pre><code>URL meetupStream = new URL(\"http://stream.meetup.com/2/open_events\");\nBufferedReader in = new BufferedReader(new InputStreamReader(meetupStream.openStream()));\nString inputLine;\nwhile ((inputLine = in.readLine()) != null){\n      System.out.println(inputLine);\n}\nin.close();\n</code></pre>\n\n<p>The stream does not need any authentication and can be seen normally in  a browser</p>\n\n<p>Any ideas what could be causing such an error?</p>\n","question_id":38742468,"tags":["java","stream"],"score":1,"accepted_answer_id":38742839,"is_answered":true,"view_count":33},{"owner":{"profile_image":"https://i.stack.imgur.com/kFi8q.jpg?s=256&g=1","account_id":5245902,"user_type":"registered","user_id":4191647,"link":"https://stackoverflow.com/users/4191647/himself12794","reputation":251,"display_name":"Himself12794","accept_rate":64},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/38648302/send-bytearrayoutputstream-to-perl-script-then-read-response","last_activity_date":1469804968,"creation_date":1469748453,"answer_count":2,"title":"Send ByteArrayOutputStream to Perl script, then read response","body":"<p>I have a ByteArrayOuputStream I received from performing a diff. Java's parsing of this is too slow, so I decided to try to pass the parsing off to a Perl script. I'm having a little trouble getting the script to receive data from this output stream. When I run my code, the application hangs indefinitely. This is what I have so far:</p>\n\n<pre><code>public static Diff analyzeDiff(ByteArrayOutputStream baos) throws IOException {\n\n    ProcessBuilder pb = new ProcessBuilder();\n    pb.command(\"perl/path/perl\", TEMP.getAbsolutePath());\n    Process process = pb.start();\n    OutputStream str = process.getOutputStream();\n    baos.writeTo(str);\n    str.flush();\n    try {\n        process.waitFor();\n    } catch (InterruptedException e) {\n        BufferedReader bf = new BufferedReader(new InputStreamReader(process.getInputStream()));\n        String line;\n        while ((line = bf.readLine()) != null) {\n            System.out.println(line);\n        }\n    }\n\n    return null;\n}\n\n@Test\npublic void testDiffParser() throws IOException {\n    DiffParser.init();\n\n    File test = new File(\"path/to/file/test.diff\");\n\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\n    baos.write(FileUtils.readFileToByteArray(test));\n    //String output = baos.toString();\n    //System.out.println(output);\n\n    DiffParser.analyzeDiff(baos);\n    //DiffParser.analyzeDiff(output);\n}\n</code></pre>\n\n<p>And here is my Perl script:</p>\n\n<pre><code>#!/usr/bin/perl\nuse strict;\nuse warnings;\n\nmy $additions = 0;\nmy $deletions = 0;\nmy $filesChanged = 0;\n\nmy $fileAdded = 0;\nmy $line;\n\nforeach $line ( &lt;&gt; ) {\n    $_ = $line;\n    chomp( $_ );\n    print( $_ );\n    if ( /^\\-\\-\\-/m ) {\n        $fileAdded = 1;\n    } elsif ( /^\\+\\+\\+/m &amp;&amp; $fileAdded ) {\n        $filesChanged++;\n        $fileAdded = 0;\n    } elsif ( /^\\+/ ) {\n        $additions++;\n        $fileAdded = 0;\n    } elsif ( /^\\-/ ) {\n        $deletions++;\n        $fileAdded = 0;\n    } else {\n        $fileAdded = 0;\n    }\n}\n\nprint(\"$additions $deletions $filesChanged\\n\")\n</code></pre>\n\n<p>Is there a way to actually do what I am trying to do?</p>\n\n<p><strong>Edit:</strong> This is how I was doing it in Java:</p>\n\n<pre><code>private Diff parseDiff(final ByteArrayOutputStream baos) {\n\n    final Diff diff = new Diff();\n\n    int filesChanged = 0;\n    int additions = 0;\n    int deletions = 0;\n\n    boolean fileAdded = false;\n\n    final String[] lines = baos.toString().split(\"\\n\");\n\n    for (final String line : lines) {\n\n        if (line.startsWith(\"---\")) {\n            fileAdded = true;\n        } else if (line.startsWith(\"+++\") &amp;&amp; fileAdded) {\n            filesChanged++;\n            fileAdded = false;\n        } else if (line.startsWith(\"+\")) {\n            additions++;\n            fileAdded = false;\n        } else if (line.startsWith(\"-\")) {\n            deletions++;\n            fileAdded = false;\n        } else {\n            fileAdded = false;\n        }\n\n    }\n\n    diff.additions = additions;\n    diff.deletions = deletions;\n    diff.changedFiles = filesChanged;\n\n    return diff;\n}\n</code></pre>\n\n<p><strong>Edit 2</strong>\nIf you want some context, you can refer to this <a href=\"https://codereview.stackexchange.com/questions/135711/efficiently-calculating-differences-between-file-using-diff-file/135759#135759\">Related question</a></p>\n","question_id":38648302,"tags":["java","perl","stream","outputstream"],"score":1,"accepted_answer_id":38649262,"is_answered":true,"view_count":135,"last_edit_date":1492087233},{"owner":{"profile_image":"https://www.gravatar.com/avatar/c907bccce17c2e18736dccb83a64133e?s=256&d=identicon&r=PG","account_id":3075759,"user_type":"registered","user_id":2605148,"link":"https://stackoverflow.com/users/2605148/adam-smith","reputation":479,"display_name":"Adam Smith","accept_rate":64},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25753876/stopping-a-java-thread-blocked-on-a-scanner","last_activity_date":1410386418,"creation_date":1410298381,"answer_count":1,"title":"Stopping a Java thread blocked on a Scanner","body":"<p>This is related to some other questions on here, but I haven't yet seen an answer that helps. (<strong>EDIT</strong> by JWW: per the comments, the cited duplicate doe not handle the <code>EOF</code> as expected or desired).</p>\n\n\n\n<p>In this example, the <code>main()</code> function starts a Thread, which blocks on a Scanner's <code>nextLine()</code> function. I then wait for 0.2 s, and after that time I want to force this Thread to terminate, even though nothing's been typed in. I can't get the Thread to stop on its own, without hitting a key to satisfy its Scanner.</p>\n\n<pre><code>import java.util.*;\n\nclass sandbox {\n    public static void main(String[] args) {\n        BlockingThread thread = new BlockingThread();\n        thread.start();\n\n        trySleep(200); // wait 0.2 s\n        thread.closeScanner(); // try to close the Scanner, to terminate the Thread\n    }\n\n    public static void trySleep(int time) {\n        try { Thread.sleep(time); }\n        catch (InterruptedException e) {}\n    }\n\n    static class BlockingThread extends Thread {\n        private Scanner scanner = new Scanner(System.in);\n\n        public void run() {\n            System.out.println(\"Running!\");\n            scanner.nextLine();\n            System.out.println(\"Stopping!\");\n        }\n\n        public void closeScanner() {\n            System.out.println(\"\\tTrying to close the Scanner...\");\n            scanner.close();\n            System.out.println(\"\\tScanner is now closed.\");\n        }\n    }\n}\n</code></pre>\n\n<p>Some notes:</p>\n\n<ul>\n<li>It's definitely blocking on the Scanner's underlying stream. If you download and run this code, it'll halt right after printing \"Trying to close the Scanner...\" If you remove the call to <code>thread.closeScanner()</code>, it'll stop immediately after \"Running!\"</li>\n<li>I've seen some answers claiming that I want to call the Thread's <code>interrupt()</code> method. But that doesn't work, because the Thread is blocked.</li>\n<li>I've seen other answers claiming that I want to close the stream that the <code>Scanner</code> is reading. But that doesn't seem to work either&mdash;<code>Scanner</code> docs indicate that its <code>close()</code> method closes the underlying stream, so that <em>should</em> be what I'm doing in the above toy code.</li>\n<li>I'd even be willing to use a deprecated method like <code>stop()</code>, but even that appears to have no effect.</li>\n</ul>\n\n<p>Any ideas? Thanks.</p>\n\n<p>(If you're curious, the underlying motivation is to create an automated grader for my students' work. The stream will ultimately be the stdout of a process being executed by a thread. But some of my students will have infinite loops, and I want the thread to terminate after <em>n</em> seconds, even if the process hasn't completed. So deadlock isn't really a concern, since I'm really not doing much in the way of synchronization.)</p>\n","question_id":25753876,"tags":["java","multithreading","stream","blocked"],"score":1,"is_answered":false,"view_count":4036,"last_edit_date":1410385919},{"owner":{"profile_image":"https://www.gravatar.com/avatar/05766da42bea2cb7c9e185fa66be4725?s=256&d=identicon&r=PG","account_id":871926,"user_type":"registered","user_id":922584,"link":"https://stackoverflow.com/users/922584/vojt%c4%9bch","reputation":11578,"display_name":"Vojtěch","accept_rate":80},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25759954/stream-over-http-ssl-is-not-flushed","last_activity_date":1410352828,"creation_date":1410335203,"answer_count":1,"title":"Stream over HTTP SSL is not flushed","body":"<p>I have a web application running behind nginx. Some pages are accessible via http, some others via https. I have some \"pages\", which are rather streams as the application does not close the connection and feeds data as they come. The feed then looks like this:</p>\n\n<pre><code> TIME1 MESSAGE1\n TIME2 MESSAGE2\n ...\n TIMEn MESSAGEn\n</code></pre>\n\n<p>After each line I write \"\\n\" and then call flush(). Over http, it works correctly and my client can listen to new data. However, over https the client is not receiving any data until the connection is closed.</p>\n\n<pre><code> ServletOutputStream stream = applicationModel.getOutputStream();\n OutputStreamWriter streamWriter = new OutputStreamWriter(stream);\n BufferedWriter writer = new BufferedWriter(streamWriter);\n while (true) {\n     wait();\n     writer.write(newMessage);\n     writer.flush();\n }\n</code></pre>\n","question_id":25759954,"tags":["java","ssl","nginx","stream"],"score":0,"accepted_answer_id":25765745,"is_answered":true,"view_count":266},{"owner":{"profile_image":"https://www.gravatar.com/avatar/6c8ea369094414e9ff92e081e09623e7?s=256&d=identicon&r=PG","account_id":1160785,"user_type":"registered","user_id":1140321,"link":"https://stackoverflow.com/users/1140321/meher","reputation":2555,"display_name":"Meher","accept_rate":53},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25709593/send-large-files-over-socket-java","last_activity_date":1410095519,"creation_date":1410088438,"answer_count":3,"title":"send large files over socket java","body":"<p>I am trying to transfer larger files over socket.I will be transferring the file in chunks.As shown in the code.<a href=\"https://stackoverflow.com/a/11451034/1140321\">link</a></p>\n\n<pre><code>int count;\nbyte[] buffer = new byte[8192];\nwhile ((count = in.read(buffer)) &gt; 0)\n{\n  out.write(buffer, 0, count);\n}\n</code></pre>\n\n<p>before sending this file,i want to send an object which holds the details of the file.Using which stream should i send Object + File.</p>\n\n<p>I am new to streams,can i get any sample code.</p>\n\n<p>Can i send the byte length of the object first to read the object ,save it and send file data.is it possible,any sample code ?</p>\n\n<p>Thanks\n421</p>\n","question_id":25709593,"tags":["java","sockets","stream","filestream"],"score":0,"is_answered":false,"view_count":4017,"last_edit_date":1495541566},{"owner":{"profile_image":"https://i.stack.imgur.com/ZXzBn.png?s=256&g=1","account_id":2981437,"user_type":"registered","user_id":2531314,"link":"https://stackoverflow.com/users/2531314/blacksmith","reputation":3064,"display_name":"blackSmith","accept_rate":58},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25684558/does-stream-close-closes-any-enclosing-streams","last_activity_date":1409957365,"creation_date":1409915394,"answer_count":2,"title":"Does stream.close closes any enclosing streams","body":"<p>AFAIK, a call to the <code>close</code> on a stream(I/O) closes any underlying streams including itself.<br>\n<strong>Is the reverse true</strong> ?</p>\n\n<p>For example :</p>\n\n<pre><code>InputStream inStream = new FileInputStream(\"abc.txt\"); \nBufferedInputStream bin = new BufferedInputStream(inStream);\ninStream.close();  \n</code></pre>\n\n<p>Will this closes <code>bin</code> also ?<br>\nIf not, is there any need to do so ? ie : will it cause a memory leak ?   </p>\n","question_id":25684558,"tags":["java","stream"],"score":1,"accepted_answer_id":25684717,"is_answered":true,"view_count":500},{"owner":{"profile_image":"https://i.stack.imgur.com/D0BCG.jpg?s=256&g=1","account_id":925528,"user_type":"registered","user_id":956397,"link":"https://stackoverflow.com/users/956397/pithenumber","reputation":23026,"display_name":"PiTheNumber","accept_rate":95},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25665189/android-datainputstream-skip-frame-if-too-slow","last_activity_date":1409927438,"creation_date":1409832728,"answer_count":1,"title":"Android DataInputStream skip frame if too slow","body":"<p>I am using <a href=\"https://bitbucket.org/neuralassembly/simplemjpegview/src/a4487b3e6a966db14742e40ef44691ece8475eda/src/com/camera/simplemjpeg/MjpegInputStream.java?at=master\" rel=\"nofollow\">this MjpegInputStream</a> which is using a DataInputStream to read a video stream. Sometimes things went wrong and the video gets a hugh delay. Data from the input stream bluks up maybe because of network delay. I would like to skip some frames in this case but I am unable to detect it.</p>\n\n<p>I tried to use <code>DataInputStream .available()</code> in the <a href=\"https://bitbucket.org/neuralassembly/simplemjpegview/src/a4487b3e6a966db14742e40ef44691ece8475eda/src/com/camera/simplemjpeg/MjpegView.java?at=master#cl-133\" rel=\"nofollow\">main loop</a> but that did not work because it is always below 8000. Looks like data is queued up somewhere else. Network stack?</p>\n\n<p>Is there are network buffer in front of DataInputStream? How can get the size of the incoming data that is not processed yet?</p>\n","question_id":25665189,"tags":["java","android","networking","stream"],"score":0,"is_answered":false,"view_count":98,"last_edit_date":1409833980},{"owner":{"profile_image":"https://i.stack.imgur.com/L2xbH.jpg?s=256&g=1","account_id":4575430,"user_type":"registered","user_id":3713995,"link":"https://stackoverflow.com/users/3713995/abhijeet-panwar","reputation":1857,"display_name":"Abhijeet Panwar","accept_rate":80},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25680210/how-to-run-interactive-python-script-using-apache-common-exec","last_activity_date":1409920794,"creation_date":1409900269,"answer_count":0,"title":"How to run interactive python script using apache common exec?","body":"<p>I am trying to run a python script using Apache Commons exec.I need to pass some values to python script as python script in an interactive one.How to do it?</p>\n\n<p>My attempt was to set values in parent process's input stream.But it's not working for me.</p>\n\n<p><strong>My code so far:</strong> </p>\n\n<pre><code>String line = \"python /home/abhijeet/test.py\";\n\n    CommandLine cmdLine = CommandLine.parse(line);\n\n    byte buf[]=\"4\".getBytes();\n\n    InputStream io=new ByteArrayInputStream(buf);\n\n    DefaultExecuteResultHandler resultHandler = new DefaultExecuteResultHandler();\n\n    PumpStreamHandler streamhandler=new PumpStreamHandler(System.out,System.err,io);\n\n\n\n    DefaultExecutor executor = new DefaultExecutor();\n\n    executor.setStreamHandler(streamhandler); \n\n    executor.execute(cmdLine, resultHandler);\n\n\n\n    try\n    {\n        resultHandler.waitFor();\n    }\n\n    catch (InterruptedException e) \n    {\n        System.out.println(\"yo errior\");\n        e.printStackTrace();\n    }\n</code></pre>\n","question_id":25680210,"tags":["java","stream","external-process","apache-commons-exec"],"score":4,"is_answered":false,"view_count":1240,"last_edit_date":1409920794},{"owner":{"profile_image":"https://i.stack.imgur.com/L2xbH.jpg?s=256&g=1","account_id":4575430,"user_type":"registered","user_id":3713995,"link":"https://stackoverflow.com/users/3713995/abhijeet-panwar","reputation":1857,"display_name":"Abhijeet Panwar","accept_rate":80},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25682954/cant-understand-use-of-input-stream-and-output-stream","last_activity_date":1409913438,"creation_date":1409910166,"answer_count":2,"title":"Can&#39;t understand use of input stream and output stream","body":"<p>I am confused regarding use of input stream and output stream. From a stack overflow question  <a href=\"https://stackoverflow.com/questions/3385201/confused-about-stdin-stdout-and-stderr\">confused about stdin, stdout and stderr?</a> :</p>\n\n<p><strong>Standard input</strong> - this is the file handle that your process reads to get information from you.</p>\n\n<p><strong>Standard output</strong> - your process writes normal information to this file handle.</p>\n\n<p>I was trying to run an external process(A python script) using java.Which is an interactive one and requires input from user.</p>\n\n<p>Now as concept says that:</p>\n\n<blockquote>\n  <p>standard input is used when your process reads to get information from\n  you.</p>\n</blockquote>\n\n<p>So I should get input stream from the process to write values to it.I tried to it and failed .So I searched on stack overflow gave me a question with same problem  which was taking output stream from process and then was writing to it.I tried that and that worked.</p>\n\n<p>My question is that why that worked? Shouldn't it be input stream which I should use to give input to that external process or I have understood input stream and output stream totally wrong.</p>\n\n<p>Please help me to understand it with an easy explanation .</p>\n\n<p>Edit : My code was :</p>\n\n<pre><code> Process process=Runtime.getRuntime().exec(\"/usr/bin/python /home/abhijeet/test.py\");\n    OutputStream  stdin = process.getOutputStream ();\n    String line = \"30\" + \"\\n\";\n    stdin.write(line.getBytes() );\n</code></pre>\n","question_id":25682954,"tags":["java","stream","inputstream","outputstream"],"score":2,"accepted_answer_id":25683557,"is_answered":true,"view_count":1340,"last_edit_date":1495542100},{"owner":{"profile_image":"https://i.stack.imgur.com/gTY0Q.png?s=256&g=1","account_id":4949898,"user_type":"registered","user_id":3984221,"link":"https://stackoverflow.com/users/3984221/s-man","reputation":22901,"display_name":"S-Man","accept_rate":60},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25648397/android-mediaplayer-stream-from-lan","last_activity_date":1409829290,"creation_date":1409758613,"answer_count":1,"title":"Android: Mediaplayer stream from LAN","body":"<p>i have a classical server client tcp socket system to send messages from client to a server. That works quiet fine. Now I am trying to play a sound remote. The client should send the path to the sound. It is <code>/mnt/sdcard/Music/sound.mp3</code> This is what it sends to the server.</p>\n\n<p>The server knows the client IP. Maybe the IP string looks like <code>/192.168.1.2</code> \nThe server should interprete it and start the sound by streaming. </p>\n\n<pre><code>private void playSound (String soundFileName) {\n        Uri myUri1 = Uri.parse(\"file:/\" + _clientIP + soundFileName);\n        _txtHint.setText(myUri1.toString());\n\n        mPlayer = new MediaPlayer();\n        mPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);\n        try {\n            mPlayer.setDataSource(getApplicationContext(), myUri1);\n        } catch (IllegalArgumentException e) {\n            Toast.makeText(getApplicationContext(), \"You might not set the URI correctly!\", Toast.LENGTH_LONG).show();\n        } catch (SecurityException e) {\n            Toast.makeText(getApplicationContext(), \"You might not set the URI correctly!\", Toast.LENGTH_LONG).show();\n        } catch (IllegalStateException e) {\n            Toast.makeText(getApplicationContext(), \"You might not set the URI correctly!\", Toast.LENGTH_LONG).show();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        try {\n            mPlayer.prepare();\n        } catch (IllegalStateException e) {\n            Toast.makeText(getApplicationContext(), \"MISE: You might not set the URI correctly!\", Toast.LENGTH_LONG).show();\n        } catch (IOException e) {\n            Toast.makeText(getApplicationContext(), \"MIOE: You might not set the URI correctly!\", Toast.LENGTH_LONG).show();\n        }\n        mPlayer.start();\n    }\n</code></pre>\n\n<p>If I take a simple http URI it works very well (i.e. <a href=\"http://test.com/sound.mp3\" rel=\"nofollow\">http://test.com/sound.mp3</a>). The sound will be played. Now I am trying to play the sound the client sends to the server. But the code breaks with an IOException (\"Prepared failed: status 0x1\") at <code>mPlayer.prepare();</code> I believe the URI is wrong. I tried several ways (<code>rtsp://IP:port/path</code>, <code>rtsp://IP/path</code>, same with <code>file://</code> and <code>http://</code>). But I do not find the right one. Maybe I miss a thing? Do the server have permission to access the clients sound? If not, how do I give it to the server?</p>\n\n<p>Thanks for your help!\nGreets, S-Man</p>\n\n<p>Edit1: ServerSocket</p>\n\n<pre><code>try {       \n     _serverSocket = new ServerSocket(SocketServerPORT);\n\n            while (true) {\n                socket = _serverSocket.accept();\n                dataInputStream = new DataInputStream(\n                        socket.getInputStream());\n                dataOutputStream = new DataOutputStream(\n                        socket.getOutputStream());\n\n                _message = dataInputStream.readUTF();\n                _clientIP = socket.getInetAddress().toString();\n\n                Server.this.runOnUiThread(new Runnable() {\n\n                    @Override\n                    public void run() {     \n                        //Here the Sound should be played.\n                        Server.this.playSound(_message);\n                    }\n                });\n\n                dataOutputStream.writeUTF(_message);\n      }\n} catch (IOException e) {...\n</code></pre>\n","question_id":25648397,"tags":["java","android","audio","stream","lan"],"score":0,"is_answered":false,"view_count":1110,"last_edit_date":1409829290},{"owner":{"profile_image":"https://i.stack.imgur.com/PHEGc.png?s=256&g=1","account_id":4272295,"user_type":"registered","user_id":3493847,"link":"https://stackoverflow.com/users/3493847/tamas-g","reputation":687,"display_name":"Tamas G.","accept_rate":81},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25606592/is-it-possible-to-return-more-than-one-value-from-a-servlet-to-client","last_activity_date":1409577690,"creation_date":1409576861,"answer_count":3,"title":"Is it possible to return more than one value from a servlet to client?","body":"<p>I have a servlet which generates a .png image and writes it into the <code>OutputStream</code> as a byte array. </p>\n\n<p>I'd like to create an application which fires that servlet and downloads the generated image. I also would like to measure how much time does it take for the servlet to generate the image not including the time of parameter checking and such things. I know it's impossible from a client side application so the servlet itself should measure this time then send the measured value back to the client side app. </p>\n\n<p><strong>My problem</strong>: how is it possible to send more than one thing from a servlet: the image and the time value as well?</p>\n\n<p>Shall I use for example JSON? Or if I write the image (as a byte array) and the time value (as a long value) into the <code>OutputStream</code> how can I read it out on client side?</p>\n","question_id":25606592,"tags":["java","json","servlets","stream"],"score":1,"accepted_answer_id":25606837,"is_answered":true,"view_count":951},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e141f953f8d1d406e070507594894787?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":4948721,"user_type":"registered","user_id":3990392,"link":"https://stackoverflow.com/users/3990392/maincodebase","reputation":3,"display_name":"maincodebase"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25571107/dealing-with-byte-arrays-of-different-sizes-in-a-stream","last_activity_date":1409341218,"creation_date":1409324869,"answer_count":2,"title":"Dealing with byte arrays of different sizes in a stream","body":"<p>I have a method \"<code>A</code>\" that return a <code>byte[outputSize]</code> of fixed size (e.g. 64 bytes) at every call. I also have a method \"<code>B</code>\" that need to be fed with a byte[inputSize] of variable size (e.g. it can be smaller or bigger than 64 bytes).\nAnd I want to use a stream to feed the sequence of 64 bytes chunks from \"A\" to \"B\" whithout losing any single byte.</p>\n\n<p>I tried to fed those 64 bit chunks to a <code>ByteArrayOutputStream</code> \"<code>out</code>\" until reached a <code>out.size &gt; inputSize</code>.\nThen creating a <code>ByteArrayInputStream</code> \"<code>in</code>\" from a copy of \"<code>out</code>\" to feed the method \"<code>B</code>\" with a <code>byte[inputSize]</code> readed from \"<code>in</code>\".</p>\n\n<p>Then resetting \"<code>out</code>\" and copying the unreaded byte to \"<code>out</code>\".\nIs this the correct way to accomplish that or there's a simpler/faster/better way?\nHere's a pseudocode example:</p>\n\n<pre><code>ByteArrayOutputStream out = new ByteArrayOutputStream();\n\npublic byte[] A() {\n    return next64bytes;\n}\n\npublic void B(byte[] bytes) throws IOException {\n    while (out.size() &lt; bytes.length) {\n        out.write(A()); // feeding \"out\" with 64 bytes\n    }\n    ByteArrayInputStream in = new ByteArrayInputStream(out.toByteArray());\n    in.read(bytes); // feeding \"bytes\" with bytes.length bytes\n    byte unread[];\n    in.read(unread = new byte[in.available()]);\n    out.reset();\n    out.write(unread); // basically writing unread bytes of \"in\" in an empty \"out\"\n}\n</code></pre>\n","question_id":25571107,"tags":["java","stream","byte"],"score":0,"accepted_answer_id":25575133,"is_answered":true,"view_count":510,"last_edit_date":1409333825},{"owner":{"profile_image":"https://www.gravatar.com/avatar/536dccbfa406414acc4e7320b14e5943?s=256&d=identicon&r=PG","account_id":2127499,"user_type":"registered","user_id":1889216,"link":"https://stackoverflow.com/users/1889216/murad-kaplan","reputation":41,"display_name":"Murad Kaplan"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/13786464/forward-stream-from-machine-to-another-java","last_activity_date":1356363471,"creation_date":1355047278,"answer_count":0,"title":"forward stream from machine to another java","body":"<p>I am new to socket programming in java and Android. I have three phones A, B, and C. With Wifi-Direct, A can only see B. B, in the middle, can see A and C. And C can only see B. \nI want to send a file from A to C. So, A should send it to B and B will forward the data/packets to C.</p>\n\n<p>I don't know where to start. should all phones use filestream? If so, how can B know if he receives data from A that he should forward it to C?</p>\n\n<p>If you can show me good tutorial or small sample code this will be great.</p>\n","question_id":13786464,"tags":["java","android","sockets","stream","wifi-direct"],"score":1,"is_answered":false,"view_count":196,"last_edit_date":1355048751},{"owner":{"profile_image":"https://www.gravatar.com/avatar/68d8a86857397187f8d308a0f738eae9?s=256&d=identicon&r=PG","account_id":989343,"user_type":"registered","user_id":1007059,"link":"https://stackoverflow.com/users/1007059/zimzim","reputation":3301,"display_name":"ZimZim","accept_rate":77},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/11592617/simple-java-server-client-not-working","last_activity_date":1356301120,"creation_date":1342877585,"answer_count":2,"title":"Simple Java Server/Client not working?","body":"<p>I have a basic Server and a Client coded in Java. It's a code I saw on the internet and modified a bit to suit my needs. Now the thing is, I'm basically sending a message from the client to the server. This message would be \"hello there\". The server checks port 6789 for a message that contains the word \"hello\" and if that's true, it has to get the names of all files/sub-directories in a certain directory. The first of these names is sent back to the client and the client prints it. I've opened port 6789 and sending the message from the client to the server works perfectly. The server receives it and executes the necessary action, but it won't send back the data to the client. I don't know whether the client isn't receiving it or whether the server isn't sending it. Here's both codes: </p>\n\n<p>Client </p>\n\n<pre><code>    String sentence = \"hello\";\n    Socket clientSocket = new Socket(\"localhost\", 6789);\n    DataOutputStream outToServer = new DataOutputStream(\n            clientSocket.getOutputStream());\n    outToServer.writeBytes(sentence + '\\n');\n    BufferedReader inFromServer = new BufferedReader(new InputStreamReader(\n            clientSocket.getInputStream()));\n    System.out.println(inFromServer.readLine());\n    clientSocket.close();\n</code></pre>\n\n<p>Server</p>\n\n<pre><code>    String sentence;\n    ServerSocket welcomeSocket = new ServerSocket(6789);\n\n    while (true) {\n        Socket connSocket = welcomeSocket.accept();\n        BufferedReader inFromClient = new BufferedReader(\n                new InputStreamReader(connSocket.getInputStream()));\n        sentence = inFromClient.readLine();\n        if (sentence.contains(\"hello\")) {\n            File dir = new File(\"D:/ServerMap/\");\n            String[] children = dir.list();\n            if (children == null) {\n                JOptionPane.showMessageDialog(frame,\n                        \"Either no directory or it doesn't exist\");\n            } else {\n                DataOutputStream outToClient = new DataOutputStream(\n                        connSocket.getOutputStream());\n                outToClient.writeBytes(children[0]);\n                JOptionPane.showMessageDialog(frame, children[0]);\n            }\n        }\n    }\n</code></pre>\n\n<p>I'm executing the server through a separately exported Runnable Jar file, and the client is compiled and run in Eclipse. </p>\n\n<p>Just to clarify my issue: Client sends \"hello\" to server -> Server receives the message and it contains \"hello\" so if-statement returns true -> Server checks for file names in the specified directory and finds a couple -> Server sends back the first file name which it found -> Client is supposed to receive that file name and print it in the Eclipse console (this is the part that doesn't work)</p>\n\n<p>Any suggestions?</p>\n\n<p>PS: This is all done on the local host. It's done on 1 computer, Windows 7 x64, port 6789 is open (didn't work at all before I manually opened it) and that's pretty much it. </p>\n","question_id":11592617,"tags":["java","stream","client","inputstream","outputstream"],"score":1,"accepted_answer_id":11592767,"is_answered":true,"view_count":1511},{"owner":{"profile_image":"https://www.gravatar.com/avatar/3f59bbfc6470ec75d19d9af02678c8a4?s=256&d=identicon&r=PG","account_id":1856430,"user_type":"registered","user_id":1681891,"link":"https://stackoverflow.com/users/1681891/user1681891","reputation":281,"display_name":"user1681891","accept_rate":53},"closed_date":1355953483,"link":"https://stackoverflow.com/questions/13960927/en-decrypting-an-in-output-stream-in-java","last_activity_date":1355950658,"creation_date":1355950174,"answer_count":2,"title":"En/Decrypting an In/Output stream in Java?","body":"<p>is there any way to encrypt and decrypt an input and output stream in Java?\nThanks</p>\n","question_id":13960927,"tags":["java","security","encryption","stream"],"score":3,"accepted_answer_id":13960971,"closed_reason":"not a real question","is_answered":true,"view_count":4971},{"owner":{"profile_image":"https://www.gravatar.com/avatar/7c140edd287a31919b704c05ab65c74f?s=256&d=identicon&r=PG","account_id":2015638,"user_type":"registered","user_id":1803007,"link":"https://stackoverflow.com/users/1803007/paul","reputation":5854,"display_name":"Paul","accept_rate":76},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/13911931/assign-byteinputstream-to-inputstream-keeping-bind-to-terminal-emulator","last_activity_date":1355743096,"creation_date":1355738542,"answer_count":1,"title":"Assign ByteInputStream to InputStream keeping bind to terminal emulator","body":"<p>I am trying to connect to a terminal emulator using a library in android, this will connect to a serial device and should show me sent/received data. To attach to a terminal session I need to provide an <code>inputStream</code> to <code>setTermIn(InputStream)</code> and an <code>outputStream</code> to <code>setTermOut(OutputStream)</code>.</p>\n\n<p>I initialize and attach some streams like so in <code>onCreate()</code>, these are just initial streams and are not attached to the data I want to be sending/receiving.</p>\n\n<pre><code>private OutputStream bos;\nprivate InputStream bis;\n\n...\n\nbyte[] a = new byte[4096];\nbis = new ByteArrayInputStream(a);\nbos = new ByteArrayOutputStream();\nsession.setTermIn(bis);\nsession.setTermOut(bos);\n/* Attach the TermSession to the EmulatorView. */\nmEmulatorView.attachSession(session);\n</code></pre>\n\n<p>I now want to assign the streams to data as I send and receive data. In The sendData() method, which I call every time I press enter, I have:</p>\n\n<pre><code>public void sendData(byte[] data)\n{\n        bos = new ByteArrayOutputStream(data.length);         \n}\n</code></pre>\n\n<p>and in the onReceiveData() method, called every time data is received over serial:</p>\n\n<pre><code>public void onDataReceived(int id, byte[] data)\n{\n        bis = new ByteArrayInputStream(data);           \n}\n</code></pre>\n\n<p>However a <code>ByteArrayInputStream</code> can only ever have the data that was given to it, so it constantly needs to be created as data is sent and received. Now the problem is, I want this data to appear on the terminal, but when I assign bis to the data, it is no longer attached like it was when I called <code>mEmulatorView.attachSession(session);</code></p>\n\n<p>Is there a way to update what bis is pointing to without breaking the bind that bis has to the terminal?</p>\n\n<p>EDIT:\nAlso if I try to call attach again I get errors, although ideally I don't want to be calling it again etc.</p>\n\n<pre><code> SerialTerminalActivity.this.runOnUiThread(new Runnable() {\n            public void run() {\n\n                mSession.setTermIn(bis);\n                mSession.setTermOut(bos);\n                mEmulatorView.attachSession(mSession);\n            }\n          });\n</code></pre>\n\n<p>Although that may be my coding there.\n<a href=\"https://i.stack.imgur.com/9YNCJ.png\" rel=\"nofollow\">https://i.stack.imgur.com/9YNCJ.png</a></p>\n","question_id":13911931,"tags":["java","android","stream","inputstream"],"score":1,"accepted_answer_id":13913097,"is_answered":true,"view_count":584,"last_edit_date":1355742884},{"owner":{"profile_image":"https://www.gravatar.com/avatar/f107992a766854d72c417ca7d27456aa?s=256&d=identicon&r=PG","account_id":1921531,"user_type":"registered","user_id":1732936,"link":"https://stackoverflow.com/users/1732936/xelian","reputation":16820,"display_name":"Xelian","accept_rate":66},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/13894613/client-cant-receive-info-from-server","last_activity_date":1355597419,"creation_date":1355593630,"answer_count":1,"title":"Client can&#39;t receive info from Server","body":"<p>I am trying to send file info from server to client, but can't receive the info on the client side. I think it's an error with streams but can't find it.</p>\n\n<p>I debug the code and I see that the info is reading well but then something bad happend when comes to the line :</p>\n\n<pre><code>while ((readLine = read.readLine()) != null) {\n</code></pre>\n\n<p>It's <code>null</code> and everything ends.</p>\n\n<pre><code>public class Server {\n    private String urlFile = \"http://riemann.fmi.uni-ofia.bg/vladov/students/boil.txt\";\n    private ServerSocket serverSocket = null;\n    private BufferedReader read = null;\n    private BufferedWriter write = null;\n    private FileReader fileReader = null;\n    URLConnection urlConnection = null;\n\n    void acceptConnection() {\n        try {\n            serverSocket = new ServerSocket(3000);\n            Socket client = null;\n            while (true) {\n                client = serverSocket.accept();\n                handleConnection(client);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void handleConnection(Socket clientSocket) {\n        try {\n            URL url = new URL(urlFile);\n            urlConnection = url.openConnection();\n            read = new BufferedReader(new InputStreamReader(\n                    urlConnection.getInputStream()));\n\n            write = new BufferedWriter(new OutputStreamWriter(\n                    clientSocket.getOutputStream()));\n            String readLine = null;\n            while ((readLine = read.readLine()) != null) {\n                write.write(readLine);\n                write.flush();\n            }\n\n        } catch (MalformedURLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n    }\n\n    private void tearDownConnection() {\n        try {\n            write.close();\n            read.close();\n            serverSocket.close();\n        } catch (IOException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n\n    }\n\n}\n</code></pre>\n\n<p><strong>Client</strong>:</p>\n\n<pre><code> public class Client {\n    Socket client = null;\n    BufferedReader reader = null;\n    BufferedWriter writer = null;\n\n    void connectToServer(String hostAddress, int port) {\n        try {\n            System.out.println(\"Client is waitting.\");\n            client = new Socket(hostAddress, port);\n            reader = new BufferedReader(new InputStreamReader(\n                    client.getInputStream()));\n            writer = new BufferedWriter(new OutputStreamWriter(\n                    client.getOutputStream()));\n            String readedLine = null;\n            readedLine = reader.toString();\n            while ((readedLine = reader.readLine()) != null) {\n                System.out.println(readedLine);\n            }\n\n        } catch (UnknownHostException e) {\n            System.out.println(\"Host name is unkown.\");\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n\n    void tearDownConnection() {\n        try {\n            if (client != null) {\n                client.close();\n            }\n            if (writer != null) {\n                writer.close();\n            }\n            if (reader != null) {\n                reader.close();\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n</code></pre>\n","question_id":13894613,"tags":["java","sockets","stream","serversocket"],"score":4,"accepted_answer_id":13895115,"is_answered":true,"view_count":601,"last_edit_date":1355594060},{"owner":{"profile_image":"https://www.gravatar.com/avatar/7c140edd287a31919b704c05ab65c74f?s=256&d=identicon&r=PG","account_id":2015638,"user_type":"registered","user_id":1803007,"link":"https://stackoverflow.com/users/1803007/paul","reputation":5854,"display_name":"Paul","accept_rate":76},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/13878768/reassign-input-output-stream","last_activity_date":1355498234,"creation_date":1355488338,"answer_count":1,"title":"Reassign input/output stream?","body":"<p>I am trying to connect to a terminal emulator using a library in android, this will connect to a serial device and should show me sent/received data. To attach to a terminal session I need to provide an <code>inputstream</code> to <code>setTermIn(InputStream)</code> and an <code>outputstream</code> to <code>setTermOut(OutputStream)</code>.</p>\n\n<p>I initialize and attach some streams like so in <code>onCreate()</code>, these are just initial streams and are not attached to the data I want to be sending/receiving.</p>\n\n<pre><code>private OutputStream bos;\nprivate InputStream bis;\n\n...\n\nbyte[] a = new byte[4096];\nbis = new ByteArrayInputStream(a);\nbos = new ByteArrayOutputStream();\nsession.setTermIn(bis);\nsession.setTermOut(bos);\n/* Attach the TermSession to the EmulatorView. */\nmEmulatorView.attachSession(session);\n</code></pre>\n\n<p>I now want to assign the streams to data as I send and receive it, but I think I am doing it wrong. In The <code>sendData()</code> method, which I call every time I press enter, I have:</p>\n\n<pre><code>public void sendData(byte[] data)\n{\n        bos = new ByteArrayOutputStream(data.length);         \n}\n</code></pre>\n\n<p>and in the <code>onReceiveData()</code> method, called every time data is received over serial:</p>\n\n<pre><code>public void onDataReceived(int id, byte[] data)\n{\n        bis = new ByteArrayInputStream(data);           \n}\n</code></pre>\n\n<p>I am not seeing any data on my terminal screen, but I am sending and receiving it over serial successfully. So my question is, should I be setting the streams every single time I am sending and receiving data or just set them once. Also do I need to attach them to the terminal session again <code>mEmulatorView.attachSession(session)</code> somewhere or should the new streams automatically be sent to the screen?</p>\n\n<p>My theory is that my terminal is attached to the old streams and that is why I can't see data on the terminal screen. Would this be correct?</p>\n\n<p>I tried to set the new  input/output streams in each method just once using a boolean and an if statement, but then I get warning messages in logcat</p>\n\n<p><code>RuntimeException 'sending message to a Handler on a dead thread'</code></p>\n\n<p>I've edited it to write and rad now based on answered but I notice that the library has it's own write method to feed data to the terminal, so I don't even know what the streams are for if that is that case, and I need this write to write to the emulator?</p>\n\n<pre><code>public void write(byte[] data,\n              int offset,\n              int count)\nWrite data to the terminal output. The written data will be consumed by the emulation     client as input.\nwrite itself runs on the main thread. The default implementation writes the data into a     circular buffer and signals the writer thread to copy it from there to the OutputStream.\n\nSubclasses may override this method to modify the output before writing it to the  stream, but implementations in derived classes should call through to this method to do the  actual writing.\n\nParameters:\ndata - An array of bytes to write to the terminal.\noffset - The offset into the array at which the data starts.\ncount - The number of bytes to be written.\n</code></pre>\n","question_id":13878768,"tags":["java","android","stream","inputstream","outputstream"],"score":1,"accepted_answer_id":13878988,"is_answered":true,"view_count":619,"last_edit_date":1355498234},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e8fd8a77c68c729e498eb4b996e7fe04?s=256&d=identicon&r=PG","account_id":484013,"user_type":"registered","user_id":899427,"link":"https://stackoverflow.com/users/899427/davz","reputation":1530,"display_name":"Davz","accept_rate":83},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/12066993/uploading-file-as-stream-in-play-framework-2-0","last_activity_date":1355329992,"creation_date":1345614573,"answer_count":1,"title":"Uploading file as stream in play framework 2.0","body":"<p>I'm writing a play 2.0 java application that allows users to upload files. Those files are stored on a third-party service I access using a Java library, the method I use in this API has the following signature:</p>\n\n<pre><code>void store(InputStream stream, String path, String contentType)\n</code></pre>\n\n<p>I've managed to make uploads working using the following simple controller:</p>\n\n<pre><code>public static Result uploadFile(String path) {\n    MultipartFormData body = request().body().asMultipartFormData();\n    FilePart filePart = body.getFile(\"files[]\");\n    InputStream is    = new FileInputStream(filePart.getFile())\n    myApi.store(is,path,filePart.getContentType()); \n    return ok();\n  }\n</code></pre>\n\n<p>My concern is that this solution is not efficient because by default the play framework stores all the data uploaded by the client in a temporary file on the server then calls my uploadFile() method in the controller. </p>\n\n<p>In a traditional servlet application I would have written a servlet behaving this way:</p>\n\n<pre><code>myApi.store(request.getInputStream(), ...)\n</code></pre>\n\n<p>I have been searching everywhere and didn't find any solution. The closest example I found is <a href=\"https://stackoverflow.com/questions/11468768/why-makes-calling-error-or-done-in-a-bodyparsers-iteratee-the-request-hang-in-p\">Why makes calling error or done in a BodyParser&#39;s Iteratee the request hang in Play Framework 2.0?</a> but I didn't found how to modify it to fit my needs.</p>\n\n<p>Is there a way in play2 to achieve this behavior, i.e. having the data uploaded by the client to go \"through\" the web-application directly to another system ?</p>\n\n<p>Thanks.</p>\n","question_id":12066993,"tags":["java","upload","stream","playframework-2.0"],"score":17,"accepted_answer_id":12073180,"is_answered":true,"view_count":5096,"last_edit_date":1495535628},{"owner":{"profile_image":"https://www.gravatar.com/avatar/5e771122094652b50a0ff84c00861bb2?s=256&d=identicon&r=PG","account_id":1282407,"user_type":"registered","user_id":1236210,"link":"https://stackoverflow.com/users/1236210/happy","reputation":73,"display_name":"Happy","accept_rate":100},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/13782237/getting-fake-user-input-to-a-scanner-rerouting-user-input-from-swing-fake-cons","last_activity_date":1355002993,"creation_date":1355002993,"answer_count":0,"title":"Getting fake user input to a scanner? (rerouting user input from swing fake console to a scanner in a parser)","body":"<p>I'm a bit of a novice at java so I'm hoping this will be an easy question to answer.</p>\n\n<p>I'm modding a console/text-based game to also have some GUI, the game normally scans for user input with a scanner in it's parser. I've added a JConsole from Beanshell 2 and redirected output there using tukushans method <a href=\"https://stackoverflow.com/a/1324525/1236210\">https://stackoverflow.com/a/1324525/1236210</a></p>\n\n<p>Now however I need to learn how to get the command &lt; enter>'ed by the user from this console to the scanner in the parser. The code in the parser related to this is:</p>\n\n<pre><code>import java.util.Scanner;\n\npublic Parser() \n{\n    reader = new Scanner(System.in);\n}\n\n...\n\n\nString inputLine;   // will hold the full input line\n    String word1 = null;\n    String word2 = null;\n\n    System.out.print(\"&gt; \");     // print prompt       \n\n    inputLine = reader.nextLine();\n\n    // Find up to two words on the line.\n    Scanner tokenizer = new Scanner(inputLine);\n    if(tokenizer.hasNext()) {\n        word1 = tokenizer.next();      // get first word\n        if(tokenizer.hasNext()) {\n            word2 = tokenizer.next();      // get second word\n            // note: we just ignore the rest of the input line.\n        }\n    }\n    return etc.\n</code></pre>\n\n<p><strong>My main question would be how does one generally create a fake inputstream and feed it to a scanner like reader here?</strong></p>\n\n<p>If you can answer that and/or redirect me to good documentation for this, I'd be more than happy ^_^ I'm hoping that with that knowledge I'll figure out a way myself to connect this console to my scanner. If you do however also answer how to do this for the JConsole, that would be simply awesome, and if you do then you should also post it in <a href=\"https://stackoverflow.com/questions/10155782/java-how-to-read-user-input-from-beanshells-jconsole\">Java - How to read user input from BeanShell&#39;s JConsole?</a></p>\n","question_id":13782237,"tags":["java","stream","java.util.scanner"],"score":1,"is_answered":false,"view_count":273,"last_edit_date":1495540170},{"owner":{"profile_image":"https://i.stack.imgur.com/Eogt1.png?s=256&g=1","account_id":187449,"user_type":"registered","user_id":425507,"link":"https://stackoverflow.com/users/425507/pattmauler","reputation":400,"display_name":"PattMauler","accept_rate":67},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/13768362/combining-pdfs-with-itext-results-in-do-you-want-to-save-changes-dialog-on","last_activity_date":1354992410,"creation_date":1354902582,"answer_count":1,"title":"Combining PDFs with iText results in &quot;Do you want to save changes...?&quot; dialog on close","body":"<p>I've seen similar questions here on SO regarding this problem, though mostly in the context of C#/iTextSharp.</p>\n\n<p>I have the following Java method:</p>\n\n<pre><code>public byte[] prependCoversheet(byte[] pdfBytes)\n{\n    InputStream pdfTemplate = getClass().getResourceAsStream(\"coversheet.pdf\");\n    PdfReader reader = new PdfReader(pdfTemplate);\n    ByteArrayOutputStream baos1 = new ByteArrayOutputStream();\n    ByteArrayOutputStream baos2 = new ByteArrayOutputStream();\n\n    PdfCopyFields copy = new PdfCopyFields(baos1);\n    PdfStamper stamper = new PdfStamper(reader, baos2);\n\n    AcroFields coversheet = stamper.getAcroFields();\n\n    /* Set all the field values here, etc. */\n    coversheet.setField(\"fieldName\", \"Lorem ipsum dolor sit amet.\");\n\n    stamper.setFormFlattening(true);\n    stamper.close();\n\n    copy.addDocument(new PdfReader(baos2.toByteArray()));\n    copy.addDocument(new PdfReader(pdfBytes));\n    copy.close();\n    baos.flush();\n\n    return baos1.toByteArray();\n}\n</code></pre>\n\n<p>The <code>byte[]</code> that is returned is perfectly fine, and opens properly in Adobe Reader (unlike a similar, but probably unrelated <a href=\"https://stackoverflow.com/questions/12717756/strange-byte-behavior-reading-from-a-url\">earlier question of mine</a>).  <strong>The problem is that when the PDF is closed, Reader throws a confirmation dialog:</strong></p>\n\n<blockquote>\n  <p><strong>\"Do you want to save changes to 'someFilename.pdf' before closing?\"</strong></p>\n</blockquote>\n\n<p>Obviously, there are no changes to save.  Other threads on SO have implicated extraneous, unused bytes at the tail of a initial buffer amount as the culprit.  It's not clear to me if that pattern applies in this situation, although if I stop my IDE in Debug mode, and examine the <code>byte[]</code> just before the return, there <em>are</em> a significant number of consecutive bytes with zeroes (0).</p>\n\n<p>In this situation, though, I don't know how to determine what the \"correct\" size of the byte array <em>should</em> be.</p>\n\n<p><strong>UPDATE:</strong> Code example, above, now reflects a suggestion by <a href=\"https://stackoverflow.com/users/1802512/hoaz\">hoaz</a> in the comments to use two <code>ByteArrayOutputStream</code>s.  This solves problem!</p>\n","question_id":13768362,"tags":["java","stream","adobe","arrays","itext"],"score":0,"accepted_answer_id":13780673,"is_answered":true,"view_count":1045,"last_edit_date":1495542560},{"owner":{"profile_image":"https://i.stack.imgur.com/GX1bW.jpg?s=256&g=1","account_id":112158,"user_type":"registered","user_id":295962,"link":"https://stackoverflow.com/users/295962/hank","reputation":4626,"display_name":"Hank","accept_rate":84},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/13760142/java-open-stream-to-device-for-input-and-output","last_activity_date":1354872101,"creation_date":1354872101,"answer_count":0,"title":"Java: open stream to device for input and output","body":"<p>I need to interact with a small label printer (via a form of ESC/P) from java, on a linux environment. The printer is available as character device at <code>/dev/usb/lp0</code>.</p>\n\n<p>Sending data works very well:</p>\n\n<pre><code>FileOutputStream oStream = new FileOutputStream(\"/dev/usb/lp0\");\nBufferedOutputStream lp0out = new BufferendOutputStream(oStream);\nbyte[] data = new byte[]{0x1b, 0x40}; // ESC, @  = initialise printer\nlp0out.write(data);\n</code></pre>\n\n<p>Now to interrogate the printer status, I also need to read its response to a particular command. How do I open a device in input- and output-mode? Do I need to close the outputstream after sending the request, then open the device for input?</p>\n","question_id":13760142,"tags":["java","stream"],"score":5,"is_answered":false,"view_count":1390},{"owner":{"profile_image":"https://www.gravatar.com/avatar/4b4d4252b67bd3056104858bb307b487?s=256&d=identicon&r=PG","account_id":330924,"user_type":"registered","user_id":655283,"link":"https://stackoverflow.com/users/655283/taobitz","reputation":546,"display_name":"Taobitz","accept_rate":71},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/53633089/using-java-predicate-and-lambda","last_activity_date":1628751252,"creation_date":1544015325,"answer_count":6,"title":"Using Java Predicate and Lambda","body":"<p>Why does the below code return <code>Predicate&lt;String&gt;</code> and not <code>boolean</code>? </p>\n\n<p>My understanding is that the <code>!s.isEmpty()</code> check here is going against the Predicate <code>boolean test(T t);</code> The return type here is <code>boolean</code>. </p>\n\n<p>So in my lambda should my <code>nonEmptyStringPredicate</code> not be of type <code>boolean</code>? Obviously, it's not, I'm just trying to understand why it's not. </p>\n\n<pre><code>Predicate&lt;String&gt; nonEmptyStringPredicate = (String s) -&gt; !s.isEmpty();\n</code></pre>\n","question_id":53633089,"tags":["java","lambda","java-8","predicate","functional-interface"],"score":11,"accepted_answer_id":53633161,"is_answered":true,"view_count":19937,"last_edit_date":1544016183},{"owner":{"profile_image":"https://www.gravatar.com/avatar/3117abe7c4e175ea6ff1343a802e50fb?s=256&d=identicon&r=PG","account_id":1160637,"user_type":"registered","user_id":1140193,"link":"https://stackoverflow.com/users/1140193/arhimmel","reputation":81,"display_name":"arhimmel"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42133297/spring-request-scoped-beans-in-lambda","last_activity_date":1628678471,"creation_date":1486633870,"answer_count":4,"title":"Spring Request scoped beans in lambda","body":"<p>I have a spring application that injects certain beans are injexted based on the request context.  In this example it is the Facebook bean.</p>\n\n<pre><code>@RestController\n@RequestMapping(\"facebook\")\npublic class FacebookInjectionController {\n\n    @Autowired\n    private Facebook facebook;\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @RequestMapping(method = RequestMethod.GET)\n    public List&lt;String&gt; blah() {\n        String firstName = facebook.userOperations().getUserProfile().getFirstName();\n        return Arrays.asList(firstName);\n    }\n\n    @RequestMapping(method = RequestMethod.GET, value = \"complex\")\n    public List&lt;String&gt; blah2() {\n        UserJwt principal = (UserJwt) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n\n        Stream&lt;User&gt; stream = StreamSupport.stream(userRepository.findAll().spliterator(), true);\n\n        return stream.filter(u -&gt; u.getUid().equals(principal.getUid()))\n                .map(u -&gt;\n                        facebook.userOperations().getUserProfile().getFirstName()\n                ).collect(Collectors.toList());\n    }\n\n}\n</code></pre>\n\n<p>This code will run normally but every so often it will fail with the following error:</p>\n\n<blockquote>\n  <p>2017-02-09 01:39:59.133 ERROR 40802 --- [o-auto-1-exec-2]\n  o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for\n  servlet [dispatcherServlet] in context with path [] threw exception\n  [Request processing failed; nested exception is\n  org.springframework.beans.factory.BeanCreationException: Error\n  creating bean with name 'scopedTarget.facebook': Scope 'request' is\n  not active for the current thread; consider defining a scoped proxy\n  for this bean if you intend to refer to it from a singleton; nested\n  exception is java.lang.IllegalStateException: No thread-bound request\n  found: Are you referring to request attributes outside of an actual\n  web request, or processing a request outside of the originally\n  receiving thread? If you are actually operating within a web request\n  and still receive this message, your code is probably running outside\n  of DispatcherServlet/DispatcherPortlet: In this case, use\n  RequestContextListener or RequestContextFilter to expose the current\n  request.] with root cause</p>\n</blockquote>\n\n<pre><code>java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n    at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)\n    at org.springframework.web.context.request.AbstractRequestAttributesScope.get(AbstractRequestAttributesScope.java:41)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:340)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:197)\n    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:187)\n    at com.sun.proxy.$Proxy137.userOperations(Unknown Source)\n    at com.roomsync.FacebookInjectionController.lambda$blah2$5(FacebookInjectionController.java:43)\n    at com.roomsync.FacebookInjectionController$$Lambda$10/2024009478.apply(Unknown Source)\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:193)\n    at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:175)\n    at java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1374)\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:512)\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:502)\n    at java.util.stream.ReduceOps$ReduceTask.doLeaf(ReduceOps.java:747)\n    at java.util.stream.ReduceOps$ReduceTask.doLeaf(ReduceOps.java:721)\n    at java.util.stream.AbstractTask.compute(AbstractTask.java:316)\n    at java.util.concurrent.CountedCompleter.exec(CountedCompleter.java:731)\n    at java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:289)\n    at java.util.concurrent.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:902)\n    at java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1689)\n    at java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1644)\n    at java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:157)\n</code></pre>\n\n<p>I have tried multiple solutions (including <a href=\"https://stackoverflow.com/questions/14986519/spring-mvc-how-to-use-a-request-scoped-bean-inside-a-spawned-thread\">Spring MVC: How to use a request-scoped bean inside a spawned thread?</a>) but none have worked. </p>\n\n<p>Is there a way to pass a request scoped bean down to a lambda or another thread?</p>\n\n<p>going of what <a href=\"https://stackoverflow.com/users/1262865/john16384\">https://stackoverflow.com/users/1262865/john16384</a> said i have changed my config to:</p>\n\n<pre><code>   @Bean\n@Scope(value = \"inheritableThreadScope\", proxyMode = ScopedProxyMode.INTERFACES)\npublic ConnectionRepository connectionRepository(ConnectionFactoryLocator connectionFactoryLocator) {\n    Authentication authentication = SecurityContextHolder.getContext().getAuthentication();\n    if (authentication == null) {\n        throw new IllegalStateException(\"Unable to get a ConnectionRepository: no user signed in\");\n    }\n    return getUsersConnectionRepository(connectionFactoryLocator).createConnectionRepository(authentication.getName());\n}\n\n@Bean\n@Scope(value=\"inheritableThreadScope\", proxyMode=ScopedProxyMode.INTERFACES)\npublic Facebook facebook(ConnectionFactoryLocator connectionFactoryLocator) {\n    Connection&lt;Facebook&gt; connection = connectionRepository(connectionFactoryLocator).findPrimaryConnection(Facebook.class);\n\n    return connection != null ? connection.getApi() : null;\n}\n\n@Bean\n@Scope(value = \"inheritableThreadScope\", proxyMode = ScopedProxyMode.INTERFACES)\npublic ExecutorService fbExecutor () {\n    return Executors.newSingleThreadExecutor();\n}\n</code></pre>\n\n<p>the controller now looks like:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"facebook\")\npublic class FacebookInjectionController {\n\n    @Autowired\n    private Facebook facebook;\n\n    @Autowired\n    private UserRepository userRepository;\n\n    @Autowired\n    private ExecutorService fbExecutor;\n\n    @RequestMapping(method = RequestMethod.GET)\n    public List&lt;String&gt; blah() {\n        String firstName = facebook.userOperations().getUserProfile().getFirstName();\n        return Arrays.asList(firstName);\n    }\n\n    @RequestMapping(method = RequestMethod.GET, value = \"complex\")\n    public List&lt;String&gt; blah2() throws ExecutionException, InterruptedException {\n        UserJwt principal = (UserJwt) SecurityContextHolder.getContext().getAuthentication().getPrincipal();\n\n        Stream&lt;User&gt; stream = StreamSupport.stream(userRepository.findAll().spliterator(), true);\n\n        Future&lt;List&lt;String&gt;&gt; submit = fbExecutor.submit(() -&gt; stream.filter(u -&gt; u.getUid().equals(principal.getUid()))\n                .map(u -&gt;\n                        facebook.userOperations().getUserProfile().getFirstName()\n                )\n                .collect(Collectors.toList()));\n\n        return submit.get();\n    }\n\n}\n</code></pre>\n\n<p>i also have the following config:</p>\n\n<pre><code>@Configuration\npublic class BeanFactoryConfig implements BeanFactoryAware {\n    private static final Logger LOGGER = Logger.getLogger(BeanFactoryConfig.class);\n\n    @Override\n    public void setBeanFactory(BeanFactory beanFactory) throws BeansException {\n        if (beanFactory instanceof ConfigurableBeanFactory) {\n\n//            logger.info(\"MainConfig is backed by a ConfigurableBeanFactory\");\n            ConfigurableBeanFactory cbf = (ConfigurableBeanFactory) beanFactory;\n\n            /*Notice:\n             *org.springframework.beans.factory.config.Scope\n             * !=\n             *org.springframework.context.annotation.Scope\n             */\n            org.springframework.beans.factory.config.Scope simpleThreadScope = new SimpleThreadScope() {\n                @Override\n                public void registerDestructionCallback(String name, Runnable callback) {\n                                        RequestAttributes attributes = RequestContextHolder.currentRequestAttributes();\n                    attributes.registerDestructionCallback(name, callback, 3);\n                }\n            };\n            cbf.registerScope(\"inheritableThreadScope\", simpleThreadScope);\n\n            /*why the following? Because \"Spring Social\" gets the HTTP request's username from\n             *SecurityContextHolder.getContext().getAuthentication() ... and this\n             *by default only has a ThreadLocal strategy...\n             *also see https://stackoverflow.com/a/3468965/923560\n             */\n            SecurityContextHolder.setStrategyName(SecurityContextHolder.MODE_INHERITABLETHREADLOCAL);\n\n        }\n        else {\n//            logger.info(\"MainConfig is not backed by a ConfigurableBeanFactory\");\n        }\n    }\n}\n</code></pre>\n\n<p>even with this it sometimes get the error:</p>\n\n<pre><code>{\n    \"timestamp\": 1486686875535,\n    \"status\": 500,\n    \"error\": \"Internal Server Error\",\n    \"exception\": \"java.util.concurrent.ExecutionException\",\n    \"message\": \"org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.facebook' defined in class path resource [com/roomsync/config/SocialConfig.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.social.facebook.api.Facebook]: Factory method 'facebook' threw exception; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'scopedTarget.connectionRepository': Scope 'inheritableThreadScope' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\",\n    \"path\": \"/facebook/complex\"\n}\n</code></pre>\n\n<p>so it seems that im still missing the piece to activate the scope and copying the thread local context to it</p>\n","question_id":42133297,"tags":["java","spring","spring-mvc","lambda","spring-social"],"score":4,"is_answered":true,"view_count":4295,"last_edit_date":1495541344},{"owner":{"profile_image":"https://lh3.googleusercontent.com/a/AATXAJwSyRvLVYm8L5JLiXudkANVxrpqPIMYdFptclJY=k-s256","account_id":22424453,"user_type":"registered","user_id":16631292,"link":"https://stackoverflow.com/users/16631292/aleksander-bara%c5%84ski","reputation":11,"display_name":"Aleksander Barański"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68724195/incompatible-parameter-types-in-lambda-expression-in-custom-sorting-function-com","last_activity_date":1628588083,"creation_date":1628587421,"answer_count":1,"title":"Incompatible parameter types in lambda expression in custom sorting function comparator","body":"<p>I am making a custom sorting function as an excercise for uni.</p>\n<pre><code>package com.mycompany.sortowanie;\npublic interface Comp&lt;T&gt;{\n     &lt;T&gt; boolean compare(T o1, T o2);\n}\n</code></pre>\n<p>and</p>\n<pre><code>package com.mycompany.sortowanie;\n\nimport java.util.LinkedList;\n\npublic class MaszynaSortujaca&lt;T&gt; {\n   public void sort(LinkedList&lt;T&gt; arr, Comp cmp) {\n       for(int i = 0; i &lt; arr.size()-1; i++) {\n            for(int j = 0; j &lt; arr.size()-i-1; j++) {\n                if(cmp.compare(arr.get(j), arr.get(j+1))) {\n                    T temp = arr.get(j);\n                    arr.set(j, arr.get(j+1));\n                    arr.set(j+1, temp);\n                }\n            }\n        } \n    }\n}\n</code></pre>\n<p>Please ignore the bits of polish language in here. Whenever I try to use a function on some class it gives me &quot;incompatible parameter types in lambda expression&quot; compilation error, like this:</p>\n<pre><code>m.sort(p, (Person n1, Person n2) -&gt; {return n1.getAge() &lt; n2.getAge();});\n</code></pre>\n<p>I don't understand why they are considered incompatible parameter types and I don't know what to do at this stage.\nHere is the code of the Person class in case anyone needs that:</p>\n<pre><code>package com.mycompany.sortowanie;\n\npublic class Person{\n    private final String name;\n    private final int age;\n    Person(String name, int age) {\n        this.name = name;\n        this.age = age;\n    }\n    public int getAge() {\n        return age;\n    }\n    public String getName() {\n        return name;\n    }\n\n}\n</code></pre>\n","question_id":68724195,"tags":["java","sorting","lambda","comparator"],"score":0,"is_answered":true,"view_count":168},{"owner":{"profile_image":"https://lh3.googleusercontent.com/-7yqimEjG-H4/AAAAAAAAAAI/AAAAAAAAA5k/PJTKqFUGiFc/photo.jpg?sz=256","account_id":12734034,"user_type":"registered","user_id":9249569,"link":"https://stackoverflow.com/users/9249569/avalon","reputation":34,"display_name":"Avalon"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64853705/how-to-save-this-stream-thing-into-a-variable","last_activity_date":1628450510,"creation_date":1605509199,"answer_count":3,"title":"How to save this stream thing into a variable","body":"<p>I'm printing this out functionally.</p>\n<pre><code>listaITSAV.stream().sorted().forEach(System.out::println);\n</code></pre>\n<p>But I want to save the sorting of this list in a variable and then print the variable containing the sorting.</p>\n<p>note: ListaITSAV is a LinkedList</p>\n<pre><code>LinkedList&lt;String&gt; listaITSAV = new LinkedList&lt;String&gt;();\n</code></pre>\n","question_id":64853705,"tags":["java","sorting","lambda","functional-programming","stream"],"score":-2,"is_answered":true,"view_count":278},{"owner":{"user_type":"does_not_exist","display_name":"user16578994"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68690321/how-to-convert-if-while-for-logic-in-to-streams","last_activity_date":1628325153,"creation_date":1628322020,"answer_count":1,"title":"how to convert if, while, for logic in to streams","body":"<p>So, I have made a program to count words by occurrence, and print them by des order, also if the words have same frequency, they will be sorted alphabetically (also list contains Russian words, if the words have same frequency, the Russian words will go down from English words, and Russian words will be sorted Alphabetically as well).</p>\n<ul>\n<li><p>if the word length is less then 4, or their frequency is less than 10, I want to remove them.</p>\n</li>\n<li><p>I need to check if word contains .,!? to remove them, and add them without those chars. For example: <code>hello!</code> will be added <code>hello</code>, or <code>Bye!</code> will be added <code>Bye</code></p>\n</li>\n</ul>\n<p>Here is a good example for it:</p>\n<pre><code>лицами-18\nApex-15\nazet-15\nxder-15\nанатолю-15\nандреевич-15\nбатальона-15\nhello-13\nzello-13\nполноте-13\n</code></pre>\n<p>Here is my code:</p>\n<pre><code>public String countWords(List&lt;String&gt; lines) {\n\n    StringBuilder input = new StringBuilder();\n    StringBuilder answer = new StringBuilder();\n\n    for (String line : lines){\n        if(line.length() &gt; 3){\n            if(line.contains(&quot;,&quot;)){\n                line = line.replace(&quot;,&quot;, &quot;&quot;);\n                input.append(line).append(&quot; &quot;);\n            }else if (line.contains(&quot;.&quot;)){\n                line = line.replace(&quot;.&quot;, &quot;&quot;);\n                input.append(line).append(&quot; &quot;);\n            }else if (line.contains(&quot;!&quot;)){\n                line = line.replace(&quot;!&quot;, &quot;&quot;);\n                input.append(line).append(&quot; &quot;);\n            }else if (line.contains(&quot;?&quot;)){\n                line = line.replace(&quot;?&quot;, &quot;&quot;);\n                input.append(line).append(&quot; &quot;);\n            }else{\n                input.append(line).append(&quot; &quot;);\n            }\n        }\n    }\n\n    String[] strings = input.toString().split(&quot;\\\\s&quot;);\n\n    List&lt;String&gt; list = new ArrayList&lt;&gt;(Arrays.asList(strings));\n\n    Map&lt;String, Integer&gt; unsortMap = new HashMap&lt;&gt;();\n\n    while (list.size() != 0){\n        String word = list.get(0);\n        int freq = Collections.frequency(list, word);\n        if (word.length() &gt;= 4 &amp;&amp; freq &gt;= 10){\n            unsortMap.put(word.toLowerCase(), freq);\n        }\n\n        list.removeAll(Collections.singleton(word));\n    }\n\n    List&lt;String&gt; sortedEntries = unsortMap.entrySet().stream()\n            .sorted(Comparator.comparingLong(Map.Entry&lt;String, Integer&gt;::getValue)\n                    .reversed()\n                    .thenComparing(Map.Entry::getKey)\n            )\n            .map(it -&gt; it.getKey() + &quot; - &quot; + it.getValue())\n            .collect(Collectors.toList());\n\n    for (int i = 0; i &lt; sortedEntries.size(); i++) {\n        if(i&lt;sortedEntries.size()-1) {\n            answer.append(sortedEntries.get(i)).append(&quot;\\n&quot;);\n        }\n        else{\n            answer.append(sortedEntries.get(i));\n        }\n    }\n\n    return answer.toString();\n\n}\n</code></pre>\n<p>So, as you can see my code works fine. However, I want to go beyond this, and I want to write the same logic without using If, While, For. I want to write the same logic with streams or lambdas. As you can see I was able to write one part of the logic, to sort the list. However, I was not able to write the other parts where I have if and while loops. I am new to Streams and I want to know if there is some way I could write the same code, without using for, while, if statements, and only use streams.</p>\n","question_id":68690321,"tags":["java","loops","lambda","java-stream"],"score":0,"accepted_answer_id":68690473,"is_answered":true,"view_count":125,"last_edit_date":1628325153},{"owner":{"profile_image":"https://lh3.googleusercontent.com/a/AATXAJzIJlB5jHxoHXDSAmXGauEGU0pixGqQMYNKcqTE=k-s256","account_id":22309154,"user_type":"registered","user_id":16533368,"link":"https://stackoverflow.com/users/16533368/ham-ozymandias","reputation":1,"display_name":"Ham Ozymandias"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68660220/how-to-convert-a-multidimensional-string-array-stringto-a-multidimensional","last_activity_date":1628142322,"creation_date":1628133658,"answer_count":1,"title":"How to convert a multidimensional String array (String[][])to a multidimensional double array (double[][]) by using java 8 stream?","body":"<p>for example, convert a String[][]  {{&quot;1&quot;,&quot;2&quot;},{&quot;3&quot;,&quot;4&quot;},{&quot;5&quot;,&quot;6&quot;}} to a double[][] {{1.0,2.0},{3.0,4.0},{5.0,6.0}}.\nI tried:</p>\n<pre><code>Arrays.stream(strArr).map(s -&gt;\n            Arrays.stream(s).mapToDouble(Double::parseDouble).toArray()).toArray();\n</code></pre>\n<p>but it doesn't work.</p>\n","question_id":68660220,"tags":["java","lambda","stream"],"score":0,"is_answered":true,"view_count":45,"last_edit_date":1628133957},{"owner":{"profile_image":"https://www.gravatar.com/avatar/43b10cda7765a73d2fb04f3ded1239c4?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":13342575,"user_type":"registered","user_id":9630366,"link":"https://stackoverflow.com/users/9630366/nehacharya","reputation":927,"display_name":"nehacharya"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68630624/how-to-filter-a-string-date-range-from-an-arraylist-using-filter-in-java","last_activity_date":1627967968,"creation_date":1627967214,"answer_count":1,"title":"How to filter a String date range from an arrayList using filter() in Java?","body":"<p>I am trying to filter records from a <code>List&lt;People&gt;</code> based on date range which are stored as <code>Strings</code>.</p>\n<p><code>List</code> (showing 3 entries only):</p>\n<pre><code>[[&quot;Steve&quot;,&quot;Baseball&quot;,&quot;Brazil&quot;,&quot;August 14, 2020&quot;], [&quot;Ammie&quot;,&quot;Basketball&quot;,&quot;Malaysia&quot;,&quot;September 8, 2021&quot;], [&quot;Tom&quot;,&quot;Cricket&quot;,&quot;UK&quot;,&quot;December 1, 2020&quot;]]\n</code></pre>\n<p>How can I filter all records between <code>startDate (String): August 14, 2020</code> to <code>endDate (String): September 8, 2020</code>?</p>\n<p>Currently I am doing this but it's not getting the range values. It only matches either the start date or the end date which isn't what I want.</p>\n<pre><code>return people.stream().filter(t -&gt; {\n       return t.getType().equals(type) &amp;&amp; \n           (t.getDateAdded().equals(startDate) ||\n                 t.getDateAdded().equals(endDate));\n       }\n).limit(numberOfRecords).collect(Collectors.toList());\n</code></pre>\n<p>Any help will be greatly appreciated. Thank you!</p>\n","question_id":68630624,"tags":["java","string","date","filter","lambda"],"score":1,"accepted_answer_id":68630715,"is_answered":true,"view_count":606},{"owner":{"profile_image":"https://www.gravatar.com/avatar/af100a249ec406f17997f626f4472911?s=256&d=identicon&r=PG","account_id":43530,"user_type":"registered","user_id":127278,"link":"https://stackoverflow.com/users/127278/brian","reputation":2263,"display_name":"Brian","accept_rate":94},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/34752575/create-collection-of-cartesian-product-of-two-and-more-lists-with-java-lambda","last_activity_date":1627904880,"creation_date":1452628219,"answer_count":2,"title":"Create collection of cartesian product of two (and more) lists with Java Lambda","body":"<p>I'm able to easily achieve this in Scala with something like:</p>\n\n<pre><code>def permute(xs: List[Int], ys: List[Int]) = {\n  for {x &lt;- xs; y &lt;- ys} yield (x,y)\n}\n</code></pre>\n\n<p>So if I give it {1, 2}, {3, 4} I return {1, 3}, {1, 4}, {2, 3}, {2, 4}</p>\n\n<p>I was hoping to be able to translate this to java 8 using streams.</p>\n\n<p>I'm having a bit of difficulty and I'd like to be able to extend this out farther as I'd like to be able to generate many permuted test samples from more than two lists.</p>\n\n<p>Will it inevitably be a nested mess even using streams or am I not applying myself enough?</p>\n\n<p>Some additional answers were found after realizing that I was looking for a cartesian product:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/32131987/how-can-i-make-cartesian-product-with-java-8-streams\">How can I make Cartesian product with Java 8 streams?</a></p>\n","question_id":34752575,"tags":["java","scala","lambda","for-comprehension"],"score":4,"accepted_answer_id":34752603,"is_answered":true,"view_count":1184,"last_edit_date":1495541822},{"owner":{"profile_image":"https://www.gravatar.com/avatar/faffe5121f9493b772aa748f5fb76fda?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":20663157,"user_type":"registered","user_id":15170662,"link":"https://stackoverflow.com/users/15170662/meetinger","reputation":175,"display_name":"Meetinger"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/68610989/why-cant-java-see-the-interface-method","last_activity_date":1627825814,"creation_date":1627825306,"answer_count":0,"title":"Why can&#39;t Java see the interface method?","body":"<p>I need to connect two Functions and a Consumer.\nTo do this, I created a new interface FunctionToConsumer in which I implemented the atLast method.</p>\n<p>But the atLast method is just not visible.</p>\n<pre><code>error: cannot find symbol\n        someFunc(a.andThen(b).atLast(end));\n                                                                                                  ^\n  symbol:   method atLast(Consumer&lt;JSONObject&gt;)\n  location: interface Function&lt;String,JSONObject&gt;\n</code></pre>\n<pre><code>        FunctionToConsumer&lt;String, JSONObject&gt; a = (result) -&gt; {\n            JSONObject toReturn = null;\n            try {\n                JSONObject toReturn = new JSONObject((String) result);\n            } catch (JSONException e) {\n                e.printStackTrace();\n            }\n            return toReturn;\n        };\n\n        FunctionToConsumer&lt;JSONObject, JSONObject&gt; b = (result) -&gt; {\n            return result;\n        };\n        \n        Consumer&lt;JSONObject&gt; end = (result) -&gt;{\n            //some code;\n        }\n        \n        someFunc(a.andThen(b).atLast(end));\n</code></pre>\n<pre><code>public interface FunctionToConsumer&lt;T, R&gt; extends Function&lt;T, R&gt; {\n//    default Consumer&lt;T&gt; andThen(Consumer&lt;R&gt; after) {\n//        Objects.requireNonNull(after);\n//        return (T t) -&gt; {after.accept(apply(t));};\n//    }\n    default Consumer&lt;T&gt; atLast(Consumer&lt;R&gt; consumer) {\n        Objects.requireNonNull(consumer);\n        return (T t) -&gt; consumer.accept(apply(t));\n    }\n}\n\n</code></pre>\n","question_id":68610989,"tags":["java","oop","lambda","interface","callback"],"score":0,"is_answered":false,"view_count":123,"last_edit_date":1627825814},{"owner":{"profile_image":"https://i.stack.imgur.com/uMc2f.jpg?s=256&g=1","account_id":19954866,"user_type":"registered","user_id":14623694,"link":"https://stackoverflow.com/users/14623694/wais-shuja","reputation":113,"display_name":"Wais Shuja"},"closed_date":1627714126,"link":"https://stackoverflow.com/questions/68587350/how-to-calculate-average-in-java","last_activity_date":1627632823,"creation_date":1627631733,"answer_count":1,"title":"How to calculate average in java?","body":"<p>I'm following a tutorial and I didn't get this part where we get the average of these numbers.<br />\nWould you please explain how are these numbers calculated and how do we get <strong>7.5</strong> as result ?</p>\n<pre><code>//   Finding the average of the numbers squared\n\n    Arrays.stream(new int[] {1,2,3,4}).map(n -&gt; n * n).average().ifPresent(System.out::println);\n</code></pre>\n<p>result -&gt;\n7.5</p>\n","question_id":68587350,"tags":["java","lambda","stream"],"score":-1,"accepted_answer_id":68587589,"closed_reason":"Needs details or clarity","is_answered":true,"view_count":915},{"owner":{"profile_image":"https://lh6.googleusercontent.com/-oRyW3LjDz-w/AAAAAAAAAAI/AAAAAAAAP8A/7Gh46FLZd7Y/photo.jpg?sz=256","account_id":7370139,"user_type":"registered","user_id":5610563,"link":"https://stackoverflow.com/users/5610563/swapnil-jaju","reputation":442,"display_name":"Swapnil Jaju","accept_rate":75},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/41668634/java-8-stream-map-foreach-collect","last_activity_date":1602674689,"creation_date":1484533709,"answer_count":1,"title":"Java 8 Stream + Map + ForEach + Collect","body":"<p>I am reading values from a File and get List.\nlike below - </p>\n\n<pre><code>List&lt;String&gt; fields = Utils.readFile(\"myText.txt\", true);\n</code></pre>\n\n<p>Once I get this <code>List&lt;String&gt;</code> I want to iterate through this list and pass each value to a function which uses this value, queries into DB and prepares a <code>List&lt;MyCustomObject&gt;</code> and returns the same.</p>\n\n<p>Implementing in Java 7 is quite easy but I'm unable to get it in Java 8 using Stream + Map/forEach + Collect operations.</p>\n\n<p>I have tried the below - </p>\n\n<pre><code>Utils.readFile(\"myText-\"+\".txt\", true)\n        .stream()\n        .map(str -&gt; getListOfCustomObjForEachStr(str, pstmt))\n        .collect(Collectors.toList());\n</code></pre>\n\n<p>But it returns a <code>List&lt;List&lt;MyCustomObject&gt;&gt;</code> instead of merged <code>List&lt;MyCustomObject&gt;</code></p>\n\n<p>getListOfCustomObjForEachStr() method returns a List for each input str passed in the above code. And I need a merged List</p>\n\n<p>Can someone please guide me what can be done here to get a merged list? (I'm new to Java 8 so it might seem a silly question but any help is appreciated)</p>\n\n<p><strong>Edit 1</strong>\nGot this implemented like below using FlatMap -\nKindly suggest if any other better way to do it. Hope it helps someone somewhere someday :) Keep sharing.</p>\n\n<pre><code>List&lt;MyCustomObjects&gt; = Utils.readFile(\"myText-\"+\".txt\", true)\n    .stream()\n    .map(str -&gt; getListOfCustomObjForEachStr(str, pstmt))\n    .flatMap(Collection::stream)\n    .collect(Collectors.toList());\n</code></pre>\n","question_id":41668634,"tags":["java","lambda","java-8","java-stream"],"score":10,"accepted_answer_id":41673956,"is_answered":true,"view_count":37947,"last_edit_date":1602674689},{"owner":{"profile_image":"https://i.stack.imgur.com/aaARI.jpg?s=256&g=1","account_id":237170,"user_type":"registered","user_id":505152,"link":"https://stackoverflow.com/users/505152/htafoya","reputation":18509,"display_name":"htafoya","accept_rate":72},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59536168/kotlin-interfaces-as-trailing-lambdas","last_activity_date":1602657014,"creation_date":1577735598,"answer_count":1,"title":"Kotlin - Interfaces as Trailing Lambdas","body":"<p>Which are the rules that make an Interface capable of being used as <em>trailing lambda</em> argument?</p>\n\n<p>I though that the only rule was for it to be having a unique function on its definition, however I got myself into the following problem:</p>\n\n<p>I had this <strong>Java</strong> interface </p>\n\n<pre><code>public interface ToolbarFragmentCallBack {\n    void onNavigationClick();\n}\n</code></pre>\n\n<p>Called from a java class:</p>\n\n<pre><code>public void addToolBar(int container, String title, boolean isParent,\n                       ToolbarFragment.ToolbarFragmentCallBack callback) {\n      //do something\n}\n</code></pre>\n\n<p>Which was called from both Kotlin and Java files:</p>\n\n<p><strong>Kotlin (1):</strong></p>\n\n<pre><code>addToolBar(R.id.toolbar_fragment, toolbarTitle, toolbarParent) {\n            presenter.onClickNavigationToolBar()\n}\n</code></pre>\n\n<p><strong>Java (2):</strong></p>\n\n<pre><code>addToolBar(R.id.toolbar_fragment, definition.getTitle(), false, () -&gt; {\n            activity.onBackPressed();\n        });\n</code></pre>\n\n<p>However, I recently migrated the interface to Kotlin:</p>\n\n<pre><code>interface ToolbarFragmentCallBack {\n    fun onNavigationClick()\n}\n</code></pre>\n\n<p>And now the **Kotlin (1) ** implementation calls don't compile, with message </p>\n\n<blockquote>\n  <p>Type mismatch: inferred type is () -> Unit but\n  ToolbarFragment.ToolbarFragmentCallBack! was expected</p>\n</blockquote>\n","question_id":59536168,"tags":["java","kotlin","lambda","interface"],"score":1,"accepted_answer_id":59536451,"is_answered":true,"view_count":408},{"owner":{"profile_image":"https://graph.facebook.com/1295708890/picture?type=large","account_id":5266362,"user_type":"registered","user_id":4206178,"link":"https://stackoverflow.com/users/4206178/anjil-dhamala","reputation":1584,"display_name":"Anjil Dhamala","accept_rate":57},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64326329/java-8-lambdas-flatmapping-groupingby-and-mapping-to-get-a-map-of-t-and-listk","last_activity_date":1602620422,"creation_date":1602543174,"answer_count":3,"title":"Java 8 Lambdas flatmapping, groupingBy and mapping to get a Map of T and List&lt;K&gt;","body":"<p>Here's what I have so far:</p>\n<pre><code>Map&lt;Care, List&lt;Correlative&gt;&gt; mapOf = quickSearchList\n                .stream()\n                .map(QuickSearch::getFacility)\n                .collect(Collectors.flatMapping(facility -&gt; facility.getFacilityCares().stream(),\n                    Collectors.groupingBy(FacilityCare::getCare,\n                        Collectors.mapping(c -&gt; {\n                            final Facility facility = new Facility();\n                            facility.setId(c.getFacilityId());\n                            return Correlative.createFromFacility(facility);\n                        }, Collectors.toList()))));\n</code></pre>\n<p>I have a list of Quick Searches to begin with. Each item in the quick search has a single facility as in:</p>\n<pre><code>public class QuickSearch {\n  Facility facility;\n}\n</code></pre>\n<p>In every Facility, there's a List of FacilityCare as in:</p>\n<pre><code>public class Facility {\n  List&lt;FacilityCare&gt; facilityCares;\n}\n</code></pre>\n<p>And finally, FacilityCare has Care property as in:</p>\n<pre><code>public class FacilityCare {\n   Care care;\n}\n</code></pre>\n<p>Now, the idea is to convert a List of QuickSearch to a Map of <code>&lt;Care, List&lt;Correlative&gt;&gt;</code>.\nThe code within the mapping() function is bogus, in the example above. FacilityCare only has facilityID and not Facility entity. I want the facility object that went as param in flatMapping to be my param again in mapping() function as in:</p>\n<pre><code>Collectors.mapping(c -&gt; Correlative.createFromFacility(facility)) \n</code></pre>\n<p>where &quot;facility&quot; is the same object as the one in flatMapping.</p>\n<p>Is there any way to achieve this? Please let me know if things need to be explained further.</p>\n<p><strong>Edit:</strong>\nHere's a solution doesn't fully utilize Collectors.</p>\n<pre><code>final Map&lt;Care, List&lt;Correlative&gt;&gt; mapToHydrate = new HashMap&lt;&gt;();\n\n quickSearchList\n  .stream()\n  .map(QuickSearch::getFacility)\n  .forEach(facility -&gt; {\n    facility.getFacilityCares()\n      .stream()\n      .map(FacilityCare::getCare)\n      .distinct()\n      .forEach(care -&gt; {\n        mapToHydrate.computeIfAbsent(care, care -&gt; new ArrayList&lt;&gt;());\n        mapToHydrate.computeIfPresent(care, (c, list) -&gt; {\n          list.add(Correlative.createFromFacility(facility));\n          return list;\n        });\n      });\n    });\n      \n</code></pre>\n","question_id":64326329,"tags":["java","lambda","stream","functional-java"],"score":4,"accepted_answer_id":64337617,"is_answered":true,"view_count":303,"last_edit_date":1602557909},{"owner":{"profile_image":"https://www.gravatar.com/avatar/f23c09f81295e7ec17a347eae1d41bd1?s=256&d=identicon&r=PG","account_id":73570,"user_type":"registered","user_id":211764,"link":"https://stackoverflow.com/users/211764/robb-hoff","reputation":1739,"display_name":"Robb Hoff","accept_rate":81},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64287048/is-it-possible-to-construct-a-java-stream-expression-to-return-a-2d-boolean-arra","last_activity_date":1602614188,"creation_date":1602276101,"answer_count":3,"title":"Is it possible to construct a Java stream expression to return a 2D boolean array, all values set to true?","body":"<p>I'm learning about stream expressions and trying to use them to construct a 2D boolean array, with all values set to true. Something like:</p>\n<pre><code>boolean[][] bool_array = [stream expression returning a\n                             2D array boolean[h][w], all values set to true]\n</code></pre>\n<p>Is this possible to do and what would the expression be?</p>\n<p>I know <code>int[][]</code> arrays may be created using streams, for example</p>\n<pre><code>int h=5;\nint w=8;\nint[][] int_array = IntStream.range(0,h).mapToObj(i-&gt;IntStream.range(0,w).\n          map(j-&gt;1).toArray()).toArray(int[][]::new);\n</code></pre>\n<p>returns an <code>int[5][8]</code> filled with ones. But trying to get this to work for <code>boolean[][]</code></p>\n<pre><code>boolean[][] bool_array = IntStream.range(0,h).mapToObj(i-&gt;IntStream.range(0,w).\n          mapToObj(j-&gt;true).toArray()).toArray(boolean[][]::new);\n</code></pre>\n<p>throws an <code>ArrayStoreException</code>.</p>\n","question_id":64287048,"tags":["java","lambda","java-8","java-stream"],"score":5,"is_answered":true,"view_count":944,"last_edit_date":1602614010},{"owner":{"profile_image":"https://graph.facebook.com/100000092511338/picture?type=large","account_id":3808537,"user_type":"registered","user_id":3160200,"link":"https://stackoverflow.com/users/3160200/luigib","reputation":43,"display_name":"LuigiB"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64336947/java-lambda-to-method","last_activity_date":1602604499,"creation_date":1602598537,"answer_count":2,"title":"Java Lambda to Method","body":"<p>Given that I know little and nothing about java, exactly like my English,</p>\n<p>I have a problem, I have this line of code and I had to delete the lambdas.</p>\n<pre><code>return articles (args -&gt; {}, queryDef);\n</code></pre>\n<p>I used Android Studio, (Alt Enter) and it creates me</p>\n<pre><code>private com.shopify.buy3.Storefront.BlogQuery.ArticlesArgumentsDefinition GetArticlesArgumentsDefinition () {\n\n         return args -&gt; {};\n\n     } \n</code></pre>\n<p>always with lambdas.</p>\n<p>How can I convert args -&gt; {} in order to eliminate them?</p>\n<p>Thank you</p>\n<p>EDIT:</p>\n<pre><code>        public BlogQuery articles(ArticleConnectionQueryDefinition queryDef) {\n        return articles(args -&gt; {}, queryDef);\n    }\n\n    /**\n    * List of the blog's articles.\n    */\n    public BlogQuery articles(ArticlesArgumentsDefinition argsDef, ArticleConnectionQueryDefinition queryDef) {\n        startField(&quot;articles&quot;);\n\n        ArticlesArguments args = new ArticlesArguments(_queryBuilder);\n        argsDef.define(args);\n        ArticlesArguments.end(args);\n\n        _queryBuilder.append('{');\n        queryDef.define(new ArticleConnectionQuery(_queryBuilder));\n        _queryBuilder.append('}');\n\n        return this;\n    }\n</code></pre>\n","question_id":64336947,"tags":["java","generic-lambda"],"score":0,"is_answered":false,"view_count":96,"last_edit_date":1602603506},{"owner":{"profile_image":"https://i.stack.imgur.com/DEzPo.png?s=256&g=1","account_id":4485955,"user_type":"registered","user_id":5048538,"link":"https://stackoverflow.com/users/5048538/stein","reputation":58,"display_name":"stein"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64303463/replace-if-else-method-with-lambda","last_activity_date":1602415556,"creation_date":1602415556,"answer_count":0,"title":"Replace if-else method with lambda","body":"<p>Is it possible to replace a series of if-else clauses such as the firstMatchedValue method below</p>\n<pre><code>foo() {\n    String value = firstMatchedValue(&quot;input&quot;);\n    // Do something useful.\n}\n\nString firstMatchedValue(String bar) {\n    if (&lt;condition1&gt;) {\n        return &quot;value1&quot;;\n    } else if (&lt;condition2&gt;) {\n        return &quot;value2&quot;;\n    }\n    return &quot;value3&quot;;\n}\n</code></pre>\n<p>with a lambda expression with structure similar to the following placeholder code?</p>\n<pre><code>foo() {\n    String value = Optional.of(&quot;input&quot;)\n        .someMethod(bar -&gt; &lt;condition1&gt; return &quot;value1&quot;)\n        .someMethod(bar -&gt; &lt;condition2&gt; return &quot;value2&quot;)\n        .orElse(&quot;value3&quot;)\n}\n</code></pre>\n","question_id":64303463,"tags":["java","lambda"],"score":1,"is_answered":false,"view_count":400},{"owner":{"profile_image":"https://lh6.googleusercontent.com/-HQx21UJoPf4/AAAAAAAAAAI/AAAAAAAABeo/xJjZvaonmjQ/photo.jpg?sz=256","account_id":7874156,"user_type":"registered","user_id":5950472,"link":"https://stackoverflow.com/users/5950472/nagarajan-shanmuganathan","reputation":418,"display_name":"Nagarajan Shanmuganathan","accept_rate":76},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64299543/java-8-find-element-matching-in-a-list-of-objects-where-each-object-has-another","last_activity_date":1602378998,"creation_date":1602375865,"answer_count":3,"title":"Java 8 find element matching in a list of objects where each object has another object","body":"<p>I have two classes:</p>\n<pre><code>class SampleClass {\n   private String testString;\n   private List&lt;Label&gt; labels; \n}\n</code></pre>\n<pre><code>class Label {\n   private String labelName;\n   private String labelValue;\n}\n</code></pre>\n<p>I have a <code>List&lt;SampleClass&gt; sampleClassList</code>. I need to find the find element in the list which has a particular  <code>labelName</code> and <code>labelValue</code> using Java 8.</p>\n<p>If I need to get the <code>SampleClass</code> object based on <code>testString</code> I would do,</p>\n<pre><code>Optional&lt;SampleClass&gt; sampleClass = sampleClassList.stream().filter(entry -&gt; entry.getTestString().equals(&quot;some_value&quot;).findFirst();\n\n</code></pre>\n<p>Now that the filtering involves <code>Label</code> class, I am unable to figure out how to do that. I have tried something like,</p>\n<pre><code>Optional&lt;SampleClass&gt; sampleClass = sampleClassList.stream().filter(entry -&gt; \n                                       entry.getLabels().stream().filter(label -&gt; \n                                            label.getName().equals(&quot;some_name&quot;) &amp;&amp; \n                                            label.getValue().equals(&quot;some_value&quot;)).findFirst()).findFirst();\n\n</code></pre>\n<p>for which I get <code>Bad return type in lambda expression: Optional&lt;Label&gt; cannot be converted to boolean</code>. How would I go about making this change?</p>\n<p>I could make it work by using <code>contains()</code> method</p>\n<pre><code>final Optional&lt;SampleClass&gt; sampleClass = sampleClassList.stream()\n                    .filter(entry -&gt; entry.getLabels()\n                            .contains(new Label().withLabelName(&quot;some_name&quot;).withLabelValue(&quot;some_value&quot;)))\n                    .findFirst();\n</code></pre>\n<p>but would like to know if I can still use <code>stream()</code> to make this happen.</p>\n","question_id":64299543,"tags":["java","lambda","java-8"],"score":0,"accepted_answer_id":64299756,"is_answered":true,"view_count":851,"last_edit_date":1602378478},{"owner":{"profile_image":"https://i.stack.imgur.com/4uapS.png?s=256&g=1","account_id":3649743,"user_type":"registered","user_id":3042207,"link":"https://stackoverflow.com/users/3042207/fabrizio-stellato","reputation":1729,"display_name":"Fabrizio Stellato","accept_rate":42},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64278525/java-11-lambda-aggregate-by-same-property-and-the-filter-with-a-certain-conditi","last_activity_date":1602338374,"creation_date":1602240539,"answer_count":3,"title":"java 11 lambda, aggregate by same property and the filter with a certain condition","body":"<p>I have the following entities:</p>\n<pre><code>ID    | PROPERTY\n\nFOO   | A\nFOO   | Z\nJOHN  | A\nDOE   | Z\n</code></pre>\n<p>Now I want to group these entities by ID and the take the one with property 'A' if one or both valuesare present , otherwise Z.</p>\n<p>Thus the output should be:</p>\n<pre><code>FOO   | A\nJOHN  | A\nDOE   | Z\n</code></pre>\n<p>I was thinking about the groupingBy stream method, but I don't know how what collectors to use neither if is the correct solution:</p>\n<pre><code>list.stream()\n            .collect(Collectors.groupingBy(o -&gt; o.getId(), ? another collector function ?)\n            .collect(Collectors.toList()));\n</code></pre>\n","question_id":64278525,"tags":["java","lambda","java-8","java-11"],"score":0,"is_answered":true,"view_count":177},{"owner":{"profile_image":"https://i.stack.imgur.com/YWa3V.jpg?s=256&g=1","account_id":1832012,"user_type":"registered","user_id":1663215,"link":"https://stackoverflow.com/users/1663215/can-bayar","reputation":497,"display_name":"Can Bayar","accept_rate":75},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64276508/passing-element-count-and-indices-into-foreach-operation-of-streams","last_activity_date":1602316075,"creation_date":1602232151,"answer_count":1,"title":"Passing Element Count and Indices Into forEach Operation of Streams","body":"<p>I have a simple <strong>Stream</strong> operation like this:</p>\n<pre><code>interactionList.stream().forEach(interaction -&gt; process(interaction));\n</code></pre>\n<p>and then a process method</p>\n<pre><code>private void process(Interaction interaction) {\n    doSomething(interaction);\n}\n</code></pre>\n<p>I want to change my process function so that it can use the total number of elements and the index of the currently processed one as in this updated version</p>\n<pre><code>private void process(Interaction interaction, int index, int totalCount) {\n    doSomething(interaction, int index, int totalCount);\n}\n</code></pre>\n<p>Is there a way to simply pass these arguments into the <strong>lambda expression</strong> of <code>forEach</code> method by collecting them from the <strong>same stream without using extra prior operations</strong>? Looking for something like this:</p>\n<pre><code>interactionList.stream().forEach(interaction -&gt; process(interaction, stream.index, stream.count));\n</code></pre>\n<p>I am just asking this out of curiosity so please don't provide any alternative methods, I already implemented it by using collectors.</p>\n","question_id":64276508,"tags":["java","lambda","java-stream"],"score":0,"accepted_answer_id":64291194,"is_answered":true,"view_count":49,"last_edit_date":1602240461},{"owner":{"profile_image":"https://i.stack.imgur.com/tNtPs.jpg?s=256&g=1","account_id":3571848,"user_type":"registered","user_id":2981971,"link":"https://stackoverflow.com/users/2981971/zhou","reputation":643,"display_name":"Zhou"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/64282400/why-must-i-catch-exceptions-when-providing-lambda-argument","last_activity_date":1602259492,"creation_date":1602255092,"answer_count":1,"title":"Why must I catch exceptions when providing lambda argument?","body":"<p>Consider the following example:</p>\n<pre><code>public class LambdaArgsTest {\n    private static void display(Supplier&lt;?&gt; arg) {\n        try {\n            // this is the place where the Exception(&quot;wrong&quot;) might be thrown\n            // and it is in fact handled\n            System.out.println(arg.get());\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void main(String[] args) {\n        display(() -&gt; {\n            if(/*some condition*/) {\n                // this statement will be rejected due to unhandled exception\n                throw new Exception(&quot;wrong&quot;);\n            }\n            return &quot;abcde&quot;;\n        });\n    }\n}\n</code></pre>\n<p>Here comes the question: the lambda argument in the above example is an object that'll be executed later inside the &quot;display()&quot; method. It is obviously not executed when passing the arguments to the &quot;display()&quot;.</p>\n<p>Why is it rejected by the compiler? I think it's quite reasonable to surround it by try...catch only when the lambda is actually called.</p>\n","question_id":64282400,"tags":["java","lambda","functional-interface"],"score":2,"accepted_answer_id":64282723,"is_answered":true,"view_count":318},{"owner":{"profile_image":"https://www.gravatar.com/avatar/784311347e657bc34c93a6b7cb7d3faf?s=256&d=identicon&r=PG","account_id":987434,"user_type":"registered","user_id":1005607,"link":"https://stackoverflow.com/users/1005607/gene-b","reputation":10946,"display_name":"gene b.","accept_rate":64},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/60066120/java-8-lambda-map-listobject-list-of-object-arrays-to-listbean","last_activity_date":1580855595,"creation_date":1580853411,"answer_count":1,"title":"Java 8 Lambda: Map List&lt;Object[]&gt; (List of Object Arrays) to List&lt;Bean&gt;","body":"<p>I receive a List of Object arrays,</p>\n\n<pre><code>List&lt;Object[]&gt; rawRows = service.getRows();\n</code></pre>\n\n<p>Any particular value can be obtained as e.g.</p>\n\n<pre><code>(Date)((Object[])rawRows.get(i))[3]  // In each item, Array Element #3 is a certain Date\n</code></pre>\n\n<p>I need to map this to a <code>List&lt;Report&gt;</code> for a POJO which has specific fields defined for each value:</p>\n\n<pre><code>public class Report {\n    private String abbreviation;\n    private String username;\n    private Integer recallid;\n    private Date recalldate;\n    // ... + getters/setters   \n\n    // Constructor\n    public Report (String abbreviation, String username, Integer recallid, Date recalldate, ...)\n    {\n    }\n}\n</code></pre>\n\n<p>I'm stumped on the following: How would I specify the <strong>index</strong> in this Lamba expression to map to my new <code>List&lt;Report&gt;</code>?</p>\n\n<pre><code>List&lt;Report&gt; detailReports =  rawRows.stream().map(obj -&gt; new Report(\n            (String)((Object[])rawRows.get(0))[0], // I'm hard-coding (0) but need \"i\"\n            (String)((Object[])rawRows.get(0))[1], // I'm hard-coding (0) but need \"i\"\n            (Integer)((Object[])rawRows.get(0))[2],// I'm hard-coding (0) but need \"i\"\n            (Date)((Object[])rawRows.get(0))[3],   // I'm hard-coding (0) but need \"i\"\n            //...\n                           )).collect(Collectors.toList());             \n</code></pre>\n\n<p>My goal is to have a <code>List&lt;Report&gt;</code> with all the array elements mapped to the POJO per object exactly per the specified sequence. But there's no <code>i</code> index for me to track. In this example I'm hard-coding <code>0</code> as the <code>rawRow</code> to get from the original List.</p>\n","question_id":60066120,"tags":["java","lambda","java-8"],"score":1,"accepted_answer_id":60066519,"is_answered":true,"view_count":1770,"last_edit_date":1580854684},{"owner":{"profile_image":"https://i.stack.imgur.com/bHXDR.jpg?s=256&g=1","account_id":4068081,"user_type":"registered","user_id":3342253,"link":"https://stackoverflow.com/users/3342253/jan-nielsen","reputation":10971,"display_name":"Jan Nielsen","accept_rate":94},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25299653/java-idiom-for-lambdas-with-non-sam-interfaces","last_activity_date":1580842571,"creation_date":1407987478,"answer_count":4,"title":"Java idiom for lambdas with non-SAM interfaces","body":"<p>In Java, interfaces with a single abstract method (i.e., SAM types or functional interfaces) can be elegantly implemented with lambda instead of an anonymous class:</p>\n\n<pre><code>    // SAM ActionListener with anonymous implementation\n    button.addActionListener(\n        new ActionListener(){\n            public void actionPerformed(Event e){\n                System.out.println(\"button via anon!\");\n            }\n        }\n    );\n</code></pre>\n\n<p>can be replaced with:</p>\n\n<pre><code>    // SAM ActionListener with lambda implementation\n    button.addActionListener(\n        e -&gt; System.out.println(\"button via lambda!\")\n    );\n</code></pre>\n\n<p>But for interfaces with multiple abstract methods, lambda cannot be directly applied. For example, <code>java.awt.event.WindowListener</code> has seven methods. But often a chunk a code is only interested in defining one of these seven methods. </p>\n\n<p>To implement the behavior with an anonymous class override, we can:</p>\n\n<pre><code>    // non-SAM with adapter implementation with override\n    window.addWindowListener(\n        new WindowAdapter() {\n            @Override\n            public void windowOpened(Event e){\n                System.out.println(\"WindowAdapter opened via override!\");\n            }\n        }\n    );\n</code></pre>\n\n<p>but is there a more elegant way with lambdas?</p>\n\n<pre><code>@FunctionalInterface\npublic interface ActionListener {\n    void actionPerformed(Event e);\n}\n\npublic interface WindowListener {\n    void windowOpened(Event e);\n\n    void windowClosing(Event e);\n}\n\npublic class WindowAdapter implements WindowListener {\n\n    public void windowOpened(Event e){\n        System.out.println(\"windowOpened in adapter!\");\n    }\n\n    public void windowClosing(Event e){\n        System.out.println(\"windowClosing in adapter!\");\n    }\n}\n</code></pre>\n\n<hr>\n\n<p><strong>Note</strong>: @maythesource.com asked a similar, but broader question: \"<em>What would someone do with a MouseListener if they wanted to implement multiple methods within the anonymous class?</em>\" The most upvoted and accepted answer is to use an anonymous implementation. My question is about an elegant lambda solution for non-SAM types. Therefore, <strong>this question is not a duplicate</strong> of <a href=\"https://stackoverflow.com/q/21833537/3342253\">Java 8 Lambda Expressions - what about multiple methods in nested class</a>.</p>\n\n<hr>\n","question_id":25299653,"tags":["java","lambda","java-8"],"score":11,"accepted_answer_id":25299701,"is_answered":true,"view_count":2214,"last_edit_date":1495542259},{"owner":{"profile_image":"https://www.gravatar.com/avatar/5776e315b2aeae4338bee6b40ef1104d?s=256&d=identicon&r=PG","account_id":2977257,"user_type":"registered","user_id":2528063,"link":"https://stackoverflow.com/users/2528063/makepeacegreatagain","reputation":35839,"display_name":"MakePeaceGreatAgain","accept_rate":73},"closed_date":1580826070,"link":"https://stackoverflow.com/questions/60059078/handle-checked-exception-in-lambda","last_activity_date":1580825964,"creation_date":1580825011,"answer_count":2,"title":"Handle checked exception in lambda","body":"<p>I have some code that throws a checked exception. I want to call that code within a lambda in order to create a map from another map:</p>\n\n<pre><code>Map&lt;String, Coordinate&gt; map = getMap();\nMap&lt;String, Integer&gt; result = map.entrySet().stream().collect(\n    toMap(x -&gt; x.getKey(), x -&gt; doSomething(x.getValue)));\n</code></pre>\n\n<p>where <code>doSometing</code> is the code that throws the exception:</p>\n\n<pre><code>int doSomething(Coordinate c) throws MyException { ... }\n</code></pre>\n\n<p>Now compiler surely complains about the exception not being handled. So I surround it with a <code>try-catch</code>, which looks pretty ugly:</p>\n\n<pre><code>Map&lt;String, Integer&gt; result = map.entrySet().stream().collect(\n    toMap(x -&gt; x.getKey(), x -&gt; {\n        try {\n            return doSomething(x.getValue());\n        } catch (MyException e) {\n            e.printStackTrace();\n            // return some error-code here???\n        }\n    }));\n</code></pre>\n\n<p>which also does not compile as we need to return something in the <code>catch</code>-case. However there´s not much sense in returning anything here in this exceptional case, which is why I actually do not want to handle the exception at that level. Can´t I just handle the exception in my calling code, where I create the lambda? So to say just one level above?</p>\n\n<pre><code>try {\n    Map&lt;String, Integer&gt; result = ...\n} catch (MyException e) { ... }\n</code></pre>\n\n<p>But that does not compile because the exception thrown from the lambda is not handled.</p>\n","question_id":60059078,"tags":["java","exception","lambda"],"score":0,"accepted_answer_id":60059299,"closed_reason":"Duplicate","is_answered":true,"view_count":251,"last_edit_date":1580825308},{"owner":{"profile_image":"https://www.gravatar.com/avatar/258ef03e5d2e94b95ee0739387106d32?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":448913,"user_type":"registered","user_id":843400,"link":"https://stackoverflow.com/users/843400/custardbun","reputation":3527,"display_name":"CustardBun","accept_rate":64},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/45335722/calling-contains-on-a-list-for-an-optional-value-in-java","last_activity_date":1580812906,"creation_date":1501096861,"answer_count":4,"title":"Calling contains on a list for an optional value in Java?","body":"<p>In Java 8, </p>\n\n<p>I currently have a lambda that looks like this:</p>\n\n<pre><code>.createSomething((acceptableStates, someProxy) -&gt; (userId) -&gt;   \n    acceptableStates.contains(someProxy.getSomeAttributeId(userId)))\n</code></pre>\n\n<p>However, we have changed someProxy.getSomeAttributeId to return an <code>Optional&lt;String&gt;</code> instead of a string. </p>\n\n<p>What's the cleanest / most accepted way to essentially check for if <code>acceptableStates</code> contains the value of <code>someProxy.getSomeAttributeId(userId)</code> if the attribute returned isn't empty? </p>\n\n<p>(Note: <code>acceptableStates</code> is still a list of strings, not of <code>Optional&lt;String&gt;</code>)</p>\n","question_id":45335722,"tags":["java","lambda","java-8","option-type"],"score":4,"accepted_answer_id":45336092,"is_answered":true,"view_count":4463,"last_edit_date":1516110280},{"owner":{"profile_image":"https://i.stack.imgur.com/TycNx.jpg?s=256&g=1","account_id":8876156,"user_type":"registered","user_id":6628220,"link":"https://stackoverflow.com/users/6628220/zamiurratul","reputation":201,"display_name":"zamiurratul"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/59286883/how-to-get-arguments-from-an-instance-of-functional-interface-object-passed-as-l","last_activity_date":1580805183,"creation_date":1576070898,"answer_count":1,"title":"How to get arguments from an instance of functional interface object passed as lambda?","body":"<pre><code>@FunctionalInterface\npublic interface ServiceCaller {\n    void callService();\n}\n\n//common method to execute any service call\npublic void executeService(ServiceCaller serviceCaller) {\n    //do common things\n    //i want to access dbValidationRequest/apiValidationRequest here for logging purpose\n    try {\n        serviceCaller.callService();\n    } catch (Exception ex) {\n        //do common things\n        LogUtils.log(logger, ex);\n    }\n    //do common things\n}\n\n//my clients call this\npublic void validateFromDb(DbValidationRequest dbValidationRequest){\n    commonUtils.executeService(()-&gt; dbValidationService.validate(dbValidationRequest));\n}\n\n//my clients call this\npublic void validateFromApi(ApiValidationRequest apiValidationRequest){\n    commonUtils.executeService(()-&gt; apiValidationService.validate(apiValidationRequest));\n}\n\n\n</code></pre>\n\n<p>This is a controller of Java Spring Application. Inside the <strong>executeService</strong> method, i pass an instance of <strong>ServiceCaller</strong> interface. I call all my service from controller using this method. if i evaluate using intelliJ IDEA then i can view values of the dbValidationRequest/apiValidationRequest inside executeService method (as arg$2, see attached picture). I need to print those objects for logging purpose, i also don't want to use aspect at all. How can i do this. If intelliJ IDEA can see the values, why can't i programatically?\n<a href=\"https://i.stack.imgur.com/qtgXb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qtgXb.png\" alt=\"enter image description here\"></a></p>\n","question_id":59286883,"tags":["java","lambda","functional-interface"],"score":3,"accepted_answer_id":60044009,"is_answered":true,"view_count":1219},{"owner":{"profile_image":"https://i.stack.imgur.com/d7vxz.png?s=256&g=1","account_id":8315485,"user_type":"registered","user_id":7128034,"link":"https://stackoverflow.com/users/7128034/developer-hatch","reputation":16101,"display_name":"developer_hatch","accept_rate":85},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/60045871/lambda-confusion-in-kotlin-it-x-vs-equalsx","last_activity_date":1580776319,"creation_date":1580757960,"answer_count":1,"title":"Lambda confusion in Kotlin, it == x vs equals(x)","body":"<p>I'm doing a simple test to understand why my code wasn't working.</p>\n\n<pre><code>    val v = listOf(\"1\", \"2\", \"2\", \"3\")\n    assertThat((v.filter { equals(\"2\") }).size , `is`(2))\n</code></pre>\n\n<p>it fails with reason \"size is 0\"</p>\n\n<p>but when I change it for: </p>\n\n<pre><code>    val v = listOf(\"1\", \"2\", \"2\", \"3\")\n    assertThat((v.filter { it == \"2\" }).size , `is`(2))\n</code></pre>\n\n<p>In Java I could do:</p>\n\n<pre><code>.filter(Objects::equals)\n</code></pre>\n\n<p>It returns the expected result. Anybody can understand why is this behaviour??? </p>\n","question_id":60045871,"tags":["java","kotlin","lambda","equals"],"score":4,"accepted_answer_id":60048990,"is_answered":true,"view_count":218},{"owner":{"profile_image":"https://www.gravatar.com/avatar/e1d24d3d556b38209a4c6d577572acb3?s=256&d=identicon&r=PG","account_id":1044207,"user_type":"registered","user_id":1049537,"link":"https://stackoverflow.com/users/1049537/rollen-holt","reputation":507,"display_name":"Rollen Holt","accept_rate":25},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/32094174/java-8-collectorstring-a-r-is-not-a-functional-interface-who-can-tell-why","last_activity_date":1580697334,"creation_date":1439983603,"answer_count":2,"title":"java 8 Collector&lt;String, A, R&gt; is not a functional interface, who can tell why?","body":"<p>The follow code:</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        Stream.of(1, 2, 3).map(String::valueOf).collect(Collectors::toList);\n    }\n}\n</code></pre>\n\n<p>IntelliJ tell me:</p>\n\n<p><code>Collector&lt;String, A, R&gt;</code> is not a functional interface</p>\n\n<p>but when I modify the code as follows, everything is ok, I don't know why?</p>\n\n<pre><code>public class Test {\n    public static void main(String[] args) {\n        Stream.of(1, 2, 3).map(String::valueOf).collect(Collectors.&lt;String&gt;toList());\n    }\n}\n</code></pre>\n","question_id":32094174,"tags":["java","lambda","java-8","java-stream","collectors"],"score":10,"is_answered":true,"view_count":9561,"last_edit_date":1580697334},{"owner":{"profile_image":"https://lh3.googleusercontent.com/-B6UC9oHKdt0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdAI7oc7FXHS0kxWuiBD_llQ1srnw/mo/photo.jpg?sz=256","account_id":16194539,"user_type":"registered","user_id":11692488,"link":"https://stackoverflow.com/users/11692488/suraj-kudale","reputation":39,"display_name":"Suraj Kudale"},"closed_date":1580614474,"link":"https://stackoverflow.com/questions/60022408/is-there-any-good-and-efficient-way-in-java-8-to-convert-hashmap-values-to-keys","last_activity_date":1580652097,"creation_date":1580604684,"answer_count":0,"title":"Is there any good and efficient way in Java 8 to convert HashMap values to keys and vice versa when the type is &lt;String, List&lt;String&gt;&gt;","body":"<p>Please find programm below :</p>\n\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n\nList&lt;String&gt; l1 = new ArrayList&lt;&gt;();\nl1.add(\"G1\");\nl1.add(\"G2\");\n\n\nList&lt;String&gt; l2 = new ArrayList&lt;&gt;();\nl2.add(\"G2\");\nl2.add(\"G3\");\n\nmap.put(\"R1\", l1);\nmap.put(\"R2\", l2);\n</code></pre>\n\n<p>Now the current output is : </p>\n\n<pre><code>{R2=[G2, G3], R1=[G1, G2]}\n</code></pre>\n\n<p>I would like to write logic in Java 8 in such way that, Map keys should become values and values to keys, like below : </p>\n\n<pre><code>{G1=[R1], G2=[R2, R1], G3=[R2]}\n</code></pre>\n\n<p>I tried with below but it doesn't work  :</p>\n\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; mapInversed = \n        map.entrySet()\n           .stream()\n           .collect(Collectors.groupingBy(Map.Entry::getValue, Collectors.mapping(Map.Entry::getKey, Collectors.toList()))) \n</code></pre>\n\n<p>Exception : Type mismatch: cannot convert from <code>Map&lt;Object,List&lt;Object&gt;&gt; to Map&lt;String,List&lt;String&gt;&gt;</code></p>\n\n<p>But I want it in same type <code>Map&lt;String,List&lt;String&gt;&gt;</code></p>\n\n<p>anyone could help ?</p>\n","question_id":60022408,"tags":["java","lambda","java-8","java-stream"],"score":0,"closed_reason":"Duplicate","is_answered":false,"view_count":52,"last_edit_date":1580652097},{"owner":{"profile_image":"https://www.gravatar.com/avatar/17da83c192c8199a71d568ef1cba90f1?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":3388387,"user_type":"registered","user_id":2843856,"link":"https://stackoverflow.com/users/2843856/dcoder","reputation":3408,"display_name":"DCoder","accept_rate":58},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/23068305/lambda-expression-example-not-working-in-java-8","last_activity_date":1580627234,"creation_date":1397502692,"answer_count":3,"title":"Lambda Expression example not working in java 8","body":"<p>I am trying to learn Lambda Expression in java 8. I do have installed eclipse plugin and java 8 SDK but when I am trying to execute following code eclipse is showing error.</p>\n\n<pre><code>(String s) -&gt; { \n            s=\"hello\";\n            System.out.println(s); }\n</code></pre>\n\n<p>its showing \"The left-hand side of an assignment must be a variable\" error.</p>\n\n<p>please help.</p>\n","question_id":23068305,"tags":["java","lambda","java-8"],"score":6,"accepted_answer_id":23068362,"is_answered":true,"view_count":45055},{"owner":{"profile_image":"https://www.gravatar.com/avatar/200caadf813a3434e30ab5899728c9d1?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":9652154,"user_type":"registered","user_id":7162941,"link":"https://stackoverflow.com/users/7162941/jam","reputation":509,"display_name":"jam"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/60021629/sql-joining-like-grouping-list","last_activity_date":1580599895,"creation_date":1580596275,"answer_count":1,"title":"SQL joining like grouping List","body":"<p>I have a couple of list that I want to group if a given field that represent the same is equals, and I was wondering if there is a way to doing in lambdas or streams</p>\n\n<p>Suppose we have a list that have a container information </p>\n\n<pre><code>container1-&gt; containerInfo\ncontainer2-&gt; containerInfo\n</code></pre>\n\n<p>Then we have another list that represent the elements in the container and the container name</p>\n\n<pre><code>element1 -&gt; container1 + elementInfo\nelement2 -&gt; container1 + elementInfo\nelement3 -&gt; container2 + elementInfo\nelement4 -&gt; container2 + elementInfo\n</code></pre>\n\n<p>There is a way I can join by component both list given the conditions that, both are different classes and also I need certain info from both list, at the end I want to have something like this</p>\n\n<pre><code>Map&lt;Integer,List&lt;ContainetElementMap&gt;&gt; map;\n</code></pre>\n\n<p>Eg:</p>\n\n<pre><code>{containerId, {containerName,elements,extraInfo}}\n{containerId, {containerName,elements,extraInfo}}\n</code></pre>\n\n<p>I know there is a groupBy and that could help but it is only working if both objects are the same type, I need something like when sql is doing a join between tables</p>\n","question_id":60021629,"tags":["java","lambda","java-8"],"score":0,"is_answered":false,"view_count":32},{"owner":{"profile_image":"https://lh6.googleusercontent.com/-O5PUc3NOb5U/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAtvQUnJW0HlhzgoUoDWZdiPAF1xg/mo/photo.jpg?sz=256","account_id":14579555,"user_type":"registered","user_id":10530475,"link":"https://stackoverflow.com/users/10530475/andres-murillas","reputation":11,"display_name":"Andres Murillas"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56409929/how-to-define-an-intent-inside-a-lambda-expression","last_activity_date":1559421515,"creation_date":1559418432,"answer_count":1,"title":"How to define an Intent inside a Lambda expression","body":"<p>I'm making an app in Android Studio and I want to go from my <code>LoginActivity</code> to my <code>MainActivity</code> with an <code>Intent</code> from within an <code>OnCompleteListener()</code>.</p>\n\n<p>I've tried with:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>firebaseAuth.signInWithEmailAndPassword(email, password).addOnCompleteListener(this, new OnCompleteListener() {\n    @Override\n    public void onComplete(@NonNull Task task) {\n        if(task.isSuccessful()) {\n            Intent mainActivity = new Intent(getApplicationContext(), MainActivity.class);\n            startActivity(mainActivity);\n            finish();\n        }\n    }\n});\n\n//and\n\nfirebaseAuth.signInWithEmailAndPassword(email, password).addOnCompleteListener(this, new OnCompleteListener() {\n    @Override\n    public void onComplete(@NonNull Task task) {\n        if(task.isSuccessful()) {\n            Intent mainActivity = new Intent(LoginActivity.this, MainActivity.class);\n            startActivity(mainActivity);\n            finish();\n        }\n    }\n});\n</code></pre>\n\n<p>With both parameters, the app compiled properly but stopped when the <code>signInWithEmailAndPassword()</code> method was triggered.</p>\n\n<p>Is there any other parameter I can use?</p>\n","question_id":56409929,"tags":["java","android","android-intent","lambda","java-8"],"score":0,"accepted_answer_id":56410251,"is_answered":true,"view_count":425,"last_edit_date":1559421515},{"owner":{"profile_image":"https://www.gravatar.com/avatar/d7c4ac74e4f208e887af1598a321c1ab?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":14093595,"user_type":"registered","user_id":10181124,"link":"https://stackoverflow.com/users/10181124/chakwok","reputation":1000,"display_name":"chakwok"},"closed_date":1559370941,"link":"https://stackoverflow.com/questions/56404398/a-significant-performance-drop-after-using-lambda-expression-to-override-a-compa","last_activity_date":1559385481,"creation_date":1559370558,"answer_count":0,"title":"A Significant Performance Drop after using lambda expression to override a Comparator. Why?","body":"<p><strong>EDIT:</strong>\nThis is actually a question on leetcode. So the benchmarking is performed by leetcode.</p>\n\n<p>Somewhere in my program, I have to sort a list of <code>Map.Entry&lt;Character, Integer&gt;</code>. Originally, I used the traditional way to override the Comparator for the sort. Then, I also tried another approach with lambda expression.</p>\n\n<p>However, the performance with the use of lambda expression is way worse than the original approach (4x ms vs 1x ms). All the codes in the two program are the same. The only difference is this one line.</p>\n\n<p><strong>Original Code:</strong></p>\n\n<pre><code>list.sort(new Comparator&lt;Map.Entry&lt;Character,Integer&gt;&gt;() \n  {\n     @Override\n     public int compare(Map.Entry&lt;Character,Integer&gt; o1, Map.Entry&lt;Character,Integer&gt; o2) {\n       return o2.getValue().compareTo(o1.getValue());\n  }\n});\n</code></pre>\n\n<p><strong>New Code:</strong></p>\n\n<pre><code>list.sort((o1, o2) -&gt; o2.getValue().compareTo(o1.getValue()));\n</code></pre>\n","question_id":56404398,"tags":["java","performance","sorting","lambda"],"score":0,"closed_reason":"Duplicate","is_answered":false,"view_count":51,"last_edit_date":1559380899},{"owner":{"profile_image":"https://www.gravatar.com/avatar/6f615cd367573f6ef7c3c911209bbc18?s=256&d=identicon&r=PG","account_id":1830812,"user_type":"registered","user_id":1662258,"link":"https://stackoverflow.com/users/1662258/devv","reputation":311,"display_name":"devv","accept_rate":82},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56404114/how-intstream-avoid-hidden-boxing-costs","last_activity_date":1559370458,"creation_date":1559367049,"answer_count":2,"title":"How IntStream avoid hidden boxing costs","body":"<p>When you have </p>\n\n<pre><code>Stream.of(1 ,10).reduce(0,(v1, v2) -&gt; v1 + v2);\n</code></pre>\n\n<p>versus</p>\n\n<pre><code>IntStream.of(1 ,10).reduce(0,(v1, v2) -&gt; v1 + v2);\n</code></pre>\n\n<p>How does `IntStream? avoid the hidden boxing costs? </p>\n\n<p>And why is boxing expensive in terms of performance?</p>\n","question_id":56404114,"tags":["java","performance","lambda"],"score":2,"accepted_answer_id":56404173,"is_answered":true,"view_count":135,"last_edit_date":1559370220},{"owner":{"profile_image":"https://www.gravatar.com/avatar/83eb3c4101206bdcd03528a42e460d89?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":5734410,"user_type":"registered","user_id":4529026,"link":"https://stackoverflow.com/users/4529026/prasad","reputation":1164,"display_name":"Prasad","accept_rate":91},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/55312815/list-filter-in-java8-using-ispresent-method","last_activity_date":1559337317,"creation_date":1553337355,"answer_count":3,"title":"List filter in Java8 using isPresent method","body":"<p>I have one list which contains some String values. I want to iterate the list comparing with another String. Only if another String doesn't match with any element in the list, then I should enter the loop. I tried something like below, but it didn't worked. Any other alternate approach to do the same in Java 8?</p>\n\n<p>Note: In the loop I'm adding some more elements to the same list. Hence, to avoid <code>ConcurrentModificationException</code>, I'm using a if-condition for my validation.</p>\n\n<pre><code>List&lt;String&gt; mylist = new ArrayList&lt;&gt;();\nmylist.add(\"test\");\nmylist.add(\"test1\");\n\nif(mylist.stream()\n        .filter(str -&gt; !(str.equalsIgnoreCase(\"test\")))\n        .findFirst()\n        .isPresent()) {\n    System.out.println(\"Value is not Present\");\n}\n</code></pre>\n","question_id":55312815,"tags":["java","lambda","java-8","java-stream"],"score":7,"accepted_answer_id":55312949,"is_answered":true,"view_count":1660,"last_edit_date":1553348986},{"owner":{"profile_image":"https://www.gravatar.com/avatar/96e60caf32b063b08625cc13cb835ca1?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":2213470,"user_type":"registered","user_id":1954695,"link":"https://stackoverflow.com/users/1954695/amol-patil","reputation":995,"display_name":"Amol Patil","accept_rate":100},"closed_date":1516627177,"link":"https://stackoverflow.com/questions/48375351/is-there-any-runtime-benefit-of-using-lambda-expression-in-java","last_activity_date":1559154815,"creation_date":1516600092,"answer_count":3,"title":"Is there any runtime benefit of using lambda expression in Java?","body":"<p>I am reading couple of blogs and answers as well on lambda expression provided in Java 8. </p>\n\n<p>I am not able to figure out, is there any run-time benefit of unit lambda expression or not? </p>\n\n<p>I have copied following text from different sources which are too much confusing to me. </p>\n\n<p>One answer is saying - </p>\n\n<blockquote>\n  <p>\"lambdas do NOT create a new scope, they share the same scope as the\n  enclosing block/environment\"</p>\n</blockquote>\n\n<p>In the one blog -</p>\n\n<blockquote>\n  <p>\"There are no runtime benefits of using lambda expressions, so I will\n  use it cautiously because I don’t mind writing few extra lines of\n  code.\"</p>\n</blockquote>\n\n<p>From one other blog -</p>\n\n<blockquote>\n  <p>\"one more benefit lambda expressions Sequential and Parallel Execution\n  Support by passing behavior in methods\"</p>\n</blockquote>\n\n<p>So there is lots off confusion for me. \nPlease help me to clear this so I can avoid keeping wrong approach in mind before digging more in to this stuff.</p>\n\n<p>I have run following code and I can say the lambda expression in the following code is just replacement for the anonymous inner class and its running on main thread. </p>\n\n<pre><code>List&lt;Integer&gt; list = new ArrayList&lt;&gt;();\nlist.add(12);\nlist.forEach(V -&gt; {\n    System.out.println(V);\n});\n</code></pre>\n\n<p><strong>Are we reducing any time complexity or space complexity?</strong></p>\n","question_id":48375351,"tags":["java","lambda","java-8"],"score":5,"accepted_answer_id":48379603,"closed_reason":"Needs details or clarity","is_answered":true,"view_count":2427,"last_edit_date":1559129683},{"owner":{"profile_image":"https://i.stack.imgur.com/1TJ8i.jpg?s=256&g=1","account_id":9343308,"user_type":"registered","user_id":6935294,"link":"https://stackoverflow.com/users/6935294/generationtech","reputation":79,"display_name":"GenerationTech"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56365458/with-higher-order-functions-in-kotlin-why-are-lambdas-shown-outside-of-other-fu","last_activity_date":1559149804,"creation_date":1559149509,"answer_count":1,"title":"With higher-order functions in Kotlin, why are lambdas shown outside of other function parameters?","body":"<p>In some training I'm reviewing, I don't understand exactly how an example higher-order function and lambda are connected through syntax</p>\n\n<p>This higher-order Kotlin function</p>\n\n<pre><code>fun myWith(name: String, block: String.() -&gt; Unit) {\n  name.block()\n}\n</code></pre>\n\n<p>Is invoked like this</p>\n\n<pre><code>myWith(fish.name) {\n  capitalize()\n}\n\n</code></pre>\n\n<p>I understand the second part is a lambda but I don't understand why it's not included as a second parameter to the function and just hung outside of the parameters. Like why is it not invoked as:</p>\n\n<pre><code>myWith(fish.name, { capitalize() } )\n</code></pre>\n\n<p>Later a more verbose description of the example is shown as</p>\n\n<pre><code>myWith(fish.name, object : Function1&lt;String, Unit&gt; {\n  override fun invoke(name: String) {\n    name.capitalize()\n  }\n})\n</code></pre>\n\n<p>Which IS including the lambda inside the normal list of parameters to <code>myWith</code></p>\n","question_id":56365458,"tags":["java","function","kotlin","lambda"],"score":1,"accepted_answer_id":56365529,"is_answered":true,"view_count":532},{"owner":{"profile_image":"https://www.gravatar.com/avatar/4b7c114b1b3ba58c20231c699b91eede?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":3938317,"user_type":"registered","user_id":3253853,"link":"https://stackoverflow.com/users/3253853/alex-man","reputation":4776,"display_name":"Alex Man","accept_rate":66},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56333011/converting-array-iteration-to-lambda-function-using-java8","last_activity_date":1559037092,"creation_date":1558995716,"answer_count":3,"title":"Converting array iteration to lambda function using Java8","body":"<p>I am trying to convert to Lambda function</p>\n\n<p>So far I am able to convert the above code to lambda function like as shown below</p>\n\n<pre><code>Stream.of(acceptedDetails, rejectedDetails)\n.filter(list -&gt; !isNull(list) &amp;&amp; list.length &gt; 0)\n.forEach(new Consumer&lt;Object&gt;() {\n    public void accept(Object acceptedOrRejected) {\n        String id;\n        if(acceptedOrRejected instanceof EmployeeValidationAccepted) {\n            id = ((EmployeeValidationAccepted) acceptedOrRejected).getId();\n        } else {\n            id = ((EmployeeValidationRejected) acceptedOrRejected).getAd().getId();\n        }\n\n        if(acceptedOrRejected instanceof EmployeeValidationAccepted) {\n            dates1.add(new Integer(id.split(\"something\")[1]));\n            Integer empId = Integer.valueOf(id.split(\"something\")[2]);\n            empIds1.add(empId);\n        } else {\n            dates2.add(new Integer(id.split(\"something\")[1]));\n            Integer empId = Integer.valueOf(id.split(\"something\")[2]);\n            empIds2.add(empId);\n        }\n    }\n});\n</code></pre>\n\n<p>But still my goal was to avoid repeating the same logic and also to convert to Lambda function, still in my converted lambda function I feel its not clean and efficient.</p>\n\n<p>This is just for my learning aspect I am doing this stuff by taking one existing code snippet.</p>\n\n<p>Can anyone please tell me how can I improvise the converted Lambda function </p>\n","question_id":56333011,"tags":["java","lambda","java-8","functional-programming","functional-interface"],"score":3,"accepted_answer_id":56334785,"is_answered":true,"view_count":184,"last_edit_date":1559033068},{"owner":{"profile_image":"https://i.stack.imgur.com/0bC3F.jpg?s=256&g=1","account_id":5863731,"user_type":"registered","user_id":4618492,"link":"https://stackoverflow.com/users/4618492/littlealien","reputation":807,"display_name":"littleAlien","accept_rate":56},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/54294416/generic-way-to-update-pojos-via-getters-and-setters","last_activity_date":1559030719,"creation_date":1548089317,"answer_count":2,"title":"Generic way to update pojos via getters and setters","body":"<p>Let's say I have POJO with getters and setters of different types. I want to write some generic algorithm for updating data from one to another based on just defining getters and setters via lambdas.\nI'm trying to create it this way </p>\n\n<pre><code>private static final Map&lt;Function&lt;Entity, Object&gt;, BiConsumer&lt;Entity, Object&gt;&gt; ACCESSORS = new HashMap\n        &lt;Function&lt;Entity, Object&gt;, BiConsumer&lt;Entity, Object&gt;&gt;() {{\n    put(Entity::getAreaCode, Entity::setAreaCode);\n}});\n</code></pre>\n\n<p>Then I go through all entries applying target entity to them and if result of getter is not null then I want to apply corresponding setter for other entity.</p>\n\n<p>But it won't work because Object is not castable to String. And I want to use it for different types not only String but also Integers, etc...</p>\n\n<p>Is is solvable in some simple approach without creating special converter and associate it with every entry?</p>\n","question_id":54294416,"tags":["java","generics","lambda","java-8","method-reference"],"score":8,"accepted_answer_id":54294733,"is_answered":true,"view_count":1193,"last_edit_date":1548091286},{"owner":{"profile_image":"https://www.gravatar.com/avatar/4b7c114b1b3ba58c20231c699b91eede?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":3938317,"user_type":"registered","user_id":3253853,"link":"https://stackoverflow.com/users/3253853/alex-man","reputation":4776,"display_name":"Alex Man","accept_rate":66},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56327888/java8-lambda-for-checking-two-conditions","last_activity_date":1559030073,"creation_date":1558966901,"answer_count":2,"title":"Java8 lambda for checking two conditions","body":"<p>I have the following code snippet which I would try to change to the lambda function.</p>\n\n<pre><code>if(catList != null &amp;&amp; catList.size() &gt; 0) {\n    animalType = AnimalType.CAT;\n    HttpEntity&lt;List&lt;?&gt;&gt; request = new HttpEntity&lt;&gt;(catList, headers);\n    response = restTemplate.postForObject(apiUrl, request, String.class);\n} else if(dogList != null &amp;&amp; dogList.size() &gt; 0) {\n    animalType = AnimalType.DOG;\n} else {\n    return;\n}\n</code></pre>\n\n<p>Somehow I have written like as shown below, but don't know to incorporate the <strong>dogList</strong> checking the condition</p>\n\n<pre><code>Optional.of(catList) \n    .map(catList -&gt; {\n        ....\n    })\n    .orElse(return); //&lt;------ THIS IS NOT POSSIBLE\n</code></pre>\n\n<p>Can anyone please help me with this</p>\n","question_id":56327888,"tags":["java","lambda","java-8","option-type","functional-interface"],"score":2,"accepted_answer_id":56328212,"is_answered":true,"view_count":1466,"last_edit_date":1559030073},{"owner":{"profile_image":"https://www.gravatar.com/avatar/03413e95fce34cecbef31f25fd6f54e7?s=256&d=identicon&r=PG","account_id":1542409,"user_type":"registered","user_id":1436729,"link":"https://stackoverflow.com/users/1436729/vicky","reputation":890,"display_name":"vicky","accept_rate":81},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48948271/filter-an-arraylist-via-optional-in-java-8","last_activity_date":1558897142,"creation_date":1519390022,"answer_count":2,"title":"Filter an ArrayList via Optional in Java 8","body":"<p>I am getting an exception while trying to filter and iterate over a Optional using Java 8. I have an object Subject which is being added in an array list and a value of null also.</p>\n\n<p><strong>Problem Statement:</strong> I have an ArrayList, I want to iterate it, filter it and then based on that, only print that record which fulfills the condition.</p>\n\n<pre><code>    package com.example.app;\n\n    import java.util.ArrayList;\n    import java.util.List;\n    import java.util.Optional;\n\n\n    public class OptionalTest {\n\n        public static void main(String[] args) {\n\n           System.out.println(\"getSubject: \" + getSubjects());\n           // print the Subject with the name \"Math\"\n            System.out.println(\"getSubject \" + getSubjects().filter((Subject s) -&gt; s.getName().equalsIgnoreCase(\"Math\")));\n\n        }\n\n\n        private static Optional getSubjects() {\n\n            Subject subject1 = new Subject(1, \"Math\", (short)2, \"\");\n            Subject subject2 = new Subject(2, \"Social Science\", (short)4, \"Social Science\");\n            Subject subject3 = new Subject(3, \"English\", (short)6, \"Literature\");\n\n            List&lt;Subject&gt; subjects = new ArrayList&lt;&gt;();\n            Optional&lt;List&lt;Subject&gt;&gt; optional = Optional.of(subjects);\n\n            subjects.add(subject1);\n            subjects.add(subject2);\n            subjects.add(null); \n            subjects.add(subject3);\n\n            return optional;\n        }\n\n    }\n\n    class Subject {\n        int id;\n        String name;\n        short type;\n        String description;\n\n        public Subject(int id, String name, short type, String description) {\n            this.id = id;\n            this.name = name;\n            this.type = type;\n            this.description = description;\n        }\n\n        public int getId() {\n            return id;\n        }\n\n        public void setId(int id) {\n            this.id = id;\n        }\n\n        public String getName() {\n            return name;\n        }\n\n        public void setName(String name) {\n            this.name = name;\n        }\n\n        public short getType() {\n            return type;\n        }\n\n        public void setType(short type) {\n            this.type = type;\n        }\n\n        public String getDescription() {\n            return description;\n        }\n\n        public void setDescription(String description) {\n            this.description = description;\n        }\n\n        @Override\n        public String toString() {\n            return \"\\nSubject{\" + \"id=\" + id + \", name=\" + name + \", type=\" + type + \", description=\" + description + '}'+\"\\n\";\n        }\n\n\n    }\n</code></pre>\n","question_id":48948271,"tags":["java","lambda","java-8"],"score":-1,"accepted_answer_id":48948479,"is_answered":true,"view_count":4664,"last_edit_date":1519469931},{"owner":{"profile_image":"https://i.stack.imgur.com/fVWny.jpg?s=256&g=1","account_id":4289184,"user_type":"registered","user_id":3506000,"link":"https://stackoverflow.com/users/3506000/robert-bain","reputation":9183,"display_name":"Robert Bain","accept_rate":88},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/31004899/java-8-collectors-tomap-sortedmap","last_activity_date":1540385373,"creation_date":1435068021,"answer_count":5,"title":"Java 8 Collectors.toMap SortedMap","body":"<p>I'm using Java 8 lambdas and want to use <code>Collectors</code> <code>toMap</code> to return a <code>SortedMap</code>. The best I can come up with is to call the following <code>Collectors</code> <code>toMap</code> method with a dummy <code>mergeFunction</code> and <code>mapSupplier</code> equal to <code>TreeMap::new</code>.</p>\n\n<pre><code>public static &lt;T, K, U, M extends Map&lt;K, U&gt;&gt;\n        Collector&lt;T, ?, M&gt; toMap(Function&lt;? super T, ? extends K&gt; keyMapper,\n                Function&lt;? super T, ? extends U&gt; valueMapper,\n                BinaryOperator&lt;U&gt; mergeFunction,\n                Supplier&lt;M&gt; mapSupplier) {\n    BiConsumer&lt;M, T&gt; accumulator = (map, element) -&gt; map.merge(keyMapper.apply(element),\n            valueMapper.apply(element), mergeFunction);\n    return new CollectorImpl&lt;&gt;(mapSupplier, accumulator, mapMerger(mergeFunction), CH_ID);\n}\n</code></pre>\n\n<p>I don't want to pass in a merge function though, as I just want <code>throwingMerger()</code>, in the same way as the basic <code>toMap</code>implementation as follows:</p>\n\n<pre><code>public static &lt;T, K, U&gt;\n        Collector&lt;T, ?, Map&lt;K, U&gt;&gt; toMap(Function&lt;? super T, ? extends K&gt; keyMapper,\n                Function&lt;? super T, ? extends U&gt; valueMapper) {\n    return toMap(keyMapper, valueMapper, throwingMerger(), HashMap::new);\n}\n</code></pre>\n\n<p>What would be the best practise method of using <code>Collectors</code> to return a <code>SortedMap</code>?</p>\n","question_id":31004899,"tags":["java","lambda","java-8","java-stream","collectors"],"score":83,"accepted_answer_id":31005110,"is_answered":true,"view_count":53618,"last_edit_date":1435154012},{"owner":{"profile_image":"https://www.gravatar.com/avatar/3b32e5b17c6968423ff7da79703fb815?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":9135869,"user_type":"registered","user_id":6795572,"link":"https://stackoverflow.com/users/6795572/s-kumar","reputation":555,"display_name":"S Kumar","accept_rate":70},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/52965421/replace-lambda-with-method-reference-containing-new-keyword","last_activity_date":1540373207,"creation_date":1540373020,"answer_count":1,"title":"Replace lambda with method reference containing new keyword","body":"<pre><code>List&lt;Employee&gt; empListObjDeepCopy = empListRef.stream().map(inv -&gt; new Employee(inv)).collect(Collectors.toList());\n</code></pre>\n\n<p>How to replace this <code>(inv -&gt; new Employee(inv))</code> lambda with Method reference. </p>\n\n<p>Full Code reference: </p>\n\n<pre><code>package org.learn.copy;\n\nimport java.util.ArrayList;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class DeepCopy {\n    public static void main(String[] args){\n        Employee emp = new Employee();\n        emp.setName(\"Hello\");\n        emp.setRollNumber(\"12345\");\n\n        Employee emp1 = new Employee();\n        emp1.setName(\"Hi\");\n        emp1.setRollNumber(\"123456\");\n\n        List&lt;Employee&gt; empList = new ArrayList&lt;&gt;();\n        empList.add(emp);\n        empList.add(emp1);\n\n        List&lt;Employee&gt; empListRef = empList;\n\n        System.out.println(\"empList Obj: \"+empList.get(0).getName());\n        System.out.println(\"empListRef Obj: \"+empListRef.get(0).getName());\n\n        List&lt;Employee&gt; empListObjDeepCopy = empListRef.stream().map(inv -&gt; new Employee(inv)).collect(Collectors.toList());\n\n        empListObjDeepCopy.get(0).setName(\"Hi\");\n\n        System.out.println(\"empList Obj: \"+empList.get(0).getName());\n        System.out.println(\"empListRef Obj: \"+empListRef.get(0).getName());\n        System.out.println(\"empListObjDeepCopy Obj: \"+empListObjDeepCopy.get(0).getName());\n    }\n}\n\nclass Employee {\n    private String name; \n    private String rollNumber;\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getRollNumber() {\n        return rollNumber;\n    }\n    public void setRollNumber(String rollNumber) {\n        this.rollNumber = rollNumber;\n    }\n    public Employee(Employee employee) {\n        this.name = employee.name;\n        this.rollNumber = employee.rollNumber;\n    }\n    public Employee() {\n        super();\n    }   \n}\n</code></pre>\n","question_id":52965421,"tags":["java","lambda","java-8"],"score":-2,"is_answered":true,"view_count":97,"last_edit_date":1540373131},{"owner":{"profile_image":"https://www.gravatar.com/avatar/98b92a2c71f2c132cb47fb44d9413300?s=256&d=identicon&r=PG","account_id":1687012,"user_type":"registered","user_id":1550077,"link":"https://stackoverflow.com/users/1550077/appidevo","reputation":3195,"display_name":"AppiDevo","accept_rate":37},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/52945997/how-to-test-if-the-correct-lambda-value-was-passed-as-an-argument-with-mockito","last_activity_date":1540367229,"creation_date":1540287991,"answer_count":2,"title":"How to test if the correct lambda value was passed as an argument (with Mockito)?","body":"<p>I have the function:</p>\n\n<pre><code>public class Cache {\n    (...)\n    public void removeAllIf(Predicate&lt;Product&gt; predicate) {\n        (...)\n    }\n}\n</code></pre>\n\n<p>And I call <code>productsCache.removeAllIf(Product::isChecked);</code></p>\n\n<p>Currentlly I test it with </p>\n\n<p><code>then(productsCache).should().removeAllIf(any(Predicate.class));</code></p>\n\n<p>but this is not accurate (not testing if the passed lambda is <code>Product::isChecked</code>). The second problem is that I get the lint message: <em>Unchecked assignment</em>.</p>\n\n<p>Is it better solution?</p>\n\n<p><strong>Edited:</strong></p>\n\n<p>I don't want to test <code>removeAllIf</code> function implementation. I want to test if <code>removeAllIf</code> was called with proper argument.</p>\n\n<p>The scenario to test:</p>\n\n<pre><code>public class Repository {\n    public void removeCheckedProducts() {\n        remoteDataSource.removeCheckedProducts();\n        localDataSource.removeCheckedProducts();\n        cache.removeAllIf(Product::isChecked);\n\n    }\n}\n</code></pre>\n\n<p>Unit test:</p>\n\n<pre><code>@Test\npublic void removeCheckedProducts() {\n\n    //when\n    repository.removeCheckedProducts();\n\n    //then\n    then(remoteDataSource).should().removeCheckedProducts();\n    then(localDataSource).should().removeCheckedProducts();\n    then(cache).should().removeAllIf(any(Predicate.class));\n\n\n}\n</code></pre>\n","question_id":52945997,"tags":["java","unit-testing","lambda","java-8","mockito"],"score":0,"is_answered":false,"view_count":597,"last_edit_date":1540289008},{"owner":{"profile_image":"https://www.gravatar.com/avatar/ea01424c9d2d46bfaa591e75307e10e0?s=256&d=identicon&r=PG","account_id":1397236,"user_type":"registered","user_id":1326779,"link":"https://stackoverflow.com/users/1326779/drg","reputation":59,"display_name":"drg"},"closed_date":1540327090,"link":"https://stackoverflow.com/questions/52957066/why-does-foreach-andthen-require-casting-to-consumer","last_activity_date":1540327029,"creation_date":1540325104,"answer_count":0,"title":"Why does forEach, andThen require casting to Consumer?","body":"<p>I have an <code>Employee</code> object with an <code>incrementAge</code> method. The type of the argument to <code>forEach</code>, <code>Consumer&lt; Employee&gt;</code> is properly inferred with</p>\n\n<pre><code>emps.forEach(Employee::incrementAge);\n</code></pre>\n\n<p>However, with <code>.andThen</code>, it requires a cast. For example this will not compile:</p>\n\n<pre><code>emps.forEach((Employee::incrementAge).andThen(Employee::incrementAge));\n</code></pre>\n\n<p>But this will:</p>\n\n<pre><code>emps.forEach(((Consumer&lt;Employee&gt;)(Employee::incrementAge)).andThen(Employee::incrementAge));\n</code></pre>\n\n<p>Obviously I could just use <code>forEach</code> twice, but I am trying to understand how <code>.andThen</code> works.</p>\n\n<p>So, am I missing something? The cast seems unnecessary.</p>\n","question_id":52957066,"tags":["java","list","lambda"],"score":2,"closed_reason":"Duplicate","is_answered":false,"view_count":78,"last_edit_date":1540325455},{"owner":{"profile_image":"https://i.stack.imgur.com/WMErl.jpg?s=256&g=1","account_id":5619788,"user_type":"registered","user_id":4450024,"link":"https://stackoverflow.com/users/4450024/nu%c3%b1ito-calzada","reputation":4111,"display_name":"Nu&#241;ito Calzada","accept_rate":99},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/52953613/getting-the-result-of-a-completablefuture-supplyasync","last_activity_date":1540314564,"creation_date":1540311310,"answer_count":1,"title":"Getting the result of a CompletableFuture.supplyAsync","body":"<p>I have this piece of code:</p>\n\n<pre><code>CompletableFuture\n    .supplyAsync(() -&gt; {\n        return  smsService.sendSMS(number);\n    }).thenApply(result -&gt; {\n        LOG.info(\"SMS sended \" + result);\n    });\n</code></pre>\n\n<p>but I got a compilation error:</p>\n\n<blockquote>\n  <p>The method <code>thenApply(Function&lt;? super Boolean,? extends U&gt;)</code> in the type\n  <code>CompletableFuture&lt;Boolean&gt;</code> is not applicable for the arguments <code>((&lt;no type&gt; result) -&gt; {})</code></p>\n</blockquote>\n","question_id":52953613,"tags":["java","lambda","java-8","completable-future","nhlambdaextensions"],"score":0,"accepted_answer_id":52953760,"is_answered":true,"view_count":1147,"last_edit_date":1540314564},{"owner":{"profile_image":"https://www.gravatar.com/avatar/b8182c95cf5d0f427920118d6d2e4153?s=256&d=identicon&r=PG","account_id":189393,"user_type":"registered","user_id":428705,"link":"https://stackoverflow.com/users/428705/vivek-goel","reputation":23192,"display_name":"Vivek Goel","accept_rate":76},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/32189443/java8-filter-collect-both-type-of-value","last_activity_date":1540283674,"creation_date":1440441710,"answer_count":2,"title":"Java8 filter collect both type of value","body":"<p>Is there a way to collect both filtered and not filtered value in java 8 filter ?</p>\n\n<p>One way is:</p>\n\n<pre><code>.filter( foo -&gt; {\n    if(!foo.apply()){\n   // add to required collection\n    }\n    return foo.apply();\n  }\n</code></pre>\n\n<p>Is there a better alternative ?</p>\n","question_id":32189443,"tags":["java","lambda","java-8","java-stream"],"score":3,"accepted_answer_id":32189497,"is_answered":true,"view_count":299,"last_edit_date":1440465042},{"owner":{"profile_image":"https://i.stack.imgur.com/SpIPw.jpg?s=256&g=1","account_id":1745591,"user_type":"registered","user_id":1595910,"link":"https://stackoverflow.com/users/1595910/crow","reputation":1,"display_name":"crow"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/52901274/java-lambda-how-to-use-stream-reduce-to-accomplish-this","last_activity_date":1540235408,"creation_date":1539993862,"answer_count":1,"title":"Java Lambda: how to use Stream.reduce to accomplish this?","body":"<p>I have a file of records, each row begins with a timestamp and then a few fields.. it implements Iterable</p>\n\n<pre class=\"lang-Java prettyprint-override\"><code>  @SuppressWarnings(\"unchecked\")\n  @Override\n  public &lt;E extends MarkedPoint&gt;\n         Stream&lt;E&gt;\n         stream()\n  {\n    return (Stream&lt;E&gt;) StreamSupport.stream(spliterator(), false);\n\n  }\n</code></pre>\n\n<p>I would like to implement with Lambda expression/streams API what is essentially not just a filter, but a mapping/accumulator that would merge neighboring records ( stream elements  coming from the an Iterable interface ) having the same timestamp. I would need an interface that was something like this</p>\n\n<pre class=\"lang-Java prettyprint-override\"><code>MarkedPoint prevPoint = null;\n\nvoid nextPoint(MarkedPoint in, Stream&lt;MarkedPoint&gt; inputStream, Stream&lt;MarkedPoint&gt; outputStream )\n{\n     while ( prevPoint.time == in.time )\n     {\n       updatePrevPoint(in);\n       in = stream.next();\n     }     \n     outputStream.emit(in);\n     prevPoint = in;\n } \n}\n</code></pre>\n\n<p>that is rough-pseudocode of what I imagine is close to some API as how it is supposed to be used.. can someone please point me towards the most straightforward way of implementing this stream transformation ?  The resulting stream will be necessarily of the same or lesser number of elements as the input, as it is essentially a filter and and option transformation of records occuring at the same timestamp are encountered.</p>\n\n<p>Thanks in advance</p>\n","question_id":52901274,"tags":["java","lambda","java-stream"],"score":-1,"is_answered":true,"view_count":152,"last_edit_date":1539994519},{"owner":{"profile_image":"https://i.stack.imgur.com/CkAiB.jpg?s=256&g=1","account_id":258187,"user_type":"registered","user_id":540195,"link":"https://stackoverflow.com/users/540195/amit","reputation":1540,"display_name":"Amit","accept_rate":18},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/52906742/find-the-smallest-and-largest-substring-from-a-string-with-stream-operation","last_activity_date":1540219785,"creation_date":1540045976,"answer_count":2,"title":"Find the smallest and largest substring from a String with stream operation","body":"<p>I have a <strong>string s</strong>, and an <strong>integer k (substring length)</strong>, I am trying to write the function so that it finds the lexicographically <strong>smallest and largest substrings of length k</strong>. And It returns a String where samllest and largest substring combined with a newline.</p>\n\n<p>Till now I solved the problem with below approach where I wrote same code to find both smallest and largest substring, however, I want to return both substring with single line of code with stream.</p>\n\n<pre><code>public static String getSmallestAndLargest(String s, int k) {\n    String smallest = \"\";\n    String largest = \"\";\n\n    smallest = IntStream.range(0, s.length() - k + 1).mapToObj((value) -&gt; s.substring(value, value + k))\n            .collect(Collectors.minBy(String.CASE_INSENSITIVE_ORDER)).get();\n\n    largest = IntStream.range(0, s.length() - k + 1).mapToObj((value) -&gt; s.substring(value, value + k))\n            .collect(Collectors.maxBy(String.CASE_INSENSITIVE_ORDER)).get();\n\n    return smallest + \"\\n\" + largest;\n}\n</code></pre>\n\n<p>I appreciate any kind of suggestion as I am learning lambda and stream now.</p>\n\n<p><strong>So,how can I solve this simple problem elegantly</strong>?</p>\n","question_id":52906742,"tags":["java","lambda","java-stream"],"score":2,"accepted_answer_id":52907149,"is_answered":true,"view_count":590,"last_edit_date":1540077141},{"owner":{"profile_image":"https://www.gravatar.com/avatar/9e77366e3d051f48ce63d9d5daefb394?s=256&d=identicon&r=PG","account_id":1954313,"user_type":"registered","user_id":1757703,"link":"https://stackoverflow.com/users/1757703/user1757703","reputation":2935,"display_name":"user1757703","accept_rate":82},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/51111889/lombok-builder-with-java-8-lambda-builder-pattern","last_activity_date":1540207751,"creation_date":1530334965,"answer_count":2,"title":"Lombok @Builder with Java 8 Lambda Builder Pattern","body":"<p>I am trying to use Lombok with the Java 8 Lambda builder pattern introduced <a href=\"https://medium.com/beingprofessional/think-functional-advanced-builder-pattern-using-lambda-284714b85ed5\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>POJO:<br>\n</p>\n\n<pre><code>@JsonInclude(Include.NON_NULL)\n@Builder\n@NoArgsConstructor\n@RequiredArgsConstructor\n@AllArgsConstructor\npublic class RestResponse&lt;T&gt; {\n  @Getter @Setter @Builder.Default private Boolean success = true;\n  @Getter @Setter @NonNull private T data;\n\n  public static class RestResponseBuilder&lt;T&gt; {\n    public RestResponseBuilder&lt;T&gt; with(Consumer&lt;RestResponseBuilder&lt;T&gt;&gt; builderFunction) {\n      builderFunction.accept(this);\n      return this;\n    }\n\n    public RestResponse&lt;T&gt; createRestResponse() {\n      return new RestResponse&lt;T&gt;(success, data);\n    }\n  }\n}\n</code></pre>\n\n<p>Usage:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>  @GetMapping(value = \"/testLambdaBuilder\", produces = MediaType.APPLICATION_JSON_VALUE)\n  @ResponseBody\n  public RestResponse&lt;String&gt; testEndpointLambdaBuilder() {\n    return new RestResponseBuilder&lt;String&gt;().with($ -&gt; $.data = \"helloWorld\").createRestResponse();\n  }\n</code></pre>\n\n<p>Lombok seems to create a package level constructor for the builder. Is there a way to change it to public? The error I'm getting is: </p>\n\n<blockquote>\n  <p>The constructor RestResponse.RestResponseBuilder() is not visible</p>\n</blockquote>\n","question_id":51111889,"tags":["java","lambda","lombok"],"score":1,"is_answered":false,"view_count":2749,"last_edit_date":1531750788},{"owner":{"profile_image":"https://www.gravatar.com/avatar/cbcb885163f3112cbd223bdd88651471?s=256&d=identicon&r=PG","account_id":2473025,"user_type":"registered","user_id":2154359,"link":"https://stackoverflow.com/users/2154359/xmen-5","reputation":1806,"display_name":"xmen-5","accept_rate":92},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/52918166/java-stream-operation-to-check-and-return-a-specific-object","last_activity_date":1540152863,"creation_date":1540144010,"answer_count":1,"title":"java stream operation to check and return a specific object","body":"<p>I'm trying to learn Java Stream API and I'm writing some examples.</p>\n\n<p>So my example is as follows:</p>\n\n<p>I have a list of lists, every list can contain many nodes.</p>\n\n<p>I want a program that checks and returns a node that fulfills some criterion.</p>\n\n<pre><code>import java.util.ArrayList;\nimport java.util.List;\nimport java.util.Random;\nimport java.util.stream.Collectors;\nimport java.util.stream.IntStream;\n\npublic class Main {\n        public static void main( String[] args ) {\n        ArrayList&lt;ArrayList&lt;Node&gt;&gt; lists =  new ArrayList&lt;&gt;();\n        /*here i'm creating a list of 10 list from 0 to 9\n        * and each list will have one node, the nodes will have a random \n        degree\n        */\n        IntStream.range(0,10).forEach(  index -&gt; {\n                                                lists.add(new ArrayList&lt;&gt;());\n                                                int random=new Random().nextInt(10) + 1;\n                                                lists.get(index).add(new Node(random));\n        });\n\n        Node specificLsit = getaSpecificNode(lists);\n    }\n\n   /*we chould retun a new Node(1) if there is a node that have a degree=1\n    *and a new Node(2) id there is a node with degree= 2 \n    *or null if the above condition fails.\n    *so what is the java stream operation to writre for that purpose.\n    */\n    private static Node getaSpecificNode( ArrayList&lt;ArrayList&lt;Node&gt;&gt; lists ) {\n        Node nodeToReturn =null;\n        //code go here to return the desired result\n        return nodeToReturn;\n    }\n}\n\nclass Node{\n    int degree;\n\n    Node(int degree){\n        this.degree = degree;\n    }\n    @Override\n    public String toString() {\n        return this.degree+\"\";\n    }\n}\n</code></pre>\n\n<p>The 2 for loop is easy to solve the problem, but I want a solution that uses the stream api.</p>\n\n<p>What I have tried :</p>\n\n<pre><code> private static Node getaSpecificNode( ArrayList&lt;ArrayList&lt;Node&gt;&gt; lists ) {\n    Node nodeToReturn =null;\n    lists.forEach((list)-&gt;{\n        list.forEach((node)-&gt;{\n            if (node.degree ==1 || node.degree ==2 )\n                nodeToReturn = node;\n\n        });\n\n    });\n    return nodeToReturn ;\n}\n</code></pre>\n\n<p>Unfortunately I'm getting a compilation error that the variable nodeToReturn should be final, but in my case I'm trying to modify it.</p>\n\n<p>Is there any better solution?</p>\n","question_id":52918166,"tags":["java","lambda","java-8","java-stream"],"score":1,"accepted_answer_id":52918289,"is_answered":true,"view_count":922,"last_edit_date":1540152863}]