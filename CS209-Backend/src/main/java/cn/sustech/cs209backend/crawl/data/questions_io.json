[{"owner":{"user_type":"does_not_exist","display_name":"user10082400"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56312809/use-two-ways-for-outputting-to-system-out-but-why-only-the-way-in-front-outputs","last_activity_date":1558868464,"creation_date":1558867591,"answer_count":0,"title":"Use two ways for outputting to System.out, but why only the way in front outputs?","body":"<p>Within a method, I experimented with  two ways of outputing to <code>System.out</code>: one via <code>OutputStreamWriter</code> and the other via <code>PrintWriter</code>. I found that only the one which is in the front will output, but the one behind will not. Why is that? </p>\n\n<p>Is it because when the first's writer is closed implicitly, it will also close <code>System.out</code>?</p>\n\n<p>How can I make the two ways (one after the other) both output?</p>\n\n<pre><code>try (BufferedWriter bw = new BufferedWriter (new PrintWriter(System.out, true))) //  specify System.out for the output stream and \"true\" for automatic flushing.\n    {\n    bw.write(\"system.out-&gt;printwriter-&gt;bufferedwriter\");\n    bw.write(\"\\n\");\n    // to make sure the content be printed.\n    // need to flush the output from the buffer to destination\n    // You can call flush or close \n    bw.flush();\n    }\ncatch (IOException e)\n    {\n        e.printStackTrace();\n    }\n\n\n\ntry ( BufferedWriter bw2 = new BufferedWriter(new OutputStreamWriter(System.out)))\n    {\n    bw2.write(\"system.out-&gt;outputstreamwriter-&gt;bufferedwriter\");\n    bw2.write(\"\\n\");\n    // need to flush the output from the buffer to destination      \n    bw2.flush();\n    }\ncatch (IOException e)\n    {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>will output only <code>system.out-&gt;printwriter-&gt;bufferedwriter</code></p>\n\n<pre><code>try ( BufferedWriter bw2 = new BufferedWriter(new OutputStreamWriter(System.out)))\n    {\n    bw2.write(\"system.out-&gt;outputstreamwriter-&gt;bufferedwriter\");\n    bw2.write(\"\\n\");\n    // need to flush the output from the buffer to destination      \n    bw2.flush();\n    }\ncatch (IOException e)\n    {\n        e.printStackTrace();\n    }\n\ntry (BufferedWriter bw = new BufferedWriter (new PrintWriter(System.out, true))) //  specify System.out for the output stream and \"true\" for automatic flushing.\n    {\n    bw.write(\"system.out-&gt;printwriter-&gt;bufferedwriter\");\n    bw.write(\"\\n\");\n    // to make sure the content be printed.\n    // need to flush the output from the buffer to destination\n    // You can call flush or close \n    bw.flush();\n    }\ncatch (IOException e)\n    {\n        e.printStackTrace();\n    }\n</code></pre>\n\n<p>will output only <code>system.out-&gt;outputstreamwriter-&gt;bufferedwriter</code></p>\n","question_id":56312809,"tags":["java","io"],"score":0,"is_answered":false,"view_count":35,"last_edit_date":1558868464},{"owner":{"profile_image":"https://i.stack.imgur.com/hy4NB.jpg?s=256&g=1","account_id":15996754,"user_type":"registered","user_id":11544498,"link":"https://stackoverflow.com/users/11544498/not-founded","reputation":51,"display_name":"not_founded"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56274236/operations-on-file-with-multithreading","last_activity_date":1558611377,"creation_date":1558610957,"answer_count":0,"title":"Operations on file with multithreading","body":"<p>I'm trying to work with multiThreading and I want to write a code that must do some operations on a specific file called data.txt.</p>\n\n<p>There must be three writers and three readers,writer 1 has to write a random char from A to Z,writer 2 has to write a random number from 1 to 100,writer 3 has to write a random char from this set of characters {*%$#@!&amp;}.</p>\n\n<p>Then readers must read a character from the file data.txt and then reader 1 write this character in file 1.txt,reader 2 write this character in file 2.txt and reader 3 write this character in file 3.txt.</p>\n\n<p>If there was no character in data file to read the readers must wait until the writers add something to the data file.</p>\n\n<p>I have wrote two classes called WriterInFile and ReaderFromFile that extends Thread class but it seems that the ReaderFromFile doesn't work correctly(It doesn't read any characters from data file and doesn't add anything to files 1.txt,2.txt,3.txt)</p>\n\n<p>This is the code for ReaderFromFile class:</p>\n\n<pre><code>import java.io.*;\n\npublic class ReaderFromFile extends Thread {\n    private static FileReader reader;\n    private int numberOfReader;\n\n\n    ReaderFromFile(int numberOfReader, FileReader reader) {\n        this.numberOfReader = numberOfReader;\n        ReaderFromFile.reader = reader;\n    }\n\n    public void run() {\n        for (int i = 0; i &lt; 5; i++) {\n            String s = null;\n            try {\n                s = readFrom();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        FileWriter writer;\n        switch (numberOfReader) {\n            case 1:\n                try {\n                    writer = new FileWriter(\"1.txt\",true);\n                    if (s != null) {\n                        writer.write(s);\n                    }\n                    writer.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                break;\n            case 2:\n                try {\n                    writer = new FileWriter(\"2.txt\",true);\n                    if (s != null) {\n                        writer.write(s);\n                    }\n                    writer.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                break;\n            case 3:\n                try {\n                    writer = new FileWriter(\"3.txt\",true);\n                    if (s != null) {\n                        writer.write(s);\n                    }\n                    writer.close();\n                } catch (IOException e) {\n                    e.printStackTrace();\n                }\n                break;\n        }\n    }\n}\n\n/**\n * @return the character that has been reed\n */\nprivate synchronized String readFrom() throws IOException {\n    String s = null;\n    while (!reader.ready()) {\n        try {\n            wait();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n    try {\n        s = String.valueOf(reader.read());\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    notifyAll();\n    return s;\n}\n\n\n}\n</code></pre>\n\n<p>this is the WriterInFile class:</p>\n\n<pre><code>import java.io.FileWriter;\nimport java.io.IOException;\nimport java.util.Random;\n\npublic class WriterInFile extends Thread {\nprivate static FileWriter writer;\nprivate int numberOfReader;\n\nWriterInFile(int numberOfReader, FileWriter writer) {\n    this.numberOfReader = numberOfReader;\n    WriterInFile.writer = writer;\n}\n\npublic void run() {\n    for (int i=0;i&lt;5;i++){\n        try {\n            sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        switch (numberOfReader) {\n            case 1:\n                writeChar();\n                break;\n            case 2:\n                writeNumber();\n                break;\n            case 3:\n                writeShape();\n                break;\n        }\n    }\n}\n\n\nprivate synchronized void writeChar() {\n    String s = getRandomChar();\n    try {\n        writer.write(s);\n        System.out.println(s);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    notifyAll();\n}\n\nprivate synchronized void writeNumber() {\n    String s = getRandomNumber();\n    try {\n        writer.write(s);\n        System.out.println(s);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    notifyAll();\n}\n\nprivate synchronized void writeShape() {\n    String s = getRandomShape();\n    try {\n        writer.write(s);\n        System.out.println(s);\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    notifyAll();\n}\n\nprivate String getRandomChar() {\n    double randomDouble = Math.random();\n    randomDouble = randomDouble * 26;\n    int randomInt = (int) randomDouble;\n    return String.valueOf((char)(randomInt+'A'));\n}\n\nprivate String getRandomNumber() {\n    double randomDouble = Math.random();\n    randomDouble = randomDouble * 100 + 1;\n    int randomInt = (int) randomDouble;\n    return String.valueOf(randomInt);\n}\n\n\nprivate String getRandomShape() {\n    String chars = \"*%$#@!&amp;\";\n    Random rnd = new Random();\n    char randomChar = chars.charAt(rnd.nextInt(chars.length()));\n    return String.valueOf(randomChar);\n}\n}\n</code></pre>\n\n<p>and this is the main file:</p>\n\n<pre><code>public static void main(String[] args) {\n\n        try {\n            FileWriter writer = new FileWriter(\"data.txt\");\n            FileReader reader = new FileReader(\"data.txt\");\n            //creating writers\n            WriterInFile writer1 = new WriterInFile(1, writer);\n            WriterInFile writer2 = new WriterInFile(2, writer);\n            WriterInFile writer3 = new WriterInFile(3, writer);\n            // creating readers\n            ReaderFromFile reader1 = new ReaderFromFile(1, reader);\n            ReaderFromFile reader2 = new ReaderFromFile(2, reader);\n            ReaderFromFile reader3 = new ReaderFromFile(3, reader);\n\n            writer1.start();\n            writer2.start();\n            writer3.start();\n\n            reader1.start();\n            reader2.start();\n            reader3.start();\n            Thread.sleep(10000);\n            writer.close();\n            reader.close();\n    } catch (IOException | InterruptedException e) {\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n","question_id":56274236,"tags":["java","multithreading","file","io"],"score":0,"is_answered":false,"view_count":44,"last_edit_date":1558611377},{"owner":{"profile_image":"https://i.stack.imgur.com/PYsmu.jpg?s=256&g=1","account_id":8856397,"user_type":"registered","user_id":6614056,"link":"https://stackoverflow.com/users/6614056/abhilash","reputation":823,"display_name":"Abhilash","accept_rate":67},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56236189/fastest-way-to-write-multiple-files-in-java","last_activity_date":1558442248,"creation_date":1558434182,"answer_count":1,"title":"Fastest way to write multiple files in java","body":"<p>I have requirement where I need to write multiple input streams to a temp file in java. I have the below code snippet for the logic. Is there a better way to do this in an efficient manner?</p>\n\n<pre><code>final String tempZipFileName = \"log\" + \"_\" + System.currentTimeMillis();\n        File tempFile = File.createTempFile(tempZipFileName, \"zip\");\n        final FileOutputStream oswriter = new FileOutputStream(tempFile);\n        for (final InputStream inputStream : readerSuppliers) {\n            byte[] buffer = new byte[102400];\n            int bytesRead = 0;\n\n            while ((bytesRead = inputStream.read(buffer)) &gt; 0) {\n                oswriter.write(buffer, 0, bytesRead);\n            }\n            buffer = null;\n            oswriter.write(System.getProperty(\"line.separator\").getBytes());\n            inputStream.close();\n        }\n</code></pre>\n\n<p>I have multiple files of size ranging from 45 to 400 mb, for a typical 45mb and 360 mb files this method is taking around 3 mins on average. Can this be further improved?</p>\n","question_id":56236189,"tags":["java","file","io"],"score":0,"is_answered":false,"view_count":360},{"owner":{"profile_image":"https://www.gravatar.com/avatar/a90d27cf1ef919d846a249cb04b3fe2e?s=256&d=identicon&r=PG","account_id":54797,"user_type":"registered","user_id":1965110,"link":"https://stackoverflow.com/users/1965110/zorkus","reputation":484,"display_name":"Zorkus","accept_rate":100},"content_license":"CC BY-SA 2.5","link":"https://stackoverflow.com/questions/3355746/java-io-fastest-way-to-remove-file","last_activity_date":1558433161,"creation_date":1280338983,"answer_count":5,"title":"Java, IO - fastest way to remove file","body":"<p>My problem is that I have an app which is writing a lot of relatively (100-500kb) small CSV files (tens and hundreds of thousands ). Content of those files then get loaded in database via sql loader call (its oracle db) and this is what I have to live with. </p>\n\n<p>So, I need to remove those small files time to time to prevent them from eating up all space. I would like to attach that to the activity which writes those files and loads them into db as a last finalize step.</p>\n\n<p>My Question is -- how in java can one remove a bunch of small files with less overhead on performance?</p>\n\n<p>Thanks in advance!\nMichael</p>\n","question_id":3355746,"tags":["java","file","io","nio"],"score":17,"accepted_answer_id":3355827,"is_answered":true,"view_count":18310},{"owner":{"user_type":"does_not_exist","display_name":"user10082400"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56223139/is-it-helpful-to-wrap-system-in-of-type-bufferedinputstream-into-a-buffered","last_activity_date":1558363567,"creation_date":1558362884,"answer_count":0,"title":"Is it helpful to wrap `System.in` of type `BufferedInputStream` into a `BufferedReader`?","body":"<p>I found that the default type of <code>System.in</code> is <code>BufferedInputStream</code>, by </p>\n\n<pre><code>System.out.println(System.in.getClass());\n</code></pre>\n\n<p>and I saw a lot of uses of <code>System.in</code> by wrapping it into a <code>BufferedReader</code>:</p>\n\n<pre><code>BufferedReader br = new BufferedReader(new InputStreamReader(System.in));\n</code></pre>\n\n<p>Are <code>BufferedInputStream</code> and <code>BufferedReader</code> redundant with each other?</p>\n\n<p>Is it helpful to wrap <code>System.in</code> into a <code>BufferedReader</code>?</p>\n","question_id":56223139,"tags":["java","io"],"score":0,"is_answered":false,"view_count":25},{"owner":{"user_type":"does_not_exist","display_name":"user10082400"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56207091/what-differences-are-between-objectinput-outputstream-and-datainput-outputstream","last_activity_date":1558271346,"creation_date":1558263348,"answer_count":2,"title":"What differences are between ObjectInput/OutputStream and DataInput/OutputStream when applying to instances of primitive types?","body":"<p>It seems to me that both <code>ObjectInputStream</code>/<code>ObjectOutputStream</code>, and <code>DataInputStream</code>/<code>DataOutputStream</code> can apply to instances of primitive types.\nWhat differences between <code>ObjectInputStream</code>/<code>ObjectOutputStream</code>, and <code>DataInputStream</code>/<code>DataOutputStream</code> when they both apply to instances of primitive types?</p>\n\n<p>Can they both (de)serialize instances of primitive types in the same way?</p>\n","question_id":56207091,"tags":["java","serialization","io"],"score":1,"accepted_answer_id":56208135,"is_answered":true,"view_count":34},{"owner":{"user_type":"does_not_exist","display_name":"user10040300"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56206766/in-linux-does-any-instance-of-java-io-console-represent-the-controlling-termina","last_activity_date":1558262449,"creation_date":1558260502,"answer_count":0,"title":"In Linux, does any instance of java.io.Console represent the controlling terminal of the current JVM process?","body":"<p>In Linux, a process may or may not have <a href=\"https://en.wikipedia.org/wiki/POSIX_terminal_interface#Controlling_terminals_and_process_groups\" rel=\"nofollow noreferrer\">a controlling terminal</a>. In Linux, does <strong>any instance</strong> of <code>java.io.Console</code> class <strong>always</strong> represent the controlling terminal of the current JVM process?</p>\n\n<p>I guess yes, because the following from  <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/Console.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/7/docs/api/java/io/Console.html</a> describes something similar to the controlling terminal of a JVM process:</p>\n\n<blockquote>\n  <p>Methods to access the character-based console device, if any,\n  associated with the current Java virtual machine. Whether a virtual\n  machine has a console is dependent upon the underlying platform and\n  also upon the manner in which the virtual machine is invoked. If the\n  virtual machine is started from an interactive command line without\n  redirecting the standard input and output streams then its console\n  will exist and will typically be connected to the keyboard and display\n  from which the virtual machine was launched. If the virtual machine is\n  started automatically, for example by a background job scheduler, then\n  it will typically not have a console.</p>\n</blockquote>\n","question_id":56206766,"tags":["java","linux","io","console"],"score":1,"is_answered":false,"view_count":40,"last_edit_date":1558262449},{"owner":{"user_type":"does_not_exist","display_name":"user10082400"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56198945/does-scanner-have-its-own-buffer-for-reading","last_activity_date":1558182848,"creation_date":1558182548,"answer_count":1,"title":"Does Scanner have its own buffer for reading?","body":"<p><code>BufferedReader</code> and <code>BufferedInputStream</code> have their own buffers for reading. Is having buffer the reason why they can read a line at a time?</p>\n\n<p><code>Scanner</code> can read a line at a time too. But it doesn't necessarily work with <code>BufferedReader</code> and <code>BufferedInputStream</code>. Does it have its own buffer for reading a line at a time?</p>\n\n<p>Thanks.</p>\n","question_id":56198945,"tags":["java","io","buffer"],"score":-1,"accepted_answer_id":56198986,"is_answered":true,"view_count":41},{"owner":{"profile_image":"https://lh4.googleusercontent.com/-p0Bv4LRRhLs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfWTqyFfABsnP5bNlEVLfldltSInQ/mo/photo.jpg?sz=256","account_id":15945728,"user_type":"registered","user_id":11506365,"link":"https://stackoverflow.com/users/11506365/dunglerjo","reputation":1,"display_name":"DunglerJo"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56170304/print-is-blocking-bufferedreader-input","last_activity_date":1558138378,"creation_date":1558015082,"answer_count":1,"title":"print is blocking BufferedReader input?","body":"<p>I am trying to parallel execute my code, but got now a problem.\nThe code without parallel execution is waiting for input (1) and then he is printing out something (2).\nNow I execute my code parallel with the help of a timer (task2) and for the input (1)I got another loop.</p>\n\n<p>Now if I try to write something down but I am not fast enough, the input isn't reading the whole input which was interrupted by the task2 with the print out.</p>\n\n<pre><code>static BufferedReader in = new BufferedReader(new InputStreamReader(System.in));\nstatic PrintStream out = new PrintStream(System.out);\n\nstatic void test1(BufferedReader in, PrintStream out) throws IOException {\n    String input = in.readLine();\n    if (input.equals(\"test\"))\n        System.out.println(\"true input\");\n    else System.out.println(\"false input\");\n}\n\npublic static void main(String[] args) throws IOException {\n    Timer timer = new Timer();\n    timer.schedule(new TimerTask() {\n        @Override\n        public void run() {\n            while (true) {\n                System.out.println(\"print\"); \n                Thread.sleep(1000);}}}, 1000);\n    while (true)\n        test1(in, out);\n\n}\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/nc3fL.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/nc3fL.jpg</a></p>\n","question_id":56170304,"tags":["java","io","bufferedreader"],"score":0,"is_answered":false,"view_count":81,"last_edit_date":1558137268},{"owner":{"profile_image":"https://www.gravatar.com/avatar/392637756859396abc0f62f06afc459c?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":15960846,"user_type":"registered","user_id":11517979,"link":"https://stackoverflow.com/users/11517979/vini290","reputation":13,"display_name":"vini290"},"content_license":"CC BY-SA 4.0","link":"https://stackoverflow.com/questions/56192968/remove-a-last-blank-line","last_activity_date":1558130237,"creation_date":1558123902,"answer_count":6,"title":"Remove a last blank line","body":"<p>I have a problem with some java code.\nI'm returning a text from a method, which is on a .txt file. Then, I'm storing this text to a variable \"text\" and writing this on another .txt file. But the problem is: this new .txt file gets a new blank line at the bottom. That's because inside my method read, the variable \"text\" is receiving a \"\\n\". How can I solve this problem? \nPS: I'm doing this with educational purposes.</p>\n\n<pre><code>import java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.IOException;\nimport java.io.FileReader;\nimport java.io.FileWriter;\n\npublic class Arquivo {\n    public static void main(String[] args) {\n        String text = read(\"in.txt\");\n        write(text, \"out.txt\");\n        System.out.println(\"Text created!\");\n    }\n\n    public static String read(String arquivo) {\n        String text = \"\";\n        try (BufferedReader br = new BufferedReader(new FileReader(arquivo))) {\n\n            String line = br.readLine();\n            while (line != null) {\n                text += line + \"\\n\";\n                line = br.readLine();\n            }\n\n        } catch (IOException e) {\n            System.err.println(e.getMessage());\n        }\n        return text;\n    }\n\n    public static void write(String text, String arquivo) {\n        try (BufferedWriter bw = new BufferedWriter(new FileWriter(arquivo))) {\n            bw.write(text);\n        } catch (IOException e) {\n            System.err.println(e.getMessage());\n        }\n    }\n}\n</code></pre>\n\n<p>My two created files \"in.txt\" and \"out.txt\".</p>\n\n<p>this is\na text file.</p>\n\n<p>this is\na text file.\n(blank line)</p>\n","question_id":56192968,"tags":["java","file","io"],"score":0,"accepted_answer_id":56193102,"is_answered":true,"view_count":1376},{"owner":{"profile_image":"https://i.stack.imgur.com/pvWWM.jpg?s=256&g=1","account_id":8252494,"user_type":"registered","user_id":9372934,"link":"https://stackoverflow.com/users/9372934/lindstorm","reputation":879,"display_name":"Lindstorm"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48877659/beginner-infinite-loop-with-scanner-object","last_activity_date":1519102691,"creation_date":1519099399,"answer_count":4,"title":"Beginner - Infinite Loop with Scanner Object","body":"<p>In the following code, I get an infinite loop if an enter anything that causes an <code>InputMismatchException</code> in the <code>try</code> part below</p>\n\n<pre><code>   public static void main(String[] args) {\n       Scanner in = new Scanner(System.in);\n       double x;\n       boolean b = true;\n       while (b) {\n           try {\n               x = in.nextDouble(); //Enter 4a\n               b = false;\n           } catch (InputMismatchException e) {\n               System.out.println(\"Wrong\");\n               // in.nextLine();\n           }\n       }\n       in.close();\n   }\n</code></pre>\n\n<p>If I uncomment the <code>in.nextLine();</code>, the code works fine. I am wondering why there is an infinite loop. I do not see why there would be an infinite loop because after the <code>catch</code> part is executed, I should be able to enter data when the <code>try</code> part is executed again. Why does this not happen?</p>\n","question_id":48877659,"tags":["java","loops","io","java.util.scanner"],"score":4,"accepted_answer_id":48877744,"is_answered":true,"view_count":271},{"owner":{"profile_image":"https://www.gravatar.com/avatar/66d7544a9c002f381b6532a6dbb7367d?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":9350518,"user_type":"registered","user_id":6940373,"link":"https://stackoverflow.com/users/6940373/hadi","reputation":544,"display_name":"Hadi","accept_rate":40},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48853563/how-can-i-cancel-file-creation-process-in-java-in-my-example","last_activity_date":1518970189,"creation_date":1518969138,"answer_count":1,"title":"how can i cancel file creation process in java in my example?","body":"<p>I’m creating an empty file with specified size as below.</p>\n\n<pre><code>final long size = 10000000000L;\nfinal File file = new File(\"d://file.mp4\");\n\nThread t = new Thread(new Runnable() {\n    @Override\n    public void run() {\n        try {\n            RandomAccessFile raf = new RandomAccessFile(file, \"rw\");\n            raf.setLength(size);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n});\nt.start();\n</code></pre>\n\n<p>For big sizes like 5GB or less and more, this process takes more time on android devices. Now my question is how can I cancel the creating file process Whenever i wanted?\nthanks.</p>\n","question_id":48853563,"tags":["java","io","randomaccessfile"],"score":0,"accepted_answer_id":48853729,"is_answered":true,"view_count":111},{"owner":{"profile_image":"https://www.gravatar.com/avatar/2d7e42a86b26a949330599ceaf4e4d1f?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":12958384,"user_type":"registered","user_id":9368365,"link":"https://stackoverflow.com/users/9368365/sameersan","reputation":1,"display_name":"Sameersan"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48848515/why-does-my-code-write-arraylist-element-into-my-output-file-twice-rather-than","last_activity_date":1518935788,"creation_date":1518928734,"answer_count":2,"title":"Why does my code write ArrayList element into my output file twice, rather than updating the ArrayList?","body":"<p>I just want to say thank you for taking the time to look into my question. I am currently working on an inventory interface. The issue I am having is that when I read an update file, to update my database file, this is what I get: database: abc,123,10.0,5.0,false,10 (partName,partNumber,listPrice,salePrice,onSale,quantity)</p>\n\n<p>after I read in the update file: \nabc,123,10.0,5.0,false,10 is first in my db followed by abc,123,20.0,10.0,true,2</p>\n\n<p>how do I fix this so that it updates the string in the db file, instead of appending it to the file?</p>\n\n<p>here is some of my code:</p>\n\n<pre><code>//findBp method\npublic static BikePart findBp(ArrayList&lt;BikePart&gt; bpal, BikePart bp) {\n    BikePart found = null;\n    for(BikePart b : bpal) {\n        if(b.getPartName().equals(bp.getPartName()) &amp;&amp; b.getPartNumber() == bp.getPartNumber()) {\n            found = b;\n            break;\n        }\n    }\n    return found;\n}\n\n//sort by partName\npublic static void sortName(ArrayList&lt;BikePart&gt; bpal) {\n    Collections.sort(bpal, BikePart.bpNameComp);\n}\n//sort by partNumber\npublic static void sortNumber(ArrayList&lt;BikePart&gt; bpal) {\n    Collections.sort(bpal, BikePart.bpPartNumComp);\n}\n\n//readFile method\npublic static void readFile(String fileName, ArrayList&lt;BikePart&gt; bpal) {\n    if(fileName == null || fileName.equals(\"\")) {\n        return;\n    }\n    File file = new File(fileName);\n    try {\n        Scanner read = new Scanner(file);\n        while(read.hasNextLine()) {\n            String line = read.nextLine();\n            String pv[] = line.split(\",\");\n            BikePart bp = BikePart.toObject(pv);\n            BikePart found = findBp(bpal, bp);\n            if(found == null) {\n                bpal.add(bp);\n            } else {\n                found.setQuantity(found.getQuantity() + bp.getQuantity());\n                found.setPartName(bp.getPartName());\n                found.setPartNumber(bp.getPartNumber());\n                found.setListPrice(bp.getListPrice());\n                found.setSalesPrice(bp.getSalesPrice());\n                found.setPartOnSale(bp.isPartOnSale());\n            }\n        }\n        read.close();\n    }\n    catch (FileNotFoundException e) {\n        System.out.println(fileName + \" is not found!\");\n        System.out.println(\"Enter another file name.\");\n        String fileName2 = in.nextLine();\n        readFile(fileName2, bpal);\n    }\n}\n//writeFile method\npublic static void writeFile(String fileName, ArrayList&lt;BikePart&gt; bpal) {\n    try {\n        BufferedWriter outStream = new BufferedWriter(new FileWriter(fileName, true));\n        for(BikePart bp : bpal) {\n            outStream.write(bp.toString());\n            outStream.newLine();\n        }\n        outStream.close();\n    }\n    catch (IOException e) {\n        System.out.println(\"file not found!\");\n    }\n}\n\npublic static void main(String[] args) {\n    //calendar field\n    Calendar cal = Calendar.getInstance();\n\n    //ArrayList for DB\n    ArrayList&lt;BikePart&gt; bpal = new ArrayList&lt;BikePart&gt;();\n    readFile(\"DB.txt\", bpal);\n\n    //user input variable\n    String usrIn = \"\";\n\n    //loop for user choice\n    while(usrIn != \"Quit\") {\n        //prompts user to select choice\n        System.out.println(\"Please select your option from \"\n                + \"the following menu: \");\n        System.out.println(\"Read: Read an inventory delivery file\");\n        System.out.println(\"Enter: Enter a part\");\n        System.out.println(\"Sell: Sell a part\");\n        System.out.println(\"Display: Display a part\");\n        System.out.println(\"SortName: Sort parts by part name\");\n        System.out.println(\"SortNumber: Sort parts by part number\");\n        System.out.println(\"Quit: \");\n        System.out.println(\"Enter your choice: \");\n\n        //initiates usrIn\n        usrIn = in.nextLine();\n\n        //switch for input choice\n        switch(usrIn) {\n\n        case \"Read\":\n            //read method \n            System.out.println(\"Enter file name: \");\n            String fileName = in.nextLine();\n            readFile(fileName, bpal);\n            break;\n        case \"Enter\":\n            //enter method\n            break;\n        case \"Sell\":\n            //sell method\n            break;\n        case \"Display\":\n            //display method\n            break;\n        case \"SortName\":\n            //sortName method\n            break;\n        case \"SortNumber\":\n            //sortNum method\n            break;\n        case \"Quit\":\n            //quit method\n            writeFile(\"DB.txt\", bpal);\n            System.out.println(\"good bye! \");\n            break;\n        }\n        if(usrIn.equals(\"Quit\")) {\n            break;\n        }\n    }\n\n}\n</code></pre>\n\n<p>I haven't filled in the rest of the code yet, because I want to fix this issue first before I move on. I just want to say thanks again for taking a look.</p>\n","question_id":48848515,"tags":["java","arraylist","io"],"score":-1,"accepted_answer_id":48849117,"is_answered":true,"view_count":73,"last_edit_date":1518930982},{"owner":{"profile_image":"https://graph.facebook.com/100005137569756/picture?type=large","account_id":5130554,"user_type":"registered","user_id":4110915,"link":"https://stackoverflow.com/users/4110915/jenna-maiz","reputation":792,"display_name":"Jenna Maiz","accept_rate":34},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/32830018/loading-a-file-into-memoryjava","last_activity_date":1518698681,"creation_date":1443467004,"answer_count":6,"title":"Loading a file into memory(Java)?","body":"<p>I have a 60 MB text file through which my program searches for a specific ID and extract some related text. And I have to repeat the process for 200+ IDs. Initially, I used a loop to cycle through the lines of the file and look for the ID and then extract the related text but it takes way too long(~2 min). So instead, now I am looking at way to load the entire file into memory, then search for my IDs and associated text from there; I imagine that should be faster than accessing the hard drive 200+ times. So I wrote the following code to load the file into memory:</p>\n\n<pre><code>public String createLocalFile(String path)\n{   \n    String text = \"\";\n    try\n    {\n        FileReader fileReader = new FileReader( path );\n        BufferedReader reader = new BufferedReader( fileReader );\n        String currentLine = \"\";\n        while( (currentLine = reader.readLine() ) != null )\n        {\n            text += currentLine;\n            System.out.println( currentLine );\n        }\n\n    }\n    catch(IOException ex)\n    {\n        System.out.println(ex.getMessage());\n    }\n    return text;\n}\n</code></pre>\n\n<p>Unfortunately, saving the file's text into a String variable takes an extremely long time. How can I load the file faster ? Or is there a better way to accomplish the same task ? Thanks for any help.</p>\n\n<p>Edit: Here is the link to the file <code>https://github.com/MVZSEQ/denovoTranscriptomeMarkerDevelopment/blob/master/Homo_sapiens.GRCh38.pep.all.fa</code></p>\n\n<p>Typical line looks like:</p>\n\n<pre><code>&gt;ENSP00000471873 pep:putative chromosome:GRCh38:19:49496434:49499689:1 gene:ENSG00000142534 transcript:ENST00000594493 gene_biotype:protein_coding transcript_biotype:protein_coding\\\nMKMQRTIVIRRDYLHYIRKYNRFEKRHKNMSVHLSPCFRDVQIGDIVTVGECRPLSKTVR\\\nFNVLKVTKAAGTKKQFQKF\\\n</code></pre>\n\n<p>Where <code>ENSP00000471873</code> is the ID and the text I would be extracting is </p>\n\n<pre><code>MKMQRTIVIRRDYLHYIRKYNRFEKRHKNMSVHLSPCFRDVQIGDIVTVGECRPLSKTVR\\\n    FNVLKVTKAAGTKKQFQKF\\\n</code></pre>\n","question_id":32830018,"tags":["java","file","optimization","io"],"score":3,"is_answered":true,"view_count":13599,"last_edit_date":1443468219},{"owner":{"profile_image":"https://i.stack.imgur.com/DKYS4.png?s=256&g=1","account_id":4361623,"user_type":"registered","user_id":3558514,"link":"https://stackoverflow.com/users/3558514/weteamsteve","reputation":187,"display_name":"weteamsteve","accept_rate":100},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48792823/junit-what-is-the-best-way-to-fail-java-io-file-delete-for-unit-testing","last_activity_date":1518629340,"creation_date":1518628554,"answer_count":3,"title":"JUnit What is the best way to fail java.io.File.delete() for unit testing","body":"<p>I am unit testing a method that is using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#delete()\" rel=\"nofollow noreferrer\">java.io.File.delete()</a> and I am wondering what the best way to make <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#delete()\" rel=\"nofollow noreferrer\">java.io.File.delete()</a> fail is.</p>\n\n<pre><code>final File newFile = new File(filePath); // filePath is a valid path\n\nif (newFile.exists())\n{\n    if (!newFile.delete())\n    {\n        final String msg = \"Error deleting file \" + newFile.getAbsolutePath();\n        LOG.error(msg);\n    }\n}\n</code></pre>\n\n<p>So the file must exist, and I want the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#delete()\" rel=\"nofollow noreferrer\">newFile.delete()</a> to fail.</p>\n\n<p>I understand this could be done by:</p>\n\n<ul>\n<li>Mocking the <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html\" rel=\"nofollow noreferrer\">File</a> class delete method to return false or throw <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/SecurityException.html\" rel=\"nofollow noreferrer\">java.lang.SecurityException</a></li>\n<li>Somehow use a security manager and its <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/SecurityManager.html#checkDelete(java.lang.String)\" rel=\"nofollow noreferrer\">SecurityManager.checkDelete(java.lang.String)</a> method denies delete access to the file</li>\n<li>Maybe simply changing read/write access alone could do this, but it hasn't seem to be working for me in <a href=\"https://junit.org/junit4/\" rel=\"nofollow noreferrer\">JUnit 4</a>.</li>\n</ul>\n","question_id":48792823,"tags":["java","file","unit-testing","junit","io"],"score":4,"accepted_answer_id":48792978,"is_answered":true,"view_count":6847,"last_edit_date":1518628895},{"owner":{"profile_image":"https://i.stack.imgur.com/LmEnh.jpg?s=256&g=1","account_id":137237,"user_type":"registered","user_id":341291,"link":"https://stackoverflow.com/users/341291/axel","reputation":13989,"display_name":"Axel","accept_rate":76},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/5883808/new-file-vs-new-file-feature-or-bug","last_activity_date":1518595146,"creation_date":1304514037,"answer_count":3,"title":"new File(&quot;&quot;) vs. new File(&quot;.&quot;): Feature or Bug?","body":"<p><code>new File(\"\")</code> and <code>new File(\".\")</code> yield the same canonical path, yet the former object is unsubable. Consider below code, and how both objects return the same canonical path. <a href=\"http://download.oracle.com/javase/6/docs/api/java/io/File.html#getCanonicalPath%28%29\">The documentation states</a> the canonical path is \"both absolute and unique\". Yet only the File created with the \".\" argument is actually usable.</p>\n\n<p>Shouldn't an exception be thrown at some point? Either in the empty string constructor call (since the object created doesn't seem valid), or at least in getCanonicalPath (which at least declares IOException)?</p>\n\n<pre><code>import java.io.File;\nimport java.io.IOException;\n\npublic abstract class Test {\n\n    public static void main(String[] args) throws Exception {\n        testFile(\"\");\n        testFile(\".\");\n    }\n\n    private static void testFile(String arg) throws IOException {\n        System.out.format(\"File constructor argument: \\\"%s\\\"\\n\", arg);\n        File g = new File(arg);\n      System.out.format(\"toString()            = \\\"%s\\\"\\n\", g.toString());\n        System.out.format(\"getAbsolutePath()     = \\\"%s\\\"\\n\", g.getAbsolutePath());\n        System.out.format(\"getAbsoluteFile()     = \\\"%s\\\"\\n\", g.getAbsoluteFile());\n        System.out.format(\"getgetCanonicalPath() = \\\"%s\\\"\\n\", g.getCanonicalPath());\n        System.out.format(\"getgetCanonicalFile() = \\\"%s\\\"\\n\", g.getCanonicalFile());\n        System.out.format(\"exists()              = %s\\n\", g.exists());\n        System.out.format(\"isDirectory()         = %s\\n\", g.isDirectory());\n        System.out.println();\n  }\n}\n</code></pre>\n\n<p>And the output that it produces:</p>\n\n<pre><code>File constructor argument: \"\"\ntoString()            = \"\"\ngetAbsolutePath()     = \"C:\\usr\\workspace\\Test\"\ngetAbsoluteFile()     = \"C:\\usr\\workspace\\Test\"\ngetgetCanonicalPath() = \"C:\\usr\\workspace\\Test\"\ngetgetCanonicalFile() = \"C:\\usr\\workspace\\Test\"\nexists()              = false\nisDirectory()         = false\n\nFile constructor argument: \".\"\ntoString()            = \".\"\ngetAbsolutePath()     = \"C:\\usr\\workspace\\Test\\.\"\ngetAbsoluteFile()     = \"C:\\usr\\workspace\\Test\\.\"\ngetgetCanonicalPath() = \"C:\\usr\\workspace\\Test\"\ngetgetCanonicalFile() = \"C:\\usr\\workspace\\Test\"\nexists()              = true\nisDirectory()         = true\n</code></pre>\n","question_id":5883808,"tags":["file","io","java"],"score":34,"accepted_answer_id":5884502,"is_answered":true,"view_count":7581,"last_edit_date":1304514672},{"owner":{"profile_image":"https://i.stack.imgur.com/pYYSU.jpg?s=256&g=1","account_id":1729460,"user_type":"registered","user_id":1583374,"link":"https://stackoverflow.com/users/1583374/surz","reputation":994,"display_name":"Surz","accept_rate":78},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/25577398/error-unreported-exception-java-io-ioexception-must-be-caught-or-declared-to-be","last_activity_date":1518134285,"creation_date":1409354055,"answer_count":3,"title":"Error &quot;unreported exception java.io.ioexception must be caught or declared to be thrown&quot; in Java class","body":"<p>I am getting a \"unreported exception java.io.ioexception must be caught or declared to be thrown\" for some reason. I throw an I/O exception in this method:</p>\n\n<pre><code>    private void setChar() throws IOException\n    {\n        try\n        {\n            int data = in.read(); \n            if(data==-1)\n            {\n                eof = true; \n            }\n            else\n            {\n                currentChar = (char) data; \n            }\n        }\n        catch (IOException e) \n        {\n            System.exit(0);\n        }\n    }\n</code></pre>\n\n<p>And I call the method here (in the constructors):</p>\n\n<pre><code>private BufferedReader in;\nprivate char currentChar;\nprivate boolean done;\n\npublic Scanner(InputStream inStream)\n{\n    in = new BufferedReader(new InputStreamReader(inStream));\n    done = false;\n    getNextChar();\n}\n\npublic Scanner(String inString)\n{\n    in = new BufferedReader(new StringReader(inString));\n    done = false; \n    setChar();\n}\n</code></pre>\n\n<p>Am I calling / throwing the exception wrong?</p>\n","question_id":25577398,"tags":["java","exception","io","ioexception"],"score":-1,"accepted_answer_id":25577455,"is_answered":true,"view_count":10787,"last_edit_date":1518134171},{"owner":{"profile_image":"https://www.gravatar.com/avatar/7d44423fad79530b59a084b2d15ee19a?s=256&d=identicon&r=PG","account_id":221017,"user_type":"registered","user_id":478765,"link":"https://stackoverflow.com/users/478765/ed22","reputation":1137,"display_name":"ed22","accept_rate":50},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48654729/i-have-an-input-stream-and-need-to-make-it-look-like-a-file-on-disk-possible-in","last_activity_date":1517969531,"creation_date":1517967916,"answer_count":0,"title":"I have an input stream and need to make it look like a file on disk. Possible in Java?","body":"<p>I have a third party class that only accepts files but all I can provide is InputStream. Is it possible to make a stream \"look\" like a file so that I could pass it to the before mentioned class.</p>\n\n<p>Specifically I need to pass this stream to javafx.scene.media.Media() constructor which accepts only a file path. I do not have the file \"video.mp4\" - only a stream.</p>\n\n<pre><code> // create media player\n Media media = new Media(\"video.mp4\");\n MediaPlayer mediaPlayer = new MediaPlayer(media);\n</code></pre>\n","question_id":48654729,"tags":["java","io"],"score":0,"is_answered":false,"view_count":193,"last_edit_date":1517969531},{"owner":{"profile_image":"https://www.gravatar.com/avatar/6ae8d785e5cebd64e31d803e97713380?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":12733114,"user_type":"registered","user_id":9248984,"link":"https://stackoverflow.com/users/9248984/some-student","reputation":67,"display_name":"Some Student"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48650358/binary-i-o-skipping-the-bytes-and-printing-only-the-utf-types","last_activity_date":1517945446,"creation_date":1517944567,"answer_count":1,"title":"Binary I/O Skipping the bytes and printing only the UTF types","body":"<p>So here is my problem : I need to read some data from a .dat file, the problem being that not all things are saved the same (some UTF, Int, Double), so I can't just <code>readUTF()</code> in a loop until it's done because it will stumble upon an Int and give me an error. One thing I do know is that the order of the things written in the .dat file, and they go like this: UTF, Int, Double, Double, Double. Here is the code I have so far :</p>\n\n<pre><code>import java.io.*;\n\npublic class BytePe1 {\n   public static void main(String[] args) {\n      try {\n         FileInputStream fis = new  FileInputStream(\"ClassList.dat\");\n         BufferedInputStream bis = new BufferedInputStream( fis );\n         DataInputStream dis = new DataInputStream(bis);\n\n         String studentName;\n         int studentNumber;\n\n         //while(dis.readLine() != null) {\n            System.out.println(\"Name\");\n            System.out.println(dis.readUTF());\n            System.out.println(dis.readInt());\n            System.out.println(dis.readDouble());\n            System.out.println(dis.readDouble());\n            System.out.println(dis.readDouble());\n            //System.out.println(dis.readUTF());\n            //And I would need to repeat these steps above but I don't know how many\n            //Files there actually are, so I would like to not just spam this until I see errors\n         //}\n         dis.close();\n      }\n      catch(Exception e) {\n         System.out.println(\"Exception: \" + e.getMessage());\n      }\n   }\n}\n</code></pre>\n\n<p>This will output the correct things but I don't know how many things I have saved in that file, and thats what I would like to know; is it possible to skip some parts of the file and just print all of the names and then int's and so on.\n<a href=\"https://i.stack.imgur.com/TeK2h.png\" rel=\"nofollow noreferrer\">One small part of the reading</a></p>\n","question_id":48650358,"tags":["java","io","datainputstream"],"score":0,"accepted_answer_id":48650560,"is_answered":true,"view_count":118},{"owner":{"profile_image":"https://www.gravatar.com/avatar/a803d236c435f104ed1fde59fb9d1c61?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":9772223,"user_type":"registered","user_id":7243671,"link":"https://stackoverflow.com/users/7243671/topgun741","reputation":135,"display_name":"topgun741","accept_rate":20},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/48612350/file-not-found-in-data-user-0-package-name-files-directory-but-is-found-in-d","last_activity_date":1517871620,"creation_date":1517773942,"answer_count":0,"title":"File not found in /data/user/0/[package name]/files directory but is found in /data/data/[package name]/files directory","body":"<p>I am downloading a zip file from a server to my internal storage. It is saved to the <code>/data/data/[package name]/files</code> directory and I can view it with the device file explorer in Android Studio. But when I try to access it to unzip it, I get the following error:</p>\n\n<pre><code>java.io.FileNotFoundException: thezip.zip: open failed: ENOENT (No such file or directory)\n</code></pre>\n\n<p>When I call:</p>\n\n<pre><code>context.getFileDir();\n</code></pre>\n\n<p>it gives me the following directory:</p>\n\n<pre><code>/data/user/0/[package name]/files\n</code></pre>\n\n<p>Which is a symbolic link to the </p>\n\n<pre><code>/data/data/[package name]/files directory\n</code></pre>\n\n<p>So I should have access to the zip file, shouldn't I?</p>\n\n<p>What am I missing here? I want to be able to have any user that uses the app to have access to the files in the zip folder. Help!</p>\n\n<p><strong>EDIT</strong>: here is the code:</p>\n\n<pre><code>class DownloadFileAsync extends AsyncTask&lt;String, String, String&gt; {\n    private Context context;\n    private String fileName;\n\n    public DownloadFileAsync(Context context, String fileName){\n        this.context = context;\n        this.fileName = fileName;\n    }\n\n    @Override\n    protected void onPreExecute() {\n        super.onPreExecute();\n\n    }\n\n    @Override\n    protected String doInBackground(String... aurl) {\n        downloadZipFile(aurl[0]);\n        try {\n            unzipFolder(fileName);\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n\n    }\n    protected void onProgressUpdate(String... progress) {\n        Log.d(\"ANDRO_ASYNC\",progress[0]);\n\n    }\n\n    @Override\n    protected void onPostExecute(String unused) {\n\n    }\n\n    private void downloadZipFile(String link){\n        int count;\n\n        try {\n\n            URL url = new URL(link);\n            URLConnection connection = url.openConnection();\n            connection.connect();\n\n            int lenghtOfFile = connection.getContentLength();\n            Log.d(\"ANDRO_ASYNC\", \"Lenght of file: \" + lenghtOfFile);\n\n           // File file = new File(context.getFilesDir(), fileName);\n            File file = new File(context.getFilesDir(), fileName);\n            Log.d(\"zzzz\", file.toString());\n            InputStream input = new BufferedInputStream(url.openStream());\n            FileOutputStream output = new FileOutputStream(file);\n\n            byte data[] = new byte[1024];\n\n            long total = 0;\n\n            while ((count = input.read(data)) != -1) {\n                total += count;\n                publishProgress(\"\"+(int)((total*100)/lenghtOfFile));\n                output.write(data, 0, count);\n            }\n\n            output.flush();\n            output.close();\n            input.close();\n        } catch (Exception e) {}\n    }\n\n    private void unzipFolder(String zippedFile) throws IOException {\n            //Log.d(\"zzzz\", context.getFilesDir().toString());\n\n        byte[] buffer = new byte[1024];\n        ZipInputStream zipInputStream = new ZipInputStream(new FileInputStream(zippedFile));\n        ZipEntry zipEntry = zipInputStream.getNextEntry();\n        while (zipEntry != null){\n            String aFile = zipEntry.getName();\n            File newFile = new File(context.getFilesDir(), aFile);\n//            File newFile = new File(context.getFilesDir(), aFile);\n            FileOutputStream fileOutputStream = new FileOutputStream(newFile);\n            int len;\n            while ((len = zipInputStream.read(buffer)) &gt; 0){\n                fileOutputStream.write(buffer, 0, len);\n            }\n            fileOutputStream.close();\n            zipEntry = zipInputStream.getNextEntry();\n        }\n\n        zipInputStream.closeEntry();\n        zipInputStream.close();\n\n    }\n}\n</code></pre>\n","question_id":48612350,"tags":["java","android","io","filesystems","android-file"],"score":6,"is_answered":false,"view_count":6034,"last_edit_date":1517871620},{"owner":{"user_type":"does_not_exist","display_name":"user7038003"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42320415/difference-between-system-err-println-and-just-throwing-an-exception-java","last_activity_date":1487451975,"creation_date":1487450193,"answer_count":3,"title":"difference between system.err.println and just throwing an exception? (java)","body":"<p>I'm trying to open and read a file passed from the command line. </p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>import java.io.*;\n\npublic class Test {\n\n    public static void main(String[] args) throws FileNotFoundException {\n\n        if ( (args[0].length() == 0) || (args[0] == null) || (args[0].isEmpty()) ) {\n            System.err.println(\"Usage Error: No file name was provided.\");\n            System.exit(1);\n        }\n\n        File file = new File(args[0]);\n\n        if (!file.exists()) {\n            System.err.println(\"Usage Error: The file, \" + args[0] + \", does not exist.\");\n        }\n\n        if (!file.canRead()) {\n            System.err.println(\"Usage Error: The file, \" + args[0] + \", cannot be read.\");\n        }\n    } // main\n}\n</code></pre>\n\n<p>I am not entirely sure how I should be handling file not found exceptions. My teacher has mentioned try/catch blocks but I wasn't sure if I needed those here. Is it sufficient to just test to see if the file was passed as an argument and if it wasn't use the System.err.print() method to give the user an error? </p>\n\n<p>Also, if System.err.print() is called does it exit the program after that (meaning, do I need to include System.exit(1) after that)? Or is it better (in terms of design) to just do something like this:</p>\n\n<pre><code>public void readFile() throws FileNotFoundException {\n    // try to open file here\n}\n\npublic static void main(String[] args) {\n   try {\n       readFile(); \n   } catch (Exception e) {\n       // exception handled here\n   }\n}\n</code></pre>\n\n<p>I just need to make sure the user actually passes a string as the file name and that it exists/can be read.</p>\n","question_id":42320415,"tags":["java","io","filenotfoundexception"],"score":-2,"accepted_answer_id":42320475,"is_answered":true,"view_count":2376,"last_edit_date":1487450805},{"owner":{"profile_image":"https://www.gravatar.com/avatar/9db3bf26eef643ef5238d499e07aced0?s=256&d=identicon&r=PG","account_id":1371375,"user_type":"registered","user_id":1306482,"link":"https://stackoverflow.com/users/1306482/jasmin-meg","reputation":53,"display_name":"Jasmin Meg"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/9965875/java-file-createnewfile-file-not-created-and-no-exceptions-thrown","last_activity_date":1487325959,"creation_date":1333295983,"answer_count":4,"title":"Java file.createNewFile file not created and no exceptions thrown","body":"<p>The following code does not always create the file. \nAs far as I noticed, the first time this code has run, though no exception is thrown and createdFileSucceeded == true, the file doesn't get created.</p>\n\n<p>I run the code on Windows, java 6. </p>\n\n<p>Any input could be helpful</p>\n\n<pre><code>File file = new File(tmpDir, fileName);\n\ntry {\nif (tmpDir == null) {\n  String environmentHomePath // = somePath;\n  tmpDir = new File(environmentHomePath, \"SampleDumps\");\n\n  if (! tmpDir.exists() || ! tmpDir.isDirectory()) {\n    boolean mkdirSucceeded = tmpDir.mkdir();\n    if (! mkdirSucceeded) {\n      throw new IOException(\"Failed creating directory: '\" + tmpDir.getAbsolutePath() + \"'\");\n    }\n  }\n}\n\nif (file.exists()) {\n  boolean deleteFileSucceeded = file.delete(); \n  if (! deleteFileSucceeded) {\n    throw new IOException(\"Unable to delete pre existing sample file: '\" + fileName + \"'\");\n  }\n}\n\nboolean createFileSucceeded = file.createNewFile();\nif (! createFileSucceeded) {\n  throw new IOException(\"Unable to create sample file: '\" + fileName + \"'\");\n}\n\nfw = new FileWriter(file);\nbw = new BufferedWriter(fw);\n\nStringBuilder sb = new StringBuilder(\"something...\");\n\nbw.write(sb.toString());\nbw.flush();\n}\ncatch (IOException ioe) {\nlog.warn(\"Unable to file invalid sample to file: '\" + fileName + \"'\", ioe);\n}\nfinally {\nif (bw != null) {\n  try {\n    bw.close();\n  } catch (IOException e) {\n    log.warn(\"Unable to close Writer to file: '\" + fileName + \"'\", e);\n  }\n}\nelse if (fw != null) {\n  try {\n    fw.close();\n  } catch (IOException e) {\n    log.warn(\"Unable to close Writer to file: '\" + fileName + \"'\", e);\n  }\n}\n}\n</code></pre>\n","question_id":9965875,"tags":["java","io"],"score":5,"accepted_answer_id":9965937,"is_answered":true,"view_count":11311},{"owner":{"profile_image":"https://lh4.googleusercontent.com/-Nvys2W4v0tk/AAAAAAAAAAI/AAAAAAAABKc/Uiuw5qdWsPI/photo.jpg?sz=256","account_id":10261841,"user_type":"registered","user_id":7572899,"link":"https://stackoverflow.com/users/7572899/akhil-chaturvedi","reputation":1,"display_name":"Akhil Chaturvedi"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42266587/how-to-save-a-file-in-a-text-editor","last_activity_date":1487274381,"creation_date":1487226860,"answer_count":1,"title":"How to save a file in a text editor?","body":"<p>This code creates a small application which is a basic text editor initially and I have added a drop down file menu which is obvious in every editor, it includes features like 'new', 'open', 'save' and 'save as'.</p>\n\n<p>I am not getting how to add the feature of saving in the existing file and a new file.</p>\n\n<pre><code>import java.io.*;  \nimport java.awt.event.*;  \nimport javax.swing.*;    \nimport java.io.IOException;\nimport java.nio.file.StandardOpenOption;\n\npublic class Editor implements ActionListener\n{    \n\n    boolean updateStatus;\n    Editor Jedtr;\n    boolean saved;  \n    boolean newFileFlag;  \n    String fileName;    \n    static File fileRef;  \n\n\n    JFrame f;    \n    JMenuBar mb;    \n    JMenu file,edit,help;    \n    JMenuItem cut,copy,paste,selectAll,NewFile,Open,Save,SaveAs;    \n    JTextArea ta;  \n\n\n    Editor(){ \n\n\n        saved=true;  \n        newFileFlag=true;  \n        fileName=new String(\"Untitled\");  \n        fileRef=new File(fileName);  \n\n        Open=new JMenuItem(\"Open File\");    \n        Open.addActionListener(this);            \n        file=new JMenu(\"File\");    \n        file.add(Open);             \n        mb=new JMenuBar();    \n        f=new JFrame();    \n        cut=new JMenuItem(\"Cut\");    \n        copy=new JMenuItem(\"Copy\");    \n        paste=new JMenuItem(\"Paste\");    \n        selectAll=new JMenuItem(\"Select All\");    \n\n        /////////////////////////////////////////////////////////////////////////////////\n\n        NewFile =new JMenuItem(\"New\");\n        Open=new JMenuItem(\"Open\");\n        Save=new JMenuItem(\"Save\");\n        SaveAs=new JMenuItem(\"Save As\");\n\n        ///////////////////////////////////////////////////////////////////////////////////\n\n        cut.addActionListener(this);    \n        copy.addActionListener(this);    \n        paste.addActionListener(this);    \n        selectAll.addActionListener(this);\n\n        /////////////////////////////////////////////////////////////////////////////////////\n\n        NewFile.addActionListener(this);\n        Open.addActionListener(this);\n        Save.addActionListener(this);\n        SaveAs.addActionListener(this);\n\n        //////////////////////////////////////////////////////////////////////////////////\n\n        mb=new JMenuBar();    \n        file=new JMenu(\"File\");    \n        edit=new JMenu(\"Edit\");    \n        help=new JMenu(\"Help\");     \n        file.add(NewFile);file.add(Open);file.add(Save);file.add(SaveAs);    \n        edit.add(cut);edit.add(copy);edit.add(paste);edit.add(selectAll);    \n        mb.add(file);mb.add(edit);mb.add(help);    \n\n        ///////////////////////////////////////////////////////////////////////////////////////\n\n        ta=new JTextArea();    \n        ta.setBounds(5,5,1200,1200);    \n        f.add(mb);f.add(ta);    \n        f.setJMenuBar(mb);  \n        f.setLayout(null);    \n        f.setSize(800,400);    \n        f.setVisible(true);\n        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n    }     \n\n\n\n\n    /////////////////////////////Action performed/////////////////////////////////////////////////\n\n\n    public void actionPerformed(ActionEvent e) \n    {\n        if(e.getSource()==cut)                 \n            ta.cut();                                // to cut text.\n        else if(e.getSource()==paste)\n            ta.paste();                             // to paste text. \n        else if(e.getSource()==copy)\n            ta.copy();                              // to copy text.\n        else if(e.getSource()==selectAll)\n            ta.selectAll();                        // to select text. \n        else if(e.getSource()==Open)\n        {\n            JFileChooser fc=new JFileChooser();\n            int i=fc.showOpenDialog(f);\n            if(i==JFileChooser.APPROVE_OPTION)\n            {\n                File f=fc.getSelectedFile();\n                String filepath=f.getPath();\n                try\n                {\n                    BufferedReader br=new BufferedReader(new FileReader(filepath));\n                    String s1=\"\",s2=\"\";\n                    while((s1=br.readLine())!=null)\n                    {\n                        s2+=s1+\"\\n\";\n                    }\n                    ta.setText(s2);\n                    br.close();\n                }\n                catch (Exception ex)\n                {\n                    ex.printStackTrace();\n                }\n            }\n        }                                       //to open an existing file\n        else if(e.getSource() == NewFile)\n        {\n            JFileChooser fc=new JFileChooser();\n            int j=fc.showOpenDialog(f);\n            if (j==JFileChooser.CUSTOM_DIALOG);\n\n            System.out.println(\"New File\");\n\n            File file = new File(\"C:\\\\Android\\\\.txt\");\n\n            boolean result;\n            try {\n                // create a new file\n                result = file.createNewFile();\n                // test if successfully created a new file\n                if(result){\n                    System.out.println(\"Successfully created \"+file.getAbsolutePath());\n\n                }\n                else{\n                    System.out.println(\"Filed creating \"+file.getAbsolutePath());\n                }\n            }\n                catch (IOException e1) {\n                    // TODO Auto-generated catch block\n                    e1.printStackTrace();\n                }\n    }                                            // to create a new file.\n\n            else if(e.getSource()== SaveAs)\n            {                                  // what to specify here?\n                }\n\n\n\n            else if(e.getSource()==Save)\n            {                                 // what to specify here?\n            }\n}\n\n\n\n\n                /*private Object SaveAs(File temp)\n{\n    // TODO Auto-generated method stub\n    return null;\n}\n\n\n\n///////////////////////////////////////////////////////////////////////////////////////////////\n\n\nprivate void updateStatus(File temp, boolean b)\n{\n    // TODO Auto-generated method stub\n\n}*/\n                boolean isSave()\n                {\n                    return saved;}  \n\n                void setSave(boolean saved)\n                {\n                    this.saved=saved;\n                }\n\n                String getFileName()\n                {\n                    return new String(fileName);\n                }\n\n                void setFileName(String fileName)\n                {\n                    this.fileName=new String(fileName);\n                }  \n\n                ////-------File-------////////\n\n                //public class File implements ActionListener{}\n\n                ////-------File-------////////\n\n                /*public void actionPerformedf(ActionEvent O) {    \nif(O.getSource()==Open){    \n    JFileChooser fc=new JFileChooser();    \n    int i=fc.showOpenDialog(f);    \n    if(i==JFileChooser.APPROVE_OPTION){    \n        File f=fc.getSelectedFile();    \n        String filepath=f.getPath();    \n        try{  \n        BufferedReader br=new BufferedReader(new FileReader(filepath));    \n        String s1=\"\",s2=\"\";                         \n        while((s1=br.readLine())!=null){    \n        s2+=s1+\"\\n\";    \n        }    \n        ta.setText(s2);    \n        br.close();    \n        }catch (Exception ex) \n        {\n            ex.printStackTrace();          \n        }\n    }\n    }\n    }*/    \n\n                public static void main(String[] args) {    \n\n                    new Editor(); \n\n                }    \n            }\n</code></pre>\n","question_id":42266587,"tags":["java","swing","file","io","jtextarea"],"score":0,"is_answered":false,"view_count":1317,"last_edit_date":1487274381},{"owner":{"profile_image":"https://www.gravatar.com/avatar/c7ef16d4725d403d423198e39a0be6b5?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":8193308,"user_type":"registered","user_id":6166963,"link":"https://stackoverflow.com/users/6166963/giorgio-b","reputation":113,"display_name":"giorgio-b"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/37545236/java-asynchronous-i-o-channel-for-reading-and-writing-lines","last_activity_date":1487263793,"creation_date":1464696153,"answer_count":1,"title":"Java: Asynchronous I/O channel for reading and writing lines","body":"<p>I have an application that synchronously reads and writes lines of text using a <code>BufferedReader</code> and a <code>PrintStream</code> wrapping the <code>InputStream</code> and <code>OutputStream</code> of a <code>java.net.Socket</code> object. So, I can just use the methods <code>BufferedReader.readLine()</code> and <code>PrintStream.println()</code> and let the Java library split the input into lines and format the output for me.</p>\n\n<p>Now I want to replace this synchronous IO with asynchronous IO. So I have been looking into <code>AsynchronousSocketChannel</code> which allows to read and write bytes asynchronously. Now, I would like to have wrapper classes so that I can asynchronously read / write lines using strings.</p>\n\n<p>I cannot find such wrapper classes in the Java library. Before I write my own implementation, I wanted to ask if there are any other libraries that allow to wrap <code>AsynchronousSocketChannel</code> and provide asynchronous text IO.</p>\n","question_id":37545236,"tags":["java","asynchronous","text","io"],"score":6,"is_answered":true,"view_count":1804,"last_edit_date":1464696678},{"owner":{"profile_image":"https://i.stack.imgur.com/rFPHA.jpg?s=256&g=1","account_id":6204832,"user_type":"registered","user_id":4833259,"link":"https://stackoverflow.com/users/4833259/alisondong","reputation":151,"display_name":"alisondong"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42266463/java-how-to-get-input-from-console-with-redirection","last_activity_date":1487226367,"creation_date":1487226367,"answer_count":0,"title":"JAVA: how to get input from console with redirection","body":"<p>Sorry to bother you guys, but I cannot find answer when did a lot of searching.</p>\n\n<p>Here is my code, it's pretty simple:</p>\n\n<pre><code>import java.io.IOException;\nimport java.io.ObjectInputStream;\n\npublic class Test {\n    public static void main(String[] args) {\n        System.out.println(args.length);\n        ObjectInputStream is;\n        try {\n            is = new ObjectInputStream(System.in);\n        } catch (IOException e1) {\n            // TODO Auto-generated catch block\n            e1.printStackTrace();\n        }\n\n        String input = System.console().readLine();\n        System.out.println(\"input: \" + input);\n\n    }\n}\n</code></pre>\n\n<p>With command like : java Test, everything works find, and I can get input from console by typing something.\nBUT, with redirection in the command, I cannot type on console to input, the application will return immediately.</p>\n\n<pre><code>java Test /d/aa.dat &lt; /d/example.dat\nException in thread \"main\" java.lang.NullPointerException\n        at Test.main(Test.java:17) \n</code></pre>\n\n<p>I think the root cause is when I use redirection in command line with a file, the default System.in is override by file \"example.dat\".</p>\n\n<p>My question is how can I restore the default System.in to let user input from console?</p>\n\n<p>Thank you so much.</p>\n","question_id":42266463,"tags":["java","redirect","io","inputstream"],"score":0,"is_answered":false,"view_count":1216},{"owner":{"profile_image":"https://www.gravatar.com/avatar/dc897b561a54763c39bc7f005c59b066?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":3277192,"user_type":"registered","user_id":2758839,"link":"https://stackoverflow.com/users/2758839/geogecco","reputation":437,"display_name":"GeoGecco","accept_rate":57},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/29879254/ycad-dxf-library-code-example","last_activity_date":1487182531,"creation_date":1430060535,"answer_count":0,"title":"YCad DXF Library code example","body":"<p>I'm currently working on a java project and need to export a DXF with lines and text. Especially MTEXT which is a multi-line text in AutoCAD DXF files.</p>\n\n<p>I was hoping that anyone here already used the \"<a href=\"http://sourceforge.net/projects/ycad/\" rel=\"nofollow noreferrer\">Ycad</a>\" Library. I can't find any code example and I only have the documentation which doesn't help me right away. <a href=\"https://stackoverflow.com/questions/23512202/ycad-library-usage/29879083#29879083\">This</a> and <a href=\"https://stackoverflow.com/questions/23801956/save-dxf-file-in-java\">that</a> are the only examples I found...</p>\n\n<p>I would need a code snipped which shows how to create a new DXF File, insert lines and text entities and write the file via the Ycad library.\nI would be very thankful if anyone could give me a hint!</p>\n\n<p>Thanks in advance</p>\n","question_id":29879254,"tags":["java","file","io","dxf"],"score":4,"is_answered":false,"view_count":1698,"last_edit_date":1495540900},{"owner":{"profile_image":"https://www.gravatar.com/avatar/3068953dfa307d7a3e0e4c949b85ec01?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":10041747,"user_type":"registered","user_id":7424345,"link":"https://stackoverflow.com/users/7424345/mostafa-hosseini","reputation":7,"display_name":"Mostafa.Hosseini"},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42232627/output-is-empty-in-mapreduce","last_activity_date":1487146436,"creation_date":1487093601,"answer_count":0,"title":"Output is Empty in MapReduce","body":"<p>I have Two Function in Reducer Class : \"reducer\" and \"execute\". in \"myExecute\" function :</p>\n\n<pre><code>public class Reducer extends MapReduceBase\nimplements Reducer&lt;IntWritable,Text, IntWritable, Text&gt;, TIntProcedure\n{\n    OutputCollector&lt; IntWritable, Text&gt; m_Collector = null;\n    RTree tree = new RTree();\n    private int m_BasePolyId;\n    private HashMap&lt;Integer,PolyDefault&gt; m_BasePolyMap = new HashMap&lt;Integer,PolyDefault&gt;();\n    private HashMap&lt;Integer,PolyDefault&gt; m_ClipPolyMap = new HashMap&lt;Integer,PolyDefault&gt;();\n\n    public void configure(JobConf conf) \n    {\n      //initialize the RTree\n      tree.init(null);\n    }\n\n    // the key is grid id and values are the polygon texts\n\n    public void reduce(IntWritable gridId, Iterator&lt;Text&gt; values,\n            OutputCollector&lt;IntWritable, Text&gt; collector, Reporter arg3)\n            throws IOException \n    {\n        m_Collector = collector;\n\n        List&lt;PolyDefault&gt;basePolyList = new ArrayList&lt;PolyDefault&gt;();\n        List&lt;PolyDefault&gt; overlayPolyList = new ArrayList&lt;PolyDefault&gt;();\n\n        Text clipText; \n\n        int count = 0;\n        String strcount = \" \";\n        PolyDefault basePolygon = null;\n\n        String strBaseId;\n        String strClipId;\n        int baseId = 0;\n        int clipId = 0;\n        //values contain both basepolygons and clip polygons\n        PolyDefault clipPoly;\n\n        while(values.hasNext())\n        {\n            Text text = values.next(); \n\n            if(text.charAt(0) == 'b')\n            {\n                basePolygon = new PolyDefault();\n                StringTokenizer baseItr = new StringTokenizer(text.toString());\n                //System.err.println(\"base : = \" + baseText);\n                while (baseItr.hasMoreTokens()) // tokens are strings from one serialized polygon\n                {     \n                  if(count == 0)\n                   {\n                    baseItr.nextToken(); //discard\n                    strBaseId = baseItr.nextToken(); //index or line number \n                    baseId = Integer.parseInt(strBaseId);\n\n                    Point2D lbox = new Point2D.Double(Double.parseDouble(baseItr.nextToken()), Double.parseDouble(baseItr.nextToken()));\n                    basePolygon.setM_lbBox(lbox);\n\n                    Point2D ubox = new Point2D.Double(Double.parseDouble(baseItr.nextToken()),Double.parseDouble(baseItr.nextToken()));\n                    basePolygon.setM_ubBox(ubox);\n                   }\n                   count = count + 1;\n\n                  double xCord,yCord;\n\n                  xCord = Double.parseDouble(baseItr.nextToken());\n                  yCord = Double.parseDouble(baseItr.nextToken());\n                  Point2D vertex = new Point2D.Double(xCord,yCord);\n\n                  basePolygon.add(vertex);\n                 }\n                 basePolyList.add(basePolygon);\n                 m_BasePolyMap.put(baseId,basePolygon);\n            }\n            else\n            {\n\n                  StringTokenizer clipItr = new StringTokenizer(text.toString());\n                  clipPoly = new PolyDefault();\n\n                  while(clipItr.hasMoreTokens())\n                  {\n                    if(count == 0)\n                    {\n                     //discard the index or line number\n                     strClipId =  clipItr.nextToken();  //index or line number\n                     clipId = Integer.parseInt(strClipId);\n\n                     Point2D lbox = new Point2D.Double(Double.parseDouble(clipItr.nextToken()), Double.parseDouble(clipItr.nextToken()));\n                     clipPoly.setM_lbBox(lbox);\n\n                     Point2D ubox = new Point2D.Double(Double.parseDouble(clipItr.nextToken()),Double.parseDouble(clipItr.nextToken()));\n                     clipPoly.setM_ubBox(ubox);\n\n                     Rectangle r2 = new Rectangle((float)lbox.getX(), (float)lbox.getY(), (float)ubox.getX(), (float)ubox.getY());\n                     tree.add(r2, clipId);\n                    }\n                    count = count + 1;\n\n                    double xCord,yCord;\n\n                    xCord = Double.parseDouble(clipItr.nextToken());\n                    yCord = Double.parseDouble(clipItr.nextToken());\n                    Point2D vertex = new Point2D.Double(xCord,yCord);\n\n                    clipPoly.add(vertex);\n                  }\n                  //overlayPolyList.add(clipPoly);\n                  m_ClipPolyMap.put(clipId, clipPoly);\n            }\n          } //end while\n\n          Iterator&lt;PolyDefault&gt; itr = basePolyList.iterator();\n          Rectangle baseBox = new Rectangle();\n          PolyDefault basePoly;\n\n          while(itr.hasNext())\n          {\n            basePoly = itr.next();\n            baseBox.maxX = (float)basePoly.getM_ubBox().getX();\n            baseBox.maxY = (float)basePoly.getM_ubBox().getY();\n            baseBox.minX = (float)basePoly.getM_lbBox().getX();\n            baseBox.minY = (float)basePoly.getM_lbBox().getY();\n            this.m_BasePolyId = basePoly.getId();\n\n            tree.intersects(baseBox, this);\n          }\n\n         } //end reduce\n\n    public boolean execute(int clipPolyId) \n    {\n        PolyDefault basePoly = m_BasePolyMap.get(m_BasePolyId);\n        PolyDefault clipPoly = m_ClipPolyMap.get(clipPolyId);\n        PolyDefault resultPoly = (PolyDefault)Clip.intersection(basePoly, clipPoly);\n\n        String strResult;\n        if(resultPoly.isEmpty() == false)\n        {\n           strResult = Parser.serializePoly(resultPoly).toString(); \n           try \n           {\n            m_Collector.collect(null,new Text(strResult) );\n            System.out.println(strResult);\n           } \n           catch (IOException e) \n           {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n           }\n\n        }\n        return true;\n    }\n\n}\n</code></pre>\n\n<p>map and reduce run completely , but in output(part-0000) , there is no message \"Result Sucess ...\" .\ncan I call Execute function in reducer or ... ?</p>\n\n<p>Thanks</p>\n","question_id":42232627,"tags":["java","hadoop","io","mapreduce","reduce"],"score":1,"is_answered":false,"view_count":231,"last_edit_date":1487146436},{"owner":{"profile_image":"https://i.stack.imgur.com/2meZp.png?s=256&g=1","account_id":1065970,"user_type":"registered","user_id":1066530,"link":"https://stackoverflow.com/users/1066530/sas","reputation":2493,"display_name":"Sas","accept_rate":94},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42045098/io-bufferreader-vs-nio-files-newbufferedreader-charsetdecoder-leniency-on-malfor","last_activity_date":1487116971,"creation_date":1486239222,"answer_count":1,"title":"IO bufferReader vs nio Files.newBufferedReader CharsetDecoder leniency on MalformedInput","body":"<p>I have a text file that contains invalid \"UTF-8\" charactor and this causing my app to throw <code>MalformedInputException</code>. I use <code>Files.newBufferedReader</code> to create <code>BufferReader</code>.</p>\n\n<pre><code>Path path = FileSystems.getDefault().getPath(inputDirectory, fileName);\nBufferedReader br = Files.newBufferedReader(path, Charset.defaultCharset());\n</code></pre>\n\n<p>And this seems to be strict on the character encoding. I did some digging and found online that we can improve the leniency by overriding <code>CharactorDecoder</code> default action by <code>.onMalformedInput(CodingErrorAction.REPLACE)</code>. This seems to be fixing the issue.</p>\n\n<p>Then out of curiosity I used java IO <code>BufferedReader</code> to Read the same file.</p>\n\n<pre><code>fr = new FileReader(file);\nbr = new BufferedReader(fr);\n</code></pre>\n\n<p><strong>This seems to have no issue on the invalid character and read the file without any issue.</strong></p>\n\n<p>So I looked at the code of both <code>Files.newBufferedReader</code> and <code>new BufferedReader(fr)</code>. This is how they both implemented</p>\n\n<p><strong>Files.newBufferedReader</strong>:</p>\n\n<pre><code>public static BufferedReader newBufferedReader(Path path, Charset cs)\n    throws IOException\n{\n    //onMalformedInput is not overridden. Thus strict decoding\n    CharsetDecoder decoder = cs.newDecoder();\n\n    //Look at how the InputStreadReader created. The decoder being passed\n    Reader reader = new InputStreamReader(newInputStream(path), decoder);\n\n    return new BufferedReader(reader);\n}\n</code></pre>\n\n<p><strong>IO BuffereReader</strong></p>\n\n<pre><code>//Creating File Reader\n FileReader fr = new FileReader(file);\n\n --------------------------------------------------------------------\n//File Reader constructor\npublic FileReader(File file) throws FileNotFoundException {\n    //Calls it's supper constructor InputStreamReader\n    super(new FileInputStream(file));\n}\n\n-----------------------------------------------------------\n//InputStreamReader Constructor\npublic InputStreamReader(InputStream in) {\n    super(in);\n    try {\n        //This where I don't understand\n        sd = StreamDecoder.forInputStreamReader(in, this, (String)null); // ## check lock object\n    } catch (UnsupportedEncodingException e) {\n        throw new Error(e);\n    }\n}\n</code></pre>\n\n<p>As you can see they both uses <code>StreamDecoder.forInputStreamReader</code>. I know why <code>Files.newBufferedReader</code> has strict decoder. But I am trying to understand where in IO <code>BufferredReader</code>, it's defined to do lenient decoding.</p>\n\n<p>Would really appreciate if some can help me understand this.</p>\n","question_id":42045098,"tags":["java","io","bufferedreader","nio"],"score":1,"is_answered":false,"view_count":1188},{"owner":{"profile_image":"https://www.gravatar.com/avatar/01fe82b4e1acbc5cf2d856d7253e52fc?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":10251444,"user_type":"registered","user_id":7565563,"link":"https://stackoverflow.com/users/7565563/abbey-s","reputation":7,"display_name":"Abbey S"},"closed_date":1487116784,"link":"https://stackoverflow.com/questions/42237722/fairly-new-to-programming-trouble-reading-and-writing-to-a-binary-file","last_activity_date":1487113356,"creation_date":1487112802,"answer_count":1,"title":"Fairly new to programming, trouble reading and writing to a binary file.","body":"<p>So I've got an assignment where I'm supposed to read a .csv file and then write it out in a seperate binary file. The csv file gives strangely formatted stats about baseball players. </p>\n\n<p>Here is the code for the GUI where the program is actually run from:</p>\n\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport java.util.*;\nimport java.io.*;\n\npublic class Homework3 extends JFrame\n{\n   private JButton jbChoose = new JButton(\"Choose File to Convert\");\n   private JTextArea jtaDisc = new JTextArea(\"Welcome to the .csv to binary file converter. Simply click the button below and choose the .csv file you would like to write to binary.\", 5, 20);\n   private File fobj = null;\n\n   public static void main(String[] args)\n   {\n      new Homework3();\n   }\n\n   public Homework3()\n   {\n      this.setSize(400, 175);\n      this.setTitle(\"File Converter\");\n      this.setLocationRelativeTo(null);\n      this.setDefaultCloseOperation(EXIT_ON_CLOSE);\n      this.setResizable(false);\n\n      jtaDisc.setWrapStyleWord(true);\n      jtaDisc.setLineWrap(true);\n      jtaDisc.setEditable(false);\n\n      JPanel jpSouth = new JPanel();\n         jpSouth.add(jbChoose);\n         jpSouth.setAlignmentX(jbChoose.CENTER_ALIGNMENT);\n      this.add(jpSouth, BorderLayout.SOUTH);\n\n      JPanel jpNorth = new JPanel();\n         jpNorth.add(jtaDisc);\n      this.add(jpNorth, BorderLayout.NORTH);\n\n      Homework3Button hw3b = new Homework3Button(this);\n         jbChoose.addActionListener(hw3b);\n\n      setVisible(true);\n   }\n   public File getFobj()\n   {\n      return fobj;\n   }\n\n   public void setFobj(File _fobj)\n   {\n      fobj = _fobj;\n   }\n}\n</code></pre>\n\n<p>Here is the class where I actually try to do the reading and writing. I've got it set to print out the values of the csv file so I can see where it is going wrong. For some reason it's reading the first line and skipping the 2nd and 3rd instead of skipping the 1st and second like I want. It also doesn't get far enough to actually create the file in the write method.</p>\n\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\nimport java.io.*;\nimport javax.swing.filechooser.*;\nimport java.util.*;\n\npublic class Homework3Button implements ActionListener \n{\n   private Homework3 window;\n   private ArrayList&lt;Player&gt; data = new ArrayList&lt;Player&gt;();\n   private int pos; \n\n   public Homework3Button(Homework3 _window)\n   {\n      this.window = _window;\n   }\n\n   public void actionPerformed(ActionEvent ae)\n   {\n      doChoose();\n      doRead();\n      doWrite();\n   }\n\n   public void doChoose()\n   {\n      JFileChooser chooser = new JFileChooser(new File(\".\"));\n      FileNameExtensionFilter filter = new FileNameExtensionFilter(\"Excel Documents\", \"csv\");\n      chooser.setFileFilter(filter);\n\n      int returnVal = chooser.showDialog(window, \"Select\");\n      if(returnVal == JFileChooser.APPROVE_OPTION)\n      {\n         File fobj = chooser.getSelectedFile();\n         window.setFobj(fobj);\n      } \n   }\n\n   public void doRead()\n   {\n      File fobj = window.getFobj();\n      if(fobj == null)\n      {\n         JOptionPane.showMessageDialog(null, \"There was a problem reading your file.\", \"Opening Error\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      BufferedReader br = null;\n      try\n      {\n          br= new BufferedReader(new FileReader(fobj));\n      }\n      catch(IOException ioe)\n      {\n         JOptionPane.showMessageDialog(null, \"Cannot open file: \" + ioe.getMessage(), \"Cannot Open\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      data = new ArrayList&lt;Player&gt;();\n      try\n      {\n         String line = br.readLine() ;\n         while(line != null)\n         {\n            System.out.println(line);\n            for(int i = 0; i &lt;= 1; i++)\n            {\n                line = br.readLine();\n            }\n            Player pl = new Player(line);\n            data.add(pl);\n            line = br.readLine();\n         }\n      }\n      catch(EOFException eofe)\n      {\n         System.out.println(\"Exception for ArrayList.\");\n      } \n      catch(IOException ioe)\n      {\n         JOptionPane.showMessageDialog(null, \"Error reading file: \" + ioe.getMessage(), \"Bad Read\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      try\n      {\n          br.close();\n      }\n      catch(IOException ioe)\n      {\n         JOptionPane.showMessageDialog(null, \"Cannot close file: \" + ioe.getMessage(), \"Cannot Close\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n   }\n\n   public void doWrite()\n   {\n      File fobj2 = new File(\"BaseballNames1.bin\");\n\n      if(fobj2 == null)\n      {\n         JOptionPane.showMessageDialog(null, \"There was a problem writing to your file.\", \"Problem Writing\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      DataOutputStream dos = null;\n      try\n      {\n         dos = new DataOutputStream(new FileOutputStream(fobj2));\n      }\n      catch(IOException ioe)\n      {\n         JOptionPane.showMessageDialog(null, \"Cannot open file: \" + ioe.getMessage(), \"Cannot Open\", JOptionPane.ERROR_MESSAGE);\n         return;\n      }\n      System.out.println(\"Before For Loop\");\n      for(Player pl : data)\n      {\n         System.out.println(\"Inside For Loop\");\n         try\n         {\n            dos.writeUTF(pl.getName());\n            dos.writeUTF(pl.getBirth());\n            dos.writeInt(pl.getWeight());\n            dos.writeUTF(pl.getHeight());\n         }\n         catch(IOException ioe)\n         {\n            JOptionPane.showMessageDialog(null, \"Cannot write file: \" + ioe.getMessage(), \"Cannot Write\", JOptionPane.ERROR_MESSAGE);\n            return;\n         }\n         try \n         {\n            dos.close();\n         }\n         catch(IOException ioe)\n         {\n            JOptionPane.showMessageDialog(null, \"Cannot close file: \" + ioe.getMessage(), \"Cannot Close\", JOptionPane.ERROR_MESSAGE);\n            return;\n         }\n      }\n   }    \n}\n</code></pre>\n\n<p>Here is the class where I describe the a player object. When I try to run the program, after reading the .csv file I am met with a long list of errors. The top one is a null pointer exception at line 16 of this class. </p>\n\n<pre><code>import java.util.*;\nimport java.io.*;\n\npublic class Player\n{\n   private String firstName;\n   private String lastName;\n   private int birthDay;\n   private int birthMonth;\n   private int birthYear;\n   private int weight;\n   private double height;\n\n   public Player(String lineRead)\n   {\n      String[] fields = lineRead.split(\",\");\n      firstName = fields[0];\n      lastName = fields[1];\n      birthDay = Integer.parseInt(fields[2]);\n      birthMonth = Integer.parseInt(fields[3]);\n      birthYear = Integer.parseInt(fields[4]);\n      weight = Integer.parseInt(fields[5]);\n      height = Double.parseDouble(fields[6]);  \n   }\n\n   public String getName()\n   {\n      return firstName + \" \" + lastName;\n   }\n\n   public String getBirth()\n   {\n      return Integer.toString(birthMonth) + \"/\" + Integer.toString(birthDay) + \"/\" + Integer.toString(birthYear);\n   }\n\n   public int getWeight()\n   {\n      return weight;\n   }\n\n   public String getHeight()\n   {\n      String weight2 = String.format(\"%.2f\", weight);\n      return weight2;\n   }\n}\n</code></pre>\n\n<p>Here is the .csv file format, each line starts with one space in front of it:</p>\n\n<pre><code>namefirst , namelast  , birthday , birthmonth , birthyear , weight , height \n\nStarlin   , Castro    ,24,3,1990,190,72.8\nMadison   , Bumgarner ,1,8,1989,215,76.0\nJason     , Heyward   ,9,8,1989,240,77.3\nRuben     , Tejada    ,27,10,1989,160,71.2\nJenrry    , Mejia     ,11,10,1989,160,72.5\nMike      , Stanton   ,8,11,1989,235,77.9\nDayan     , Viciedo   ,10,3,1989,240,71.1\nChris     , Sale      ,30,3,1989,170,77.2\nFreddie   , Freeman   ,12,9,1989,225,77.7\nClayton   , Kershaw   ,19,3,1988,225,75.4\nTravis    , Snider    ,2,2,1988,235,72.0\nElvis     , Andrus    ,26,8,1988,200,72.0\nTrevor    , Cahill    ,1,3,1988,220,76.0\nRick      , Porcello  ,27,12,1988,200,77.0\nBrett     , Anderson  ,1,2,1988,235,76.5\nFernando  , Martinez  ,10,10,1988,200,73.0\nJhoulys   , Chacin    ,7,1,1988,215,75.2\nChris     , Tillman   ,15,4,1988,200,77.8\nNeftali   , Feliz     ,2,5,1988,215,75.5\nCraig     , Kimbrel   ,28,5,1988,205,71.6\n</code></pre>\n\n<p>I know this is a lot but none of the questions I look at online pertain to my specific problem and the javadocs are really confusing to me. This is my first big thing with Java IO so I'd really appreciate some help here... I'm not sure if it's a problem with the way I've declared the array in the Player class or what... Any advice on how to fix this mess is greatly appreciated.</p>\n","question_id":42237722,"tags":["java","arrays","csv","io"],"score":-6,"closed_reason":"Not suitable for this site","is_answered":true,"view_count":105},{"owner":{"profile_image":"https://www.gravatar.com/avatar/982c89b4ab31cedd7b618b2657a788f6?s=256&d=identicon&r=PG&f=y&so-version=2","account_id":9435166,"user_type":"registered","user_id":7017351,"link":"https://stackoverflow.com/users/7017351/johnny","reputation":103,"display_name":"Johnny","accept_rate":69},"content_license":"CC BY-SA 3.0","link":"https://stackoverflow.com/questions/42172869/filewriter-not-writing-into-directory-properly","last_activity_date":1486797449,"creation_date":1486793212,"answer_count":1,"title":"FileWriter not writing into directory properly","body":"<p>I have a simple program that reads in commands and performs them. Rightnow I have this code for inserting certain text into a text file:</p>\n\n<p>Example command:</p>\n\n<pre><code>INSERT \"John Smith\" INTO college.student\n</code></pre>\n\n<p>My main method: </p>\n\n<pre><code> else if(command.substring(0,6).equalsIgnoreCase(\"INSERT\")){\n        String string = command.substring(7, command.indexOf(\"INTO\") - 1);\n        String DBNameTBName = command.substring(command.indexOf(\"INTO\") + 5);\n        String tableName = DBNameTBName.substring(DBNameTBName.indexOf(\".\") + 1);\n        String DBName = DBNameTBName.substring(0, DBNameTBName.indexOf(\".\"));\n\n        if(DBCommands.insert(string, DBName, tableName)){\n            statfileWriter.println(\"Inserted \" + string  + \" into table \" + tableName + \" in \" + DBName);\n            statfileWriter.println(\"(\" + command + \")\");\n            statfileWriter.flush();\n        }\n        else{\n            errfileWriter.println(\"Error: Could not insert \" + string + \" into table \" + tableName + \" in \" + DBName);\n            errfileWriter.println(\"(\" + command + \")\");\n            errfileWriter.flush();\n        }       \n</code></pre>\n\n<p>And the insert method it calls: </p>\n\n<pre><code>public static boolean insert(String string, String DBName, String tableName){\n    try{\n        string = string.substring(string.indexOf('\"') + 1, string.lastIndexOf('\"')); //removes quotes\n\n        File tableToWriteTo = new File(DBName  + \"/\" + tableName + \".txt\");\n        if (!tableToWriteTo.exists()){\n            return false;\n        }\n\n        PrintWriter writer = new PrintWriter(new FileWriter\n                  (tableToWriteTo, true));\n        writer.println(string);\n        writer.close();\n        return true;\n    }\n    catch(Exception e){\n\n        return false;\n    }\n\n}\n</code></pre>\n\n<p>I am getting very weird behavior with my insert method. It returns true as it always prints to my status log and not error log. I know the method to create the .txt file is working perfectly, I have tested it many times and the student.txt file is always there. With my insert command, if I change the File = new File line to this: </p>\n\n<pre><code>File tableToWriteTo = new File(tableName + \".txt\");\n</code></pre>\n\n<p>Then it unsurprisingly creates a .txt file called \"student\" with my example command, but not in the \"DBName\" folder. If I change it to this: </p>\n\n<pre><code>File tableToWriteTo = new File(DBName  + \"/\" + tableName);\n</code></pre>\n\n<p>Then it creates a file called \"student\" with no type (as in, Windows asks what I want to open it with) but puts in the string I want to insert into it. I should note that if there are multiple INSERT commands then it writes all the strings as I would like it to. </p>\n\n<p>I have tried declaring <code>PrintWriter</code> and <code>File</code> in my main method and passing them in, but that doesn't work either. </p>\n\n<p>How can I get it to write into students.txt in the directory college? </p>\n\n<p>EDIT: Oh my goodness, I'm the stupidest person on Earth. I didn't look at the full commands list I received for this assignment and I forgot there was a delete command and they were BOTH working. I would delete this question but I'll leave this up in case anyone in the future wants to see an example of FileWriter.</p>\n","question_id":42172869,"tags":["java","string","io","filewriter","printwriter"],"score":1,"accepted_answer_id":42173224,"is_answered":true,"view_count":157,"last_edit_date":1486797449}]